{"remainingRequest":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/apps/content/ContentForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/apps/content/ContentForm.vue","mtime":1665531625450},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/babel-loader/lib/index.js","mtime":1665531751248},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js","mtime":1665531752006}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgppbXBvcnQgQ29udGVudEFwaSBmcm9tICcuLi8uLi9hcGkvQ29udGVudEFwaScKCmltcG9ydCBydWxlcyBmcm9tICJAL3V0aWxzL3J1bGVzIjsKaW1wb3J0IF8gZnJvbSAibG9kYXNoIjsKaW1wb3J0IEVkaXRvckNvbXBvbmVudCBmcm9tICIuLi8uLi9jb21wb25lbnRzL2VkaXRvci9FZGl0b3JDb21wb25lbnQiOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgICdlZGl0b3ItY29tcG9uZW50JzogRWRpdG9yQ29tcG9uZW50CiAgfSwKICBwcm9wczogWydpZCddLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB0YWI6IG51bGwsCiAgICAgIHJ1bGVzLAogICAgICBicmVhZGNydW1iczogW3sKICAgICAgICB0ZXh0OiAn7KCV7KCBIO2OmOydtOyngCDqtIDrpqwnLAogICAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgICBocmVmOiAnIycKICAgICAgfSwgewogICAgICAgIHRleHQ6IHRoaXMuJHByb3BzLmlkID8gJ+2OmOydtOyngCDsiJjsoJUnIDogJ+2OmOydtOyngCDrk7HroZ0nCiAgICAgIH1dLAogICAgICBjb250ZW50OiB7CiAgICAgICAgdGl0bGU6JycKICAgICAgfSwKICAgICAgY29waWVkQ29udGVudDoge30sCiAgICAgIGZpbGVNZXRhOiB7fSwKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHVwbG9hZEltYWdlKGYpIHsKICAgICAgQ29udGVudEFwaS51cGxvYWRJbWFnZShmKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy5maWxlTWV0YSA9IHJlczsKICAgICAgfSk7CiAgICB9LAogICAgYXN5bmMgc2F2ZUNvbnRlbnQoKSB7CiAgICAgIGlmIChjb25maXJtKCLsoIDsnqXtlZjsi5zqsqDsirXri4jquYw/IikgJiYgYXdhaXQgdGhpcy4kcmVmcy5jb250ZW50Rm9ybS52YWxpZGF0ZSgpKSB7CgogICAgICAgIHRoaXMuY29udGVudC5jb250ZW50cyA9IHRoaXMuJHJlZnMuY29udGVudHMuZ2V0VmFsdWUoKTsKCiAgICAgICAgQ29udGVudEFwaS5zYXZlKHRoaXMuY29udGVudCkudGhlbihyZXN1bHQgPT4gewogICAgICAgICAgdGhpcy5jb250ZW50LmlkID0gcmVzdWx0LmlkCiAgICAgICAgICBhbGVydCgi7KCA7J6l65CY7JeI7Iq164uI64ukLiIpCiAgICAgICAgICAvLyB0aGlzLiRyb3V0ZXIucHVzaCh7cGF0aDogJy9jb250ZW50cyd9KQogICAgICAgIH0pCiAgICAgIH0KICAgIH0sCiAgICBnb1RvTGlzdCgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goe3BhdGg6ICcvY29udGVudHMnfSkKICAgIH0sCiAgICByZXNldENvbnRlbnQoKSB7CiAgICAgIHRoaXMuY29udGVudCA9IF8uY2xvbmVEZWVwKHRoaXMuY29waWVkQ29udGVudCkKICAgIH0sCiAgICBkZWxldGVDb250ZW50KGNvbnRlbnQpIHsKICAgICAgaWYgKGNvbmZpcm0oJ+yCreygnO2VmOyLnOqyoOyKteuLiOq5jD8nKSkKICAgICAgICBDb250ZW50QXBpLmRlbGV0ZShjb250ZW50LmlkKS50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMuY29udGVudCA9IHRoaXMuY29udGVudC5maWx0ZXIociA9PiByICE9PSBjb250ZW50KQogICAgICAgICAgYWxlcnQoIuyCreygnOuQmOyXiOyKteuLiOuLpC4iKQogICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goe3BhdGg6ICcvY29udGVudHMnfSkKICAgICAgICB9KQogICAgfQoKICB9LAogIGNyZWF0ZWQoKSB7CiAgICBpZiAodGhpcy5pZCkgewogICAgICBDb250ZW50QXBpLmZpbmRDb250ZW50QnlJZCh0aGlzLmlkKS50aGVuKHJlc3VsdCA9PiB7CiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzdWx0KQogICAgICAgIHRoaXMuY29udGVudCA9IHJlc3VsdDsKICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmNvbnRlbnQpCiAgICAgICAgdGhpcy5jb3BpZWRDb250ZW50ID0gXy5jbG9uZURlZXAodGhpcy5jb250ZW50KQoKICAgICAgfSkKICAgIH0KICB9CgoKfTsK"},{"version":3,"sources":["ContentForm.vue"],"names":[],"mappings":";;AA+EA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA","file":"ContentForm.vue","sourceRoot":"src/apps/content","sourcesContent":["<template>\n  <div class=\"flex-grow-1\">\n    <div class=\"d-flex align-center py-3\">\n      <div>\n        <div class=\"display-1\">정적페이지 관리 {{ content.title && `- ${content.title}` }}</div>\n        <v-breadcrumbs :items=\"breadcrumbs\" class=\"pa-0 py-2\"></v-breadcrumbs>\n      </div>\n      <v-spacer></v-spacer>\n<!--      <v-btn @click=\"saveContent\">{{ this.content.contentId != null ? '수정' : '추가' }}</v-btn>-->\n      <v-btn color=\"red\" @click=\"deleteContent\" v-if=\"id\" style=\"margin-right:1rem\" dark><v-icon left>mdi mdi-delete</v-icon>삭제</v-btn>\n      <v-btn @click=\"resetContent\"><v-icon left>mdi-refresh</v-icon>리셋</v-btn>\n      <v-btn @click=\"saveContent\" color=\"indigo\" style=\"margin-left:1rem\" dark><v-icon left>mdi mdi-content-save</v-icon>저장</v-btn>\n      <v-btn @click=\"goToList\" style=\"margin-left:1rem\"><v-icon left>mdi mdi-format-list-bulleted</v-icon>목록</v-btn>\n\n<!--      <v-btn icon @click=\"resetContent\" style=\"margin-left:1rem\">-->\n\n    </div>\n\n    <v-card class=\"mb-4\">\n<!--      <v-card-title>기본 정보</v-card-title>-->\n\n      <v-card-text>\n\n        <v-form ref=\"contentForm\">\n          <v-col>\n<!--            <span class=\"font-weight-bold\">페이지 제목</span>-->\n            <span>\n                  <v-text-field\n                    v-model=\"content.title\"\n                    label=\"페이지 제목\"\n                    :rules=\"[rules.common.required]\"\n                    inverted\n                    clearable\n                    dense\n                  ></v-text-field>\n              </span>\n          </v-col>\n\n          <v-col>\n            <span class=\"font-weight-bold\">사용 여부</span>\n            <span>\n                <v-switch\n                  v-model=\"content.activated\"\n                  flat\n                  dense\n                  :label=\"content.activated ?'사용':'사용안함'\"\n                ></v-switch>\n            </span>\n          </v-col>\n\n          <v-col>\n            <span class=\"font-weight-bold\">페이지 내용</span>\n            <span>\n                <editor-component\n                  ref=\"contents\"\n                  :val=\"content.contents\"\n                  :uploaded=\"fileMeta\"\n                  @callback-upload=\"uploadImage\"\n                  label=\"페이지 내용\"/>\n            </span>\n          </v-col>\n\n        </v-form>\n      </v-card-text>\n    </v-card>\n\n    <div class=\"d-flex\" style=\"margin-top:1rem\">\n      <v-spacer></v-spacer>\n      <v-btn color=\"red\" @click=\"deleteContent\" v-if=\"id\" style=\"margin-right:1rem\" dark><v-icon left>mdi mdi-delete</v-icon>삭제</v-btn>\n      <v-btn @click=\"resetContent\"><v-icon left>mdi-refresh</v-icon>리셋</v-btn>\n      <v-btn color=\"indigo\" @click=\"saveContent\" style=\"margin-left:1rem\" dark><v-icon left>mdi mdi-content-save</v-icon>저장</v-btn>\n      <v-btn @click=\"goToList\" style=\"margin-left:1rem\"><v-icon left>mdi mdi-format-list-bulleted</v-icon>목록</v-btn>\n    </div>\n\n  </div>\n</template>\n\n<script>\n\nimport ContentApi from '../../api/ContentApi'\n\nimport rules from \"@/utils/rules\";\nimport _ from \"lodash\";\nimport EditorComponent from \"../../components/editor/EditorComponent\";\n\nexport default {\n  components: {\n    'editor-component': EditorComponent\n  },\n  props: ['id'],\n  data() {\n    return {\n      tab: null,\n      rules,\n      breadcrumbs: [{\n        text: '정적 페이지 관리',\n        disabled: false,\n        href: '#'\n      }, {\n        text: this.$props.id ? '페이지 수정' : '페이지 등록'\n      }],\n      content: {\n        title:''\n      },\n      copiedContent: {},\n      fileMeta: {},\n    }\n  },\n  methods: {\n    uploadImage(f) {\n      ContentApi.uploadImage(f).then(res => {\n        this.fileMeta = res;\n      });\n    },\n    async saveContent() {\n      if (confirm(\"저장하시겠습니까?\") && await this.$refs.contentForm.validate()) {\n\n        this.content.contents = this.$refs.contents.getValue();\n\n        ContentApi.save(this.content).then(result => {\n          this.content.id = result.id\n          alert(\"저장되었습니다.\")\n          // this.$router.push({path: '/contents'})\n        })\n      }\n    },\n    goToList() {\n      this.$router.push({path: '/contents'})\n    },\n    resetContent() {\n      this.content = _.cloneDeep(this.copiedContent)\n    },\n    deleteContent(content) {\n      if (confirm('삭제하시겠습니까?'))\n        ContentApi.delete(content.id).then(() => {\n          this.content = this.content.filter(r => r !== content)\n          alert(\"삭제되었습니다.\")\n          this.$router.push({path: '/contents'})\n        })\n    }\n\n  },\n  created() {\n    if (this.id) {\n      ContentApi.findContentById(this.id).then(result => {\n        // console.log(result)\n        this.content = result;\n        // console.log(this.content)\n        this.copiedContent = _.cloneDeep(this.content)\n\n      })\n    }\n  }\n\n\n};\n</script>\n"]}]}