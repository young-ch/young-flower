{"remainingRequest":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/apps/policy/PolicyForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/apps/policy/PolicyForm.vue","mtime":1665531625451},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/babel-loader/lib/index.js","mtime":1665531751248},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js","mtime":1665531752006}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgppbXBvcnQgUG9saWN5QXBpIGZyb20gJy4uLy4uL2FwaS9Qb2xpY3lBcGknCgppbXBvcnQgcnVsZXMgZnJvbSAiQC91dGlscy9ydWxlcyI7CmltcG9ydCBfIGZyb20gImxvZGFzaCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogIH0sCiAgcHJvcHM6IFsnaWQnXSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGFiOiBudWxsLAogICAgICBydWxlcywKICAgICAgYnJlYWRjcnVtYnM6IFt7CiAgICAgICAgdGV4dDogJ+ygleyxhSDsoJXsnZgg6rSA66asJywKICAgICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgICAgaHJlZjogJyMnCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiB0aGlzLiRwcm9wcy5pZCA/ICfsoJXssYUg7KCV7J2YIOyImOyglScgOiAn7KCV7LGFIOygleydmCDrk7HroZ0nCiAgICAgIH1dLAogICAgICBwb2xpY3k6IHsKICAgICAgICBwb2xpY3lOYW1lOicnCiAgICAgIH0sCiAgICAgIGNvcGllZFBvbGljeToge30sCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBhc3luYyBzYXZlUG9saWN5KCkgewogICAgICBpZiAoIWF3YWl0IHRoaXMuJHJlZnMucG9saWN5Rm9ybS52YWxpZGF0ZSgpKQogICAgICAgIHJldHVybjsKCiAgICAgIGlmIChjb25maXJtKCLsoIDsnqXtlZjsi5zqsqDsirXri4jquYw/IikpIHsKCiAgICAgICAgUG9saWN5QXBpLnNhdmUodGhpcy5wb2xpY3kpLnRoZW4ocmVzdWx0ID0+IHsKICAgICAgICAgIHRoaXMucG9saWN5LmlkID0gcmVzdWx0LmlkCiAgICAgICAgICBhbGVydCgi7KCA7J6l65CY7JeI7Iq164uI64ukLiIpCiAgICAgICAgICAvLyB0aGlzLiRyb3V0ZXIucHVzaCh7cGF0aDogJy9wb2xpY2llcyd9KQogICAgICAgIH0pCiAgICAgIH0KICAgIH0sCiAgICBnb1RvTGlzdCgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goe3BhdGg6ICcvcG9saWNpZXMnfSkKICAgIH0sCiAgICByZXNldFBvbGljeSgpIHsKICAgICAgdGhpcy5wb2xpY3kgPSBfLmNsb25lRGVlcCh0aGlzLmNvcGllZFBvbGljeSkKICAgIH0sCiAgICBkZWxldGVQb2xpY3kocG9saWN5KSB7CiAgICAgIGlmIChjb25maXJtKCfsgq3soJztlZjsi5zqsqDsirXri4jquYw/JykpCiAgICAgICAgUG9saWN5QXBpLmRlbGV0ZShwb2xpY3kuaWQpLnRoZW4oKCkgPT4gewogICAgICAgICAgdGhpcy5wb2xpY3kgPSB0aGlzLnBvbGljeS5maWx0ZXIociA9PiByICE9PSBwb2xpY3kpCiAgICAgICAgICBhbGVydCgi7IKt7KCc65CY7JeI7Iq164uI64ukLiIpCiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7cGF0aDogJy9wb2xpY2llcyd9KQogICAgICAgIH0pCiAgICB9CgogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGlmICh0aGlzLmlkKSB7CiAgICAgIFBvbGljeUFwaS5maW5kUG9saWN5QnlJZCh0aGlzLmlkKS50aGVuKHJlc3VsdCA9PiB7CiAgICAgICAgLy8gY29uc29sZS5sb2cocmVzdWx0KQogICAgICAgIHRoaXMucG9saWN5ID0gcmVzdWx0OwogICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMucG9saWN5KQogICAgICAgIHRoaXMuY29waWVkUG9saWN5ID0gXy5jbG9uZURlZXAodGhpcy5wb2xpY3kpCgogICAgICB9KQogICAgfQogIH0KCgp9Owo="},{"version":3,"sources":["PolicyForm.vue"],"names":[],"mappings":";;AA+FA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;AAGA","file":"PolicyForm.vue","sourceRoot":"src/apps/policy","sourcesContent":["<template>\n  <div class=\"flex-grow-1\">\n    <div class=\"d-flex align-center py-3\">\n      <div>\n        <div class=\"display-1\">정책 정의 관리 {{ policy.policyName && `- ${policy.policyName}` }}</div>\n        <v-breadcrumbs :items=\"breadcrumbs\" class=\"pa-0 py-2\"></v-breadcrumbs>\n      </div>\n      <v-spacer></v-spacer>\n<!--      <v-btn @click=\"savePolicy\">{{ this.policy.policyId != null ? '수정' : '추가' }}</v-btn>-->\n      <v-btn color=\"red\" @click=\"deletePolicy\" v-if=\"id\" style=\"margin-right:1rem\" dark><v-icon left>mdi mdi-delete</v-icon>삭제</v-btn>\n      <v-btn @click=\"resetPolicy\"><v-icon left>mdi-refresh</v-icon>리셋</v-btn>\n      <v-btn @click=\"savePolicy\" color=\"indigo\" style=\"margin-left:1rem\" dark><v-icon left>mdi mdi-content-save</v-icon>저장</v-btn>\n      <v-btn @click=\"goToList\" style=\"margin-left:1rem\"><v-icon left>mdi mdi-format-list-bulleted</v-icon>목록</v-btn>\n\n<!--      <v-btn icon @click=\"resetPolicy\" style=\"margin-left:1rem\">-->\n\n    </div>\n\n    <v-card class=\"mb-4\">\n<!--      <v-card-policyName>기본 정보</v-card-policyName>-->\n\n      <v-card-text>\n\n        <v-form ref=\"policyForm\">\n          <v-col>\n            <span>\n                  <v-text-field\n                    v-model=\"policy.policyGroupCode\"\n                    label=\"정책 그룹 코드\"\n                    :rules=\"[rules.common.required, rules.common.digitCapAlphabet]\"\n                    inverted\n                    clearable\n                    dense\n                    maxlength=\"100\"\n                  ></v-text-field>\n              </span>\n          </v-col>\n\n          <v-col>\n            <span>\n                  <v-text-field\n                    v-model=\"policy.policyCode\"\n                    label=\"정책코드\"\n                    :rules=\"[rules.common.required, rules.common.digitCapAlphabet]\"\n                    inverted\n                    clearable\n                    dense\n                    maxlength=\"100\"\n                  ></v-text-field>\n              </span>\n          </v-col>\n\n          <v-col>\n            <span>\n                  <v-text-field\n                    v-model=\"policy.policyName\"\n                    label=\"정책명\"\n                    :rules=\"[rules.common.required]\"\n                    inverted\n                    clearable\n                    dense\n                    maxlength=\"100\"\n                  ></v-text-field>\n              </span>\n          </v-col>\n\n          <v-col>\n            <span class=\"font-weight-bold\">정책 설명</span>\n            <span>\n              <v-textarea\n                v-model=\"policy.policyDescription\"\n                flat\n                placeholder=\"정책 설명\"\n                hide-details\n              ></v-textarea>\n            </span>\n          </v-col>\n\n        </v-form>\n      </v-card-text>\n    </v-card>\n\n    <div class=\"d-flex\" style=\"margin-top:1rem\">\n      <v-spacer></v-spacer>\n      <v-btn color=\"red\" @click=\"deletePolicy\" v-if=\"id\" style=\"margin-right:1rem\" dark><v-icon left>mdi mdi-delete</v-icon>삭제</v-btn>\n      <v-btn @click=\"resetPolicy\"><v-icon left>mdi-refresh</v-icon>리셋</v-btn>\n      <v-btn color=\"indigo\" @click=\"savePolicy\" style=\"margin-left:1rem\" dark><v-icon left>mdi mdi-content-save</v-icon>저장</v-btn>\n      <v-btn @click=\"goToList\" style=\"margin-left:1rem\"><v-icon left>mdi mdi-format-list-bulleted</v-icon>목록</v-btn>\n    </div>\n\n  </div>\n</template>\n\n<script>\n\nimport PolicyApi from '../../api/PolicyApi'\n\nimport rules from \"@/utils/rules\";\nimport _ from \"lodash\";\n\nexport default {\n  components: {\n  },\n  props: ['id'],\n  data() {\n    return {\n      tab: null,\n      rules,\n      breadcrumbs: [{\n        text: '정책 정의 관리',\n        disabled: false,\n        href: '#'\n      }, {\n        text: this.$props.id ? '정책 정의 수정' : '정책 정의 등록'\n      }],\n      policy: {\n        policyName:''\n      },\n      copiedPolicy: {},\n    }\n  },\n  methods: {\n    async savePolicy() {\n      if (!await this.$refs.policyForm.validate())\n        return;\n\n      if (confirm(\"저장하시겠습니까?\")) {\n\n        PolicyApi.save(this.policy).then(result => {\n          this.policy.id = result.id\n          alert(\"저장되었습니다.\")\n          // this.$router.push({path: '/policies'})\n        })\n      }\n    },\n    goToList() {\n      this.$router.push({path: '/policies'})\n    },\n    resetPolicy() {\n      this.policy = _.cloneDeep(this.copiedPolicy)\n    },\n    deletePolicy(policy) {\n      if (confirm('삭제하시겠습니까?'))\n        PolicyApi.delete(policy.id).then(() => {\n          this.policy = this.policy.filter(r => r !== policy)\n          alert(\"삭제되었습니다.\")\n          this.$router.push({path: '/policies'})\n        })\n    }\n\n  },\n  created() {\n    if (this.id) {\n      PolicyApi.findPolicyById(this.id).then(result => {\n        // console.log(result)\n        this.policy = result;\n        // console.log(this.policy)\n        this.copiedPolicy = _.cloneDeep(this.policy)\n\n      })\n    }\n  }\n\n\n};\n</script>\n"]}]}