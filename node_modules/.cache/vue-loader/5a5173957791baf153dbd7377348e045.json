{"remainingRequest":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/apps/popup/PopupForm.vue?vue&type=style&index=0&id=2caa5389&scoped=true&lang=css&","dependencies":[{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/apps/popup/PopupForm.vue","mtime":1665531625451},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/css-loader/dist/cjs.js","mtime":1665531751068},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1665531752098},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/postcss-loader/src/index.js","mtime":1665531751243},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js","mtime":1665531752006}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgouZXNzZW50aWFsIHsKICBjb2xvcjogcmVkOwogIGZvbnQtc2l6ZTogMzBweDsKfQoudnVlX190aW1lLXBpY2tlciB7CiAgYmFja2dyb3VuZC1jb2xvcjpnaG9zdHdoaXRlOwogIG1hcmdpbi1sZWZ0IDogLTFyZW07CiAgbWFyZ2luLXRvcCA6IC0wLjNyZW07Cn0K"},{"version":3,"sources":["PopupForm.vue"],"names":[],"mappings":";;AAwUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PopupForm.vue","sourceRoot":"src/apps/popup","sourcesContent":["<template>\n  <div class=\"d-flex flex-column flex-grow-1\">\n    <div class=\"d-flex align-center py-3\">\n      <div>\n        <div class=\"display-1\">팝업 관리</div>\n        <v-breadcrumbs :items=\"breadcrumbs\" class=\"pa-0 py-2\"></v-breadcrumbs>\n      </div>\n      <v-spacer></v-spacer>\n      <v-btn @click=\"savePopup\" color=\"indigo\" dark><v-icon left>mdi mdi-content-save</v-icon>{{ this.popup.id != null ? '수정' : '등록' }}</v-btn>\n      <v-btn @click=\"goList\" style=\"margin-left:1rem\"><v-icon left>mdi mdi-format-list-bulleted</v-icon>목록</v-btn>\n    </div>\n    <v-card>\n      <v-form ref=\"popupForm\">\n        <v-container fluid>\n          <v-row align=\"center\">\n            <v-col cols=\"2\">\n              <v-subheader><h3>팝업 카테고리</h3></v-subheader>\n            </v-col>\n            <v-col cols=\"4\">\n              <v-select\n                v-model=\"popup.categoryId\"\n                :items=\"popupCategories\"\n                label=\"카테고리 선택\"\n                item-text=\"categoryName\"\n                item-value=\"id\"\n                single-line\n              ></v-select>\n            </v-col>\n          </v-row>\n        </v-container>\n        <v-container fluid style=\"margin-top:-4rem\">\n          <v-row align=\"center\">\n            <v-col cols=\"2\">\n              <v-subheader><h3>제목</h3><b class=\"essential\"> &nbsp;&nbsp;*</b></v-subheader>\n            </v-col>\n            <v-col cols=\"4\">\n              <v-text-field\n                v-model=\"popup.title\"\n                label=\"제목을 입력해 주세요\"\n                :rules=\"[rules.common.required]\"\n                inverted\n                clearable\n              >\n              </v-text-field>\n            </v-col>\n          </v-row>\n\n          <v-row align=\"center\">\n            <v-col cols=\"2\">\n              <v-subheader><h3>노출 여부</h3><b class=\"essential\"> &nbsp;&nbsp;*</b></v-subheader>\n            </v-col>\n            <v-radio-group\n              v-model=\"popup.activated\"\n              row\n              style=\"padding-left: 20px;\"\n            >\n              <v-radio\n                label=\"노출\"\n                :value=\"true\"\n              ></v-radio>\n              <v-radio\n                label=\"미노출\"\n                :value=\"false\"\n              ></v-radio>\n            </v-radio-group>\n          </v-row>\n\n          <v-row align=\"center\">\n            <v-col cols=\"2\">\n              <v-subheader><h3>상시</h3></v-subheader>\n            </v-col>\n            <v-sheet\n              class=\"pa-5\"\n              style=\"margin-left:-1rem\"\n            >\n              <v-switch\n                v-model=\"popup.always\"\n                inset\n                :label=\"popup.always ? '상시 노출' : '기간 제한'\"\n              />\n            </v-sheet>\n          </v-row>\n\n          <v-row\n            v-if=\"!popup.always\"\n            align=\"center\"\n          >\n            <v-col cols=\"2\">\n              <v-subheader><h3>노출기간</h3><b class=\"essential\"> &nbsp;&nbsp;*</b></v-subheader>\n            </v-col>\n            <v-col cols=\"2\">\n              <v-menu\n                v-model=\"startPicker\"\n                :close-on-content-click=\"false\"\n                :nudge-right=\"40\"\n                transition=\"scale-transition\"\n                offset-y\n                min-width=\"auto\"\n              >\n                <template v-slot:activator=\"{ on, attrs }\">\n                  <v-text-field\n                    v-model=\"popup.startDt\"\n                    label=\"노출 시작일\"\n                    prepend-icon=\"mdi-calendar\"\n                    readonly\n                    v-bind=\"attrs\"\n                    :rules=\"[rules.common.required]\"\n                    v-on=\"on\"\n                  />\n                </template>\n                <v-date-picker\n                  v-model=\"popup.startDt\"\n                  @input=\"startPicker = false\"\n                />\n              </v-menu>\n            </v-col>\n            <v-col cols=\"2\">\n              <vue-timepicker manual-input v-model=\"popup.startTm\" :input-class=\"errStartTm ? 'invalid' : ''\" style=\"margin-top: 25px\"></vue-timepicker>\n              <v-input hidden v-model=\"popup.startTm\"></v-input>\n            </v-col>\n\n            <v-col cols=\"2\">\n              <v-menu\n                v-model=\"endPicker\"\n                :close-on-content-click=\"false\"\n                :nudge-right=\"40\"\n                transition=\"scale-transition\"\n                offset-y\n                min-width=\"auto\"\n              >\n                <template v-slot:activator=\"{ on, attrs }\">\n                  <v-text-field\n                    v-model=\"popup.endDt\"\n                    label=\"노출 종료일\"\n                    prepend-icon=\"mdi-calendar\"\n                    readonly\n                    v-bind=\"attrs\"\n                    :rules=\"[rules.common.required]\"\n                    v-on=\"on\"\n                  />\n                </template>\n                <v-date-picker\n                  v-model=\"popup.endDt\"\n                  @input=\"endPicker = false\"\n                />\n              </v-menu>\n            </v-col>\n            <v-col cols=\"2\">\n              <vue-timepicker manual-input v-model=\"popup.endTm\" :input-class=\"errEndTm ? 'invalid' : ''\"  style=\"margin-top: 25px\"></vue-timepicker>\n              <v-input hidden v-model=\"popup.endTm\"></v-input>\n            </v-col>\n            <v-spacer />\n          </v-row>\n          <v-row\n            align=\"center\"\n          >\n            <v-col cols=\"2\">\n              <v-subheader><h3>내용</h3></v-subheader>\n            </v-col>\n            <v-col>\n              <editor-component\n                ref=\"popupContents\"\n                :val=\"popup.contents\"\n                :uploaded=\"fileMeta\"\n                @callback-upload=\"uploadImage\"\n                label=\"팝업 내용\"/>\n            </v-col>\n          </v-row>\n\n          <v-row align=\"center\">\n            <v-col cols=\"2\" sm=\"2\">\n              <v-subheader><h3>링크 연결</h3></v-subheader>\n            </v-col>\n            <v-col\n              cols=\"12\"\n              sm=\"6\"\n              class=\"d-flex\"\n            >\n              <v-switch\n                v-model=\"popup.urlTarget\"\n                flat\n                color=\"primary\"\n                class=\"custom-switch-color\"\n                true-value=\"_blank\"\n                false-value=\"_self\"\n                :label=\"popup.urlTarget === '_blank' ? '새창' : '현재창'\"\n                style=\"margin-right: 1rem\"\n              ></v-switch>\n\n              <v-text-field\n                v-model=\"popup.url\"\n                :label=\"!this.popup.url?'링크 주소 입력':this.popup.url\"\n                prepend-icon=\"mdi-link-variant-plus\"\n                style=\"width:500px\"\n              ></v-text-field>\n\n            </v-col>\n          </v-row>\n<!--          <v-row align=\"center\">-->\n<!--            <v-col cols=\"2\" sm=\"2\">-->\n<!--              <v-subheader></v-subheader>-->\n<!--            </v-col>-->\n<!--            <v-col style=\"margin-left:10rem\">-->\n<!--              <v-btn @click=\"savePopup\">{{ this.popup.id != null ? '수정' : '등록' }}</v-btn>-->\n<!--              <v-btn @click=\"goList\" style=\"margin-left:1rem\">목록</v-btn>-->\n<!--            </v-col>-->\n<!--          </v-row>-->\n        </v-container>\n      </v-form>\n    </v-card>\n    <div class=\"d-flex align-center py-3\">\n      <v-spacer></v-spacer>\n      <v-btn @click=\"savePopup\" color=\"indigo\" dark><v-icon left>mdi mdi-content-save</v-icon>{{ this.popup.id != null ? '수정' : '등록' }}</v-btn>\n      <v-btn @click=\"goList\" style=\"margin-left:1rem\"><v-icon left>mdi mdi-format-list-bulleted</v-icon>목록</v-btn>\n    </div>\n  </div>\n</template>\n\n<script>\nimport VueTimepicker from 'vue2-timepicker'\nimport 'vue2-timepicker/dist/VueTimepicker.css'\n\nimport EditorComponent from \"../../components/editor/EditorComponent\";\n\nimport PopupApi from '../../api/PopupApi'\nimport rules from \"@/utils/rules\";\nimport PopupCategoryApi from \"@/api/PopupCategoryApi\";\n\nexport default {\n  props: ['id'],\n  components: {\n    'editor-component': EditorComponent,\n    VueTimepicker\n  },\n  data() {\n    return {\n      rules,\n      serviceType: 'POPUP',\n      breadcrumbs: [{\n        text: '팝업 관리',\n        disabled: false,\n        href: '#'\n      }, {\n        text: this.$props.id ? '팝업 수정' : '팝업 등록'\n      }],\n      popup: {\n        title: null,\n        activated: true,\n        url: null,\n        id: null,\n        popupImage: null\n      },\n      popupFile: null,\n      popupCategories: [],\n      imagePreview: null,\n      imagePreviewName: null,\n      startPicker: false,\n      endPicker: false,\n      errStartTm:false,\n      errEndTm:false,\n      fileMeta:{},\n    }\n  },\n  methods: {\n    onChangeImages(files) {\n      this.popupFile = files.target.files[0];\n      const file = files.target.files[0]\n      this.imagePreview = URL.createObjectURL(file);\n      this.imagePreviewName = files.target.value.split('\\\\')[2];\n\n    },\n    inputImage() {\n      this.$refs.imageInput.click();\n    },\n    uploadImage(f) {\n      PopupApi.uploadImage(f).then(res => {\n        this.fileMeta = res;\n      });\n    },\n    async savePopup() {\n      if (await this.$refs.popupForm.validate()) {\n\n        if(this.popup.startTm && typeof this.popup.startTm === \"object\") {\n          this.popup.startTm = this.popup.startTm.HH + \":\" + this.popup.startTm.mm + \":00\"\n        }\n        if(this.popup.endTm && typeof this.popup.endTm === \"object\") {\n          this.popup.endTm = this.popup.endTm.HH + \":\" + this.popup.endTm.mm + \":00\"\n        }\n        this.popup.contents = this.$refs.popupContents.getValue();\n\n        PopupApi.save(this.popup).then(result => {\n          if (this.popup.id == null) {\n            alert(this.popup.title + '의 내용이 정상적으로 등록되었습니다.')\n          } else {\n            alert(this.popup.title + '의 내용이 정상적으로 수정되었습니다.')\n          }\n          this.goList()\n        })\n      } else {\n        alert('필수 입력 사항을 확인해 주세요')\n      }\n    },\n    goList() {\n      this.$router.push({path: '/popups'})\n    },\n\n\n  },\n  created() {\n    if (this.$route.params.id) {\n      PopupApi.get(this.$route.params.id).then(result => {\n        // console.log(result)\n        this.popup = result;\n        this.imagePreviewName = result.popupImage;\n      })\n    }\n\n    PopupCategoryApi.findAll().then(result => {\n      this.popupCategories = result;\n    });\n  }\n\n\n};\n</script>\n\n<style scoped>\n\n.essential {\n  color: red;\n  font-size: 30px;\n}\n.vue__time-picker {\n  background-color:ghostwhite;\n  margin-left : -1rem;\n  margin-top : -0.3rem;\n}\n</style>\n"]}]}