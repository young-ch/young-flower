{"remainingRequest":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/apps/content/Contents.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/apps/content/Contents.vue","mtime":1665531625450},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/babel-loader/lib/index.js","mtime":1665531751248},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js","mtime":1665531752006}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBDb250ZW50QXBpIGZyb20gJy4uLy4uL2FwaS9Db250ZW50QXBpJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnY29udGVudHMnLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBicmVhZGNydW1iczogW3sKICAgICAgICB0ZXh0OiAn7KCV7KCBIO2OmOydtOyngCDqtIDrpqwnLAogICAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgICBocmVmOiAnIycKICAgICAgfSwgewogICAgICAgIHRleHQ6ICfsoJXsoIEg7Y6Y7J207KeAIOuqqeuhnScKICAgICAgfV0sCgogICAgICBzZWFyY2g6ICcnLAogICAgICBoZWFkZXJzOiBbCiAgICAgICAge3RleHQ6ICfsoJXsoIEg7Y6Y7J207KeAIOuqhScsIHZhbHVlOiAndGl0bGUnfSwKICAgICAgICB7dGV4dDogJ+yCrOyaqSDsl6zrtoAnLCB2YWx1ZTogJ2FjdGl2YXRlZCd9LAogICAgICAgIHt0ZXh0OiAn7IOd7ISx7J6QJywgdmFsdWU6ICdjcmVhdGVkQnknfSwKICAgICAgICB7dGV4dDogJ+yDneyEseydvCcsIHZhbHVlOiAnY3JlYXRlZEF0J30sCiAgICAgICAge3RleHQ6ICfsiJjsoJXsnpAnLCB2YWx1ZTogJ3VwZGF0ZWRCeSd9LAogICAgICAgIHt0ZXh0OiAn7IiY7KCV7J28JywgdmFsdWU6ICd1cGRhdGVkQXQnfSwKICAgICAgICB7dGV4dDogJ+q0gOumrCcsIHZhbHVlOiAnYWN0aW9uJywgc29ydGFibGU6IGZhbHNlIH0KICAgICAgXSwKICAgICAgc2VsZWN0ZWQ6IFtdLAogICAgICBjb250ZW50czogW10sCiAgICAgIG9wdGlvbnM6IHt9LAogICAgICB0b3RhbENvdW50OiBudWxsLAogICAgICBkaWFsb2c6IGZhbHNlLAogICAgICBydWxlczogewogICAgICB9CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgb3B0aW9uczogewogICAgICBoYW5kbGVyKCkgewogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0UGFyYW1zJywgdGhpcy5vcHRpb25zKTsKICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZSwKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldENvbnRlbnRzKHN0b3JlZFBhcmFtcykgewogICAgICBDb250ZW50QXBpLmZpbmRDb250ZW50cygpLnRoZW4ocmVzdWx0ID0+IHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXN1bHQpCiAgICAgICAgdGhpcy5jb250ZW50cyA9IHJlc3VsdC5jb250ZW50CgogICAgICAgIGlmKHN0b3JlZFBhcmFtcykKICAgICAgICAgIHRoaXMub3B0aW9ucyA9IHN0b3JlZFBhcmFtcwogICAgICB9KQogICAgfSwKICAgIHVwZGF0ZUNvbnRlbnQoY29udGVudCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7cGF0aCA6IGAvY29udGVudHMvJHtjb250ZW50LmlkfWB9KQogICAgfSwKICAgIGRlbGV0ZUNvbnRlbnQoY29udGVudCkgewogICAgICBpZiAoY29uZmlybSgn7IKt7KCc7ZWY7Iuc6rKg7Iq164uI6rmMPycpKQoKICAgICAgICBDb250ZW50QXBpLmRlbGV0ZShjb250ZW50LmlkKS50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMuY29udGVudHMgPSB0aGlzLmNvbnRlbnRzLmZpbHRlcihyID0+IHIgIT09IGNvbnRlbnQpCiAgICAgICAgICBhbGVydCgi7IKt7KCc65CY7JeI7Iq164uI64ukLiIpCiAgICAgICAgfSkKICAgIH0KCiAgfSwKICBjcmVhdGVkKCkgewogICAgbGV0IHN0b3JlZFBhcmFtcyA9IHRoaXMuJHN0b3JlLmdldHRlcnM/LnBhcmFtcz8/e307CgogICAgLy8gZmlyc3QgbG9hZAogICAgaWYoIXN0b3JlZFBhcmFtcy5uYW1lIHx8IHN0b3JlZFBhcmFtcy5uYW1lICE9PSB0aGlzLiRvcHRpb25zLm5hbWUpIHsKICAgICAgdGhpcy5vcHRpb25zID0gewogICAgICAgIHBhZ2U6MSwKICAgICAgICBpdGVtc1BlclBhZ2U6MTAsCiAgICAgICAgbmFtZTp0aGlzLiRvcHRpb25zLm5hbWUKICAgICAgfQoKICAgICAgc3RvcmVkUGFyYW1zID0gdGhpcy5vcHRpb25zCiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0UGFyYW1zJywgc3RvcmVkUGFyYW1zKQoKICAgIH0gZWxzZSB7CiAgICAgIHN0b3JlZFBhcmFtcy5uYW1lID0gdGhpcy4kb3B0aW9ucy5uYW1lCiAgICAgIHRoaXMub3B0aW9ucyA9IHN0b3JlZFBhcmFtcwogICAgfQoKICAgIHRoaXMuZ2V0Q29udGVudHMoc3RvcmVkUGFyYW1zKTsKICB9Cgp9Owo="},{"version":3,"sources":["Contents.vue"],"names":[],"mappings":";AAqGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA","file":"Contents.vue","sourceRoot":"src/apps/content","sourcesContent":["<template>\n  <div class=\"d-flex flex-column flex-grow-1\">\n\n    <div class=\"d-flex align-center py-3\">\n      <div>\n        <div class=\"display-1\">정적 페이지 관리</div>\n        <v-breadcrumbs :items=\"breadcrumbs\" class=\"pa-0 py-2\"></v-breadcrumbs>\n      </div>\n      <v-spacer></v-spacer>\n      <v-btn color=\"primary\" to=\"/content/form\" style=\"margin-right:1rem\">\n        <v-icon left>mdi mdi-playlist-plus</v-icon>\n        정적 페이지 추가\n      </v-btn>\n    </div>\n\n    <v-card>\n      <v-card-title>\n        <v-spacer></v-spacer>\n        <v-text-field\n          v-model=\"search\"\n          append-icon=\"mdi-magnify\"\n          class=\"flex-grow-1 mr-md-2\"\n          label=\"검색\"\n          dense\n          single-line\n          hide-details\n          clearable\n        ></v-text-field>\n      </v-card-title>\n\n      <v-data-table\n        :search=\"search\"\n        :headers=\"headers\"\n        :items=\"contents\"\n        item-key=\"id\"\n        class=\"elevation-1\"\n        :sortable=\"true\"\n        :footer-props=\"{showFirstLastPage: true, 'items-per-page-options' : [10,20,50,100,-1], showCurrentPage:true}\"\n        :options.sync=\"options\"\n      >\n        <template v-slot:item.title=\"{ item }\">\n          <router-link :to=\"{path:`/contents/${item.id}`}\">{{ item.title }}</router-link>\n        </template>\n\n        <template v-slot:item.activated=\"{ item }\">\n          {{ item.activated ?'사용':'사용안함' }}\n        </template>\n\n\n        <template v-slot:item.createdAt=\"{ value }\">\n          <div>{{ value | formatDate('YYYY-MM-DD HH:mm:ss') }}</div>\n        </template>\n\n        <template v-slot:item.updatedAt=\"{ value }\">\n          <div>{{ value | formatDate('YYYY-MM-DD HH:mm:ss') }}</div>\n        </template>\n\n        <template v-slot:item.action=\"{ item }\">\n<!--          <v-icon-->\n<!--            class=\"mr-2\"-->\n<!--            @click.stop=\"updateContent(item)\"-->\n<!--            small-->\n<!--          >-->\n<!--            mdi-pencil-->\n<!--          </v-icon>-->\n          <v-icon\n            class=\"mr-2\"\n            @click.stop=\"deleteContent(item)\"\n            small\n          >\n            mdi-delete\n          </v-icon>\n        </template>\n        <template #footer.page-text=\"props\">\n\n          <v-combobox\n            v-model=\"options.page\"\n            :label=\"`${props.pageStart}-${props.pageStop} of ${props.itemsLength} rows / ${options.page} page / total ${Math.ceil(props.itemsLength / options.itemsPerPage)} pages`\"\n            :items=\"Array.from({length: Math.ceil(props.itemsLength / options.itemsPerPage)}, (v, k) => k+1 )\"\n            :return-object=\"false\"\n            hide-details dense\n            type=\"number\"\n            suffix=\"page\"\n          >\n          </v-combobox>\n        </template>\n      </v-data-table>\n    </v-card>\n\n\n    <div class=\"d-flex align-center py-3\">\n      <v-spacer></v-spacer>\n      <v-btn color=\"primary\" to=\"/content/form\" style=\"margin-right:1rem\">\n        <v-icon left>mdi mdi-playlist-plus</v-icon>\n        정적 페이지 추가\n      </v-btn>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ContentApi from '../../api/ContentApi';\n\nexport default {\n  name: 'contents',\n  data() {\n    return {\n      breadcrumbs: [{\n        text: '정적 페이지 관리',\n        disabled: false,\n        href: '#'\n      }, {\n        text: '정적 페이지 목록'\n      }],\n\n      search: '',\n      headers: [\n        {text: '정적 페이지 명', value: 'title'},\n        {text: '사용 여부', value: 'activated'},\n        {text: '생성자', value: 'createdBy'},\n        {text: '생성일', value: 'createdAt'},\n        {text: '수정자', value: 'updatedBy'},\n        {text: '수정일', value: 'updatedAt'},\n        {text: '관리', value: 'action', sortable: false }\n      ],\n      selected: [],\n      contents: [],\n      options: {},\n      totalCount: null,\n      dialog: false,\n      rules: {\n      }\n    }\n  },\n  watch: {\n    options: {\n      handler() {\n        this.$store.commit('setParams', this.options);\n      },\n      deep: true,\n    }\n  },\n  methods: {\n    getContents(storedParams) {\n      ContentApi.findContents().then(result => {\n        // console.log(result)\n        this.contents = result.content\n\n        if(storedParams)\n          this.options = storedParams\n      })\n    },\n    updateContent(content) {\n      this.$router.push({path : `/contents/${content.id}`})\n    },\n    deleteContent(content) {\n      if (confirm('삭제하시겠습니까?'))\n\n        ContentApi.delete(content.id).then(() => {\n          this.contents = this.contents.filter(r => r !== content)\n          alert(\"삭제되었습니다.\")\n        })\n    }\n\n  },\n  created() {\n    let storedParams = this.$store.getters?.params??{};\n\n    // first load\n    if(!storedParams.name || storedParams.name !== this.$options.name) {\n      this.options = {\n        page:1,\n        itemsPerPage:10,\n        name:this.$options.name\n      }\n\n      storedParams = this.options\n      this.$store.commit('setParams', storedParams)\n\n    } else {\n      storedParams.name = this.$options.name\n      this.options = storedParams\n    }\n\n    this.getContents(storedParams);\n  }\n\n};\n</script>\n"]}]}