{"remainingRequest":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/apps/board/Board.vue?vue&type=style&index=0&id=1f9b4219&lang=scss&scoped=true&","dependencies":[{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/apps/board/Board.vue","mtime":1665531625449},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/css-loader/dist/cjs.js","mtime":1665531751068},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1665531752098},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/postcss-loader/src/index.js","mtime":1665531751243},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/sass-loader/dist/cjs.js","mtime":1665531751056},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js","mtime":1665531752006}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5zbGlkZS1mYWRlLWVudGVyLWFjdGl2ZSB7CiAgdHJhbnNpdGlvbjogYWxsIDAuM3MgZWFzZTsKfQoKLnNsaWRlLWZhZGUtbGVhdmUtYWN0aXZlIHsKICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBjdWJpYy1iZXppZXIoMSwgMC41LCAwLjgsIDEpOwp9Cgouc2xpZGUtZmFkZS1lbnRlciwKLnNsaWRlLWZhZGUtbGVhdmUtdG8gewogIHRyYW5zZm9ybTogdHJhbnNsYXRlWCgxMHB4KTsKICBvcGFjaXR5OiAwOwp9Cg=="},{"version":3,"sources":["Board.vue"],"names":[],"mappings":";AA8SA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Board.vue","sourceRoot":"src/apps/board","sourcesContent":["<template>\n  <div class=\"d-flex flex-column flex-grow-1\">\n    <div class=\"d-flex align-center py-3\">\n      <div>\n        <div class=\"display-1\">{{ breadcrumbs[0].text }}</div>\n        <v-breadcrumbs :items=\"breadcrumbs\" class=\"pa-0 py-2\"></v-breadcrumbs>\n      </div>\n      <v-spacer></v-spacer>\n      <v-btn color=\"primary\" @click=\"$router.push({path:'/boards/detail'})\">\n        <v-icon left>mdi mdi-playlist-plus</v-icon>\n        게시판 추가\n      </v-btn>\n    </div>\n\n    <v-card>\n      <!-- users list -->\n      <v-row dense class=\"pa-2 align-center\">\n        <v-col cols=\"6\">\n          <!--          <v-menu offset-y left>-->\n          <!--            <template v-slot:activator=\"{ on }\">-->\n          <!--              <transition name=\"slide-fade\" mode=\"out-in\">-->\n          <!--                <v-btn v-show=\"selectedUsers.length > 0\" v-on=\"on\">-->\n          <!--                  Actions-->\n          <!--                  <v-icon right>mdi-menu-down</v-icon>-->\n          <!--                </v-btn>-->\n          <!--              </transition>-->\n          <!--            </template>-->\n          <!--            <v-list dense>-->\n          <!--              <v-list-item @click>-->\n          <!--                <v-list-item-title>Verify</v-list-item-title>-->\n          <!--              </v-list-item>-->\n          <!--              <v-list-item @click>-->\n          <!--                <v-list-item-title>Disable</v-list-item-title>-->\n          <!--              </v-list-item>-->\n          <!--              <v-divider></v-divider>-->\n          <!--              <v-list-item @click>-->\n          <!--                <v-list-item-title>Delete</v-list-item-title>-->\n          <!--              </v-list-item>-->\n          <!--            </v-list>-->\n          <!--          </v-menu>-->\n        </v-col>\n        <v-col cols=\"6\" class=\"d-flex text-right align-center\">\n          <v-text-field\n            v-model=\"searchKeyword\"\n            append-icon=\"mdi-magnify\"\n            class=\"flex-grow-1 mr-md-2\"\n            hide-details\n            dense\n            clearable\n            label=\"검색\"\n            @click:append=\"getBoards\"\n            @keyup.enter=\"getBoards\"\n          ></v-text-field>\n<!--          :label=\"$t('menu.boards.search')\"-->\n\n<!--          <v-btn-->\n<!--            :loading=\"isLoading\"-->\n<!--            icon-->\n<!--            small-->\n<!--            class=\"ml-2\"-->\n<!--            @click=\"reloadSearch\"-->\n<!--          >-->\n<!--            <v-icon>mdi-refresh</v-icon>-->\n<!--          </v-btn>-->\n        </v-col>\n      </v-row>\n\n      <v-data-table\n        :headers=\"headers\"\n        :items=\"boards\"\n        :search=\"searchKeyword\"\n        :options.sync=\"options\"\n        item-key=\"id\"\n        :footer-props=\"{showFirstLastPage: true, 'items-per-page-options' : [10,20,50,100,-1], showCurrentPage:true}\"\n        class=\"flex-grow-1\"\n      >\n\n        <template v-slot:item.boardType=\"{value}\">\n          <template v-for=\"(t, index) in boardTypeItems\">\n              <span v-if=\"t.value === value\" :key=\"index\">\n                <v-icon>{{ t.icon }}</v-icon>\n                {{ t.text }}\n              </span>\n          </template>\n        </template>\n        <template v-slot:item.boardName=\"{ value, item }\">\n<!--          <div><router-link :to=\"{path:`/boards/${item.id}/articles`}\">{{ value }}</router-link></div>-->\n          <div><router-link :to=\"{path:`/boards/detail/${item.id}`}\">{{ value }}</router-link></div>\n        </template>\n        <template v-slot:item.createdAt=\"{ value }\">\n          <div>{{ value | formatDate('YYYY-MM-DD') }}</div>\n        </template>\n        <template v-slot:item.updatedAt=\"{ value }\">\n          <div>{{ value | formatDate('YYYY-MM-DD') }}</div>\n        </template>\n        <template v-slot:item.detail=\"{ item }\">\n          <div class=\"actions\">\n            <v-btn icon :to=\"{path:`/board/detail/${item.id}`}\">\n              <v-icon>search</v-icon>\n            </v-btn>\n          </div>\n        </template>\n        <template v-slot:item.actions=\"{ item }\">\n          <div class=\"actions\">\n            <v-icon\n              small\n              class=\"mr-2\"\n              @click.stop=\"updateBoard(item)\"\n            >\n              mdi-pencil\n            </v-icon>\n            <v-icon\n              small\n              class=\"mr-2\"\n              @click.stop=\"deleteBoard(item)\"\n            >\n              mdi-delete\n            </v-icon>\n            <v-icon\n              small\n              @click.stop=\"$router.push({path: `/boards/${item.id}/articles`})\"\n            >\n              mdi-menu\n            </v-icon>\n          </div>\n        </template>\n        <template #footer.page-text=\"props\">\n\n          <v-combobox\n            v-model=\"options.page\"\n            :label=\"`${props.pageStart}-${props.pageStop} of ${props.itemsLength} rows / ${options.page} page / total ${Math.ceil(props.itemsLength / options.itemsPerPage)} pages`\"\n            :items=\"Array.from({length: Math.ceil(props.itemsLength / options.itemsPerPage)}, (v, k) => k+1 )\"\n            :return-object=\"false\"\n            hide-details dense\n            type=\"number\"\n            suffix=\"page\"\n          >\n          </v-combobox>\n        </template>\n      </v-data-table>\n    </v-card>\n\n    <div class=\"d-flex align-center py-3\">\n      <v-spacer></v-spacer>\n      <v-btn color=\"primary\" @click=\"$router.push({path:'/boards/detail'})\">\n        <v-icon left>mdi mdi-playlist-plus</v-icon>\n        게시판 추가\n      </v-btn>\n    </div>\n  </div>\n</template>\n\n<script>\n// import users from './content/users'\n\nimport BoardApi from \"@/api/BoardApi\"\n// import CopyLabel from '../../components/common/CopyLabel'\n\nexport default {\n  name: 'board',\n  components: {\n    // CopyLabel\n  },\n  data() {\n    return {\n      isLoading: false,\n      breadcrumbs: [{\n        text: '게시판 관리',\n        disabled: false,\n        href: '#'\n      }, {\n        text: '게시판 목록'\n      }],\n      searchKeyword: '',\n      // searchQuery: '',\n      waitingSearch: false,\n      selectedUsers: [],\n      headers: [\n        {text: 'Id', align: 'left', value: 'id'},\n        {text: '게시판 명', align: 'left', value: 'boardName'},\n        {text: '게시판 유형', value: 'boardType'},\n        // {text: '생성자', value: 'createdBy'},\n        {text: '생성일', value: 'createdAt'},\n        // {text: '상세', sortable: false, value: 'detail'},\n        // {text: '게시물 목록', sortable: false, value: 'list'},\n        {text: '관리', sortable: false, value: 'actions'}\n      ],\n      boardTypeItems: [\n        {\n          'value': 'TYPE_GENERAL',\n          'text': '일반게시판',\n          'icon': 'mdi mdi-clipboard-text-outline'\n        },\n        {\n          'value': 'TYPE_PHOTO',\n          'text': '사진게시판',\n          'icon': 'mdi mdi-camera'\n        },\n        {\n          'value': 'TYPE_SCHEDULE',\n          'text': '일정게시판',\n          'icon': 'mdi mdi-calendar'\n        }\n      ],\n      options: {},\n      totalItems: 0,\n      boards: []\n    }\n  },\n  watch: {\n    options: {\n      handler() {\n        this.$store.commit('setParams', this.options);\n      },\n      deep: true,\n    },\n    searchKeyword: {\n      handler(nv) {\n        this.options.searchKeyword = nv;\n        this.$store.commit('setParams', this.options);\n      }\n    }\n  },\n  // watch: {\n  // options: {\n  //   handler() {\n  //     this.getBoards();\n  //   },\n  //   deep: true,\n  // },\n  // searchQuery: {\n  //   handler(nv) {\n  //     this.param.searchKeyword = nv;\n  //     if (!this.waitingSearch) {\n  //       setTimeout(() => {\n  //         this.getBoards();\n  //         this.waitingSearch = false;\n  //       }, 500); // 0.5 sec delay\n  //     }\n  //     this.waitingSearch = true;\n  //   }\n  // },\n  // },\n  methods: {\n    reloadSearch() {\n      this.param = {}\n      this.searchKeyword = ''\n      this.getBoards()\n    },\n    updateBoard(board) {\n      this.$router.push({path: `/boards/detail/${board.id}`})\n    },\n    deleteBoard(board) {\n      if (confirm(`${board.boardName} 게시판을 삭제하시겠습니까?`))\n        BoardApi.delete(board.id).then(() => {\n          alert('삭제되었습니다.')\n          this.getBoards()\n        })\n    },\n    getBoards(storedParams) {\n      // const {page, itemsPerPage, size} = this.options;\n      // let params = {\n      //   ...this.param, ...{\n      //     page: page,\n      //     size: size ? size : itemsPerPage\n      //   }\n      // };\n      BoardApi.findAll().then(data => {\n        // console.log(data)\n        // this.totalItems = data.totalElements;\n        this.boards = data\n        if(storedParams)\n          this.options = storedParams\n      })\n    }\n  },\n  async created() {\n    let storedParams = this.$store.getters?.params??{};\n\n    // first load\n    if(!storedParams.name || storedParams.name !== this.$options.name) {\n      this.options = {\n        page:1,\n        itemsPerPage:10,\n        searchKeyword:null,\n        name:this.$options.name\n      }\n\n      storedParams = this.options\n      this.$store.commit('setParams', storedParams)\n\n    } else {\n      storedParams.name = this.$options.name\n      this.options = storedParams\n    }\n    await this.getBoards(storedParams)\n    this.searchKeyword = this.options.searchKeyword ? this.options.searchKeyword : null\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.slide-fade-enter-active {\n  transition: all 0.3s ease;\n}\n\n.slide-fade-leave-active {\n  transition: all 0.3s cubic-bezier(1, 0.5, 0.8, 1);\n}\n\n.slide-fade-enter,\n.slide-fade-leave-to {\n  transform: translateX(10px);\n  opacity: 0;\n}\n</style>\n"]}]}