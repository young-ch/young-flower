{"remainingRequest":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/apps/user/UserForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/apps/user/UserForm.vue","mtime":1665531625452},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/babel-loader/lib/index.js","mtime":1665531751248},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js","mtime":1665531752006}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBVc2VyQXBpIGZyb20gIkAvYXBpL1VzZXJBcGkiOwppbXBvcnQgQ29weUxhYmVsIGZyb20gJ0AvY29tcG9uZW50cy9jb21tb24vQ29weUxhYmVsJwppbXBvcnQgVXNlckRldGFpbCBmcm9tICcuL1VzZXJEZXRhaWwnCmltcG9ydCBVc2VySGlzdG9yeSBmcm9tICcuL1VzZXJIaXN0b3J5JwppbXBvcnQgY29uZmlnIGZyb20gIkAvY29uZmlncyI7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQ29weUxhYmVsLAogICAgVXNlckRldGFpbCwKICAgIFVzZXJIaXN0b3J5CiAgfSwKICBwcm9wczogWydpZCddLAogIGNvbXB1dGVkOiB7CiAgICBicmVhZGNydW1icygpIHsKICAgICAgcmV0dXJuIFsKICAgICAgICB7CiAgICAgICAgICB0ZXh0OiB0aGlzLnBhZ2VOYW1lICsgJyDqtIDrpqwnLAogICAgICAgICAgdG86ICcvdXNlcnMvbGlzdCcsCiAgICAgICAgICBleGFjdDogdHJ1ZQogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgdGV4dDogdGhpcy5wYWdlTmFtZSArICh0aGlzLnVzZXIuaWQgPyAnIOyImOyglScgOiAnIOyDneyEsScpCiAgICAgICAgfQogICAgICBdCiAgICB9LAogICAgc3RhdGUoKSB7CiAgICAgIGlmKHRoaXMudXNlciAmJiB0aGlzLnVzZXIuc3RhdGUpCiAgICAgICAgcmV0dXJuIGNvbmZpZy5tZXRhLnVzZXIuc3RhdGUuZmlsdGVyKHMgPT4gcy52YWx1ZSA9PT0gdGhpcy51c2VyLnN0YXRlKS5tYXAocyA9PiBzLnRleHQpWzBdOwogICAgICBlbHNlCiAgICAgICAgcmV0dXJuICIiOwogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHVzZXI6IHsKICAgICAgfSwKICAgICAgdGFiOiBudWxsLAogICAgICBwYWdlTmFtZTogJ+2ajOybkCcKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldCgpIHsKICAgICAgaWYodGhpcy5pZCkKICAgICAgICBVc2VyQXBpLmdldCh0aGlzLmlkKS50aGVuKGRhdGEgPT4gewogICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7CiAgICAgICAgICBkYXRhLmxvZ2luQ291bnQgPSBkYXRhLmxvZ2luQ291bnQ/PzAKICAgICAgICAgIHRoaXMudXNlciA9IGRhdGE7CiAgICAgICAgfSkKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldCgpOwogICAgLy8gY29uc29sZS5sb2cocHJvY2Vzcy5lbnYpCgogICAgbGV0IHN0b3JlZFBhcmFtcyA9IHRoaXMuJHN0b3JlLmdldHRlcnM/LnBhcmFtcz8/e307CiAgICBpZihzdG9yZWRQYXJhbXMgJiYgc3RvcmVkUGFyYW1zLnBhZ2VOYW1lKSB7CiAgICAgIHRoaXMucGFnZU5hbWUgPSBzdG9yZWRQYXJhbXMucGFnZU5hbWUKCiAgICAgIGlmKHN0b3JlZFBhcmFtcy5wYWdlTmFtZSA9PT0gJ+q0gOumrOyekCcpIHsKICAgICAgICB0aGlzLnVzZXIudXNlckhhc1JvbGVzID0gW3sncm9sZU5hbWUnIDogc3RvcmVkUGFyYW1zLnBhZ2VOYW1lLCAnaWQnOiAyfV0KICAgICAgfQogICAgfQogIH0KfQo="},{"version":3,"sources":["UserForm.vue"],"names":[],"mappings":";AAoHA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"UserForm.vue","sourceRoot":"src/apps/user","sourcesContent":["<template>\n  <div class=\"flex-grow-1\">\n    <div class=\"d-flex align-center py-3\">\n      <div>\n        <div class=\"display-1\" v-if=\"id\">{{ pageName }} 정보 상세 {{ user.name && `- ${user.name}` }}</div>\n        <div class=\"display-1\" v-else>{{ pageName }} 생성</div>\n        <v-breadcrumbs :items=\"breadcrumbs\" class=\"pa-0 py-2\"></v-breadcrumbs>\n      </div>\n    </div>\n\n    <v-card class=\"mb-4\" v-if=\"id\">\n      <v-card-title>기본 정보\n        <v-icon small color=\"primary\" v-if=\"user.role === 'admin'\">mdi-security</v-icon>\n        <span class=\"ma-1\" v-if=\"user.role === 'admin'\">관리자 계정</span>\n      </v-card-title>\n      <v-card-text>\n        <div class=\"d-flex flex-column flex-sm-row\">\n          <div class=\"flex-grow-1 pt-2 pa-sm-2\">\n            <div class=\"d-flex\">\n              <span class=\"font-weight-bold\">회원번호</span>\n              <span class=\"mx-1\">\n                {{ user.id }}\n              </span>\n            </div>\n            <div class=\"d-flex\">\n              <span class=\"font-weight-bold\">이메일</span>\n              <span class=\"mx-1\">\n                <copy-label :text=\"user.email + ''\"/>\n              </span>\n            </div>\n          </div>\n          <div class=\"flex-grow-1 pt-2 pa-sm-2\">\n\n            <div class=\"d-flex\">\n              <span class=\"font-weight-bold\">이름</span>\n              <span class=\"mx-1\">\n                <copy-label :text=\"user.name + ''\"/>\n              </span>\n            </div>\n            <div class=\"d-flex\">\n              <span class=\"font-weight-bold\">연락처</span>\n              <span class=\"mx-1\">\n                <copy-label :text=\"user.mobileNo\"/>\n              </span>\n            </div>\n\n          </div>\n          <div class=\"flex-grow-1 pt-2 pa-sm-2\">\n\n            <div class=\"d-flex\">\n              <span class=\"font-weight-bold\">최종 접속 일시</span>\n              <span class=\"mx-1\">\n                {{ user.loginAt | formatDate() }}\n              </span>\n            </div>\n            <div class=\"d-flex\">\n              <span class=\"font-weight-bold\">접속 횟수</span>\n              <span class=\"mx-1\">\n                {{ user.loginCount }} 회\n              </span>\n            </div>\n\n          </div>\n          <div class=\"flex-grow-1 pt-2 pa-sm-2\">\n\n            <div class=\"d-flex\">\n              <span class=\"font-weight-bold\">가입 일시</span>\n              <span class=\"mx-1\">\n                {{ user.createdAt | formatDate() }}\n              </span>\n            </div>\n            <div class=\"d-flex\">\n              <span class=\"font-weight-bold\">승인 일시</span>\n              <span class=\"mx-1\">\n                {{ user.approvedAt | formatDate() }}\n              </span>\n            </div>\n\n          </div>\n          <div class=\"flex-grow-1 pt-2 pa-sm-2\">\n\n            <div class=\"d-flex\">\n              <span class=\"font-weight-bold\">비밀번호 변경일</span>\n              <span class=\"mx-1\">\n                {{ user.passwordChangedAt | formatDate() }}\n              </span>\n            </div>\n            <div class=\"d-flex\">\n              <span class=\"font-weight-bold\">상태 변경일</span>\n              <span class=\"mx-1\">\n                {{ user.stateChangedAt | formatDate() }}\n              </span>\n            </div>\n\n          </div>\n        </div>\n      </v-card-text>\n    </v-card>\n\n    <v-tabs v-model=\"tab\" :show-arrows=\"false\" background-color=\"transparent\">\n      <v-tab href=\"#tabs-information\" :key=\"1\">회원정보</v-tab>\n      <v-tab href=\"#tabs-history\" :key=\"2\">활동이력</v-tab>\n    </v-tabs>\n\n    <v-tabs-items v-model=\"tab\">\n      <v-tab-item value=\"tabs-information\">\n        <user-detail ref=\"tabs-information\" :id=\"id\"></user-detail>\n      </v-tab-item>\n      <v-tab-item value=\"tabs-history\">\n        <user-history ref=\"tabs-history\" :id=\"id\"></user-history>\n      </v-tab-item>\n    </v-tabs-items>\n  </div>\n</template>\n\n<script>\nimport UserApi from \"@/api/UserApi\";\nimport CopyLabel from '@/components/common/CopyLabel'\nimport UserDetail from './UserDetail'\nimport UserHistory from './UserHistory'\nimport config from \"@/configs\";\n\nexport default {\n  components: {\n    CopyLabel,\n    UserDetail,\n    UserHistory\n  },\n  props: ['id'],\n  computed: {\n    breadcrumbs() {\n      return [\n        {\n          text: this.pageName + ' 관리',\n          to: '/users/list',\n          exact: true\n        },\n        {\n          text: this.pageName + (this.user.id ? ' 수정' : ' 생성')\n        }\n      ]\n    },\n    state() {\n      if(this.user && this.user.state)\n        return config.meta.user.state.filter(s => s.value === this.user.state).map(s => s.text)[0];\n      else\n        return \"\";\n    }\n  },\n  data() {\n    return {\n      user: {\n      },\n      tab: null,\n      pageName: '회원'\n    }\n  },\n  methods: {\n    get() {\n      if(this.id)\n        UserApi.get(this.id).then(data => {\n          // console.log(data);\n          data.loginCount = data.loginCount??0\n          this.user = data;\n        })\n    }\n  },\n  created() {\n    this.get();\n    // console.log(process.env)\n\n    let storedParams = this.$store.getters?.params??{};\n    if(storedParams && storedParams.pageName) {\n      this.pageName = storedParams.pageName\n\n      if(storedParams.pageName === '관리자') {\n        this.user.userHasRoles = [{'roleName' : storedParams.pageName, 'id': 2}]\n      }\n    }\n  }\n}\n</script>\n"]}]}