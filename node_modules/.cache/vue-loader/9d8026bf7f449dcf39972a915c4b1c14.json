{"remainingRequest":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/components/app/Policies.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/components/app/Policies.vue","mtime":1665531625454},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/babel-loader/lib/index.js","mtime":1665531751248},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js","mtime":1665531752006}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBwb2xpY3lBcGkgZnJvbSAnQC9hcGkvUG9saWN5QXBpJzsKaW1wb3J0IF8gZnJvbSAibG9kYXNoIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgaGVhZGVyczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gKFsKICAgICAgICB7dGV4dDogJ+ygleyxhSDqt7jro7kg7L2U65OcJywgdmFsdWU6ICdwb2xpY3lHcm91cENvZGUnLCBhbGlnbjogJ2xlZnQnfSwKICAgICAgICB7dGV4dDogJ+ygleyxhSDsvZTrk5wnLCB2YWx1ZTogJ3BvbGljeUNvZGUnLCBhbGlnbjogJ2xlZnQnfSwKICAgICAgICB7dGV4dDogJ+ygleyxhSDrqoUnLCB2YWx1ZTogJ3BvbGljeU5hbWUnLCBhbGlnbjogJ2xlZnQnfQogICAgICBdKQogICAgfSwKICAgIHNlbGVjdGVkUG9saWN5OiB7CiAgICAgIHR5cGU6IEFycmF5CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgc2VhcmNoU2VsZWN0ZWQ6IHsKICAgICAgaGFuZGxlcihudikgewogICAgICAgIGNvbnNvbGUubG9nKG52KQogICAgICAgIGlmKG52KSB7CiAgICAgICAgICB0aGlzLmNvcGllZFBvbGljaWVzID0gXy5jbG9uZURlZXAodGhpcy5wb2xpY2llcykKICAgICAgICAgIHRoaXMucG9saWNpZXMgPSB0aGlzLnBvbGljaWVzLmZpbHRlcihlID0+IHRoaXMuc2VsZWN0ZWQubWFwKHMgPT4gcy5pZCkuaW5jbHVkZXMoZS5pZCkpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMucG9saWNpZXMgPSBfLmNsb25lRGVlcCh0aGlzLmNvcGllZFBvbGljaWVzKQogICAgICAgIH0KICAgICAgfQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlYXJjaFNlbGVjdGVkOiBmYWxzZSwKICAgICAgc2VhcmNoOiAnJywKICAgICAgLy8gaGVhZGVyczogLAogICAgICBvcHRpb25zOiB7CiAgICAgICAgcGFnZTogMSwKICAgICAgICBpdGVtc1BlclBhZ2U6IDUKICAgICAgfSwKICAgICAgc2VsZWN0ZWQ6IFtdLAogICAgICBwb2xpY2llczogW10sCiAgICAgIGNvcGllZFBvbGljaWVzOiBbXSwKICAgICAgdG90YWxDb3VudDogbnVsbCwKICAgICAgcnVsZXM6IHsKICAgICAgfSwKICAgICAgaW5pdDogZmFsc2UKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHNhdmVFdmVudCgpIHsKICAgICAgdGhpcy4kZW1pdCgnY2FsbGJhY2stc2F2ZS1ldmVudCcsIHRoaXMuc2VsZWN0ZWQpOwogICAgfSwKICAgIGFzeW5jIGZpbmRQb2xpY2llcygpIHsKCiAgICAgIGlmKCF0aGlzLmluaXQpIHsKICAgICAgICB0aGlzLnNlbGVjdGVkID0gdGhpcy5zZWxlY3RlZFBvbGljeS5tYXAodiA9PiB7CiAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih2LCB7J2lkJzogdi5pZH0pCiAgICAgICAgfSkgPz8gW10KICAgICAgICB0aGlzLmluaXQgPSB0cnVlCiAgICAgIH0KCiAgICAgIHBvbGljeUFwaS5maW5kUG9saWNpZXMoKS50aGVuKHJlc3VsdCA9PiB7CgogICAgICAgIHRoaXMucG9saWNpZXMgPSByZXN1bHQuY29udGVudC5tYXAoZWxlID0+IHsKICAgICAgICAgIHJldHVybiBlbGU7CiAgICAgICAgfSk7CiAgICAgIH0pCgogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZmluZFBvbGljaWVzKCk7CiAgfQoKfTsK"},{"version":3,"sources":["Policies.vue"],"names":[],"mappings":";AAyCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA","file":"Policies.vue","sourceRoot":"src/components/app","sourcesContent":["<template>\n  <div class=\"d-flex flex-column flex-grow-1\">\n    <v-card>\n      <v-card-title>\n        <v-switch\n          v-model=\"searchSelected\"\n          :label=\"searchSelected ? '선택 정책' : '전체 정책'\"\n          flat\n        >\n        </v-switch>\n        <v-spacer></v-spacer>\n        <v-text-field\n          v-model=\"search\"\n          append-icon=\"mdi-magnify\"\n          label=\"전체 검색\"\n          single-line\n          hide-details\n          clearable\n        ></v-text-field>\n      </v-card-title>\n\n      <v-data-table\n        v-model=\"selected\"\n        :search=\"search\"\n        :headers=\"headers\"\n        :items=\"policies\"\n        show-select\n        item-key=\"id\"\n        class=\"elevation-1\"\n        sortable=\"false\"\n        :options.sync=\"options\"\n        :footer-props=\"{showFirstLastPage: true, 'items-per-page-options' : [5,10,20,50,100,-1]}\"\n        @click:row=\"(item, row) => row.select(!row.isSelected)\"\n      >\n      </v-data-table>\n\n    </v-card>\n  </div>\n</template>\n\n<script>\nimport policyApi from '@/api/PolicyApi';\nimport _ from \"lodash\";\n\nexport default {\n  props: {\n    headers: {\n      type: Array,\n      default: () => ([\n        {text: '정책 그룹 코드', value: 'policyGroupCode', align: 'left'},\n        {text: '정책 코드', value: 'policyCode', align: 'left'},\n        {text: '정책 명', value: 'policyName', align: 'left'}\n      ])\n    },\n    selectedPolicy: {\n      type: Array\n    }\n  },\n  watch: {\n    searchSelected: {\n      handler(nv) {\n        console.log(nv)\n        if(nv) {\n          this.copiedPolicies = _.cloneDeep(this.policies)\n          this.policies = this.policies.filter(e => this.selected.map(s => s.id).includes(e.id))\n        } else {\n          this.policies = _.cloneDeep(this.copiedPolicies)\n        }\n      }\n    }\n  },\n  data() {\n    return {\n      searchSelected: false,\n      search: '',\n      // headers: ,\n      options: {\n        page: 1,\n        itemsPerPage: 5\n      },\n      selected: [],\n      policies: [],\n      copiedPolicies: [],\n      totalCount: null,\n      rules: {\n      },\n      init: false\n    }\n  },\n  methods: {\n    saveEvent() {\n      this.$emit('callback-save-event', this.selected);\n    },\n    async findPolicies() {\n\n      if(!this.init) {\n        this.selected = this.selectedPolicy.map(v => {\n          return Object.assign(v, {'id': v.id})\n        }) ?? []\n        this.init = true\n      }\n\n      policyApi.findPolicies().then(result => {\n\n        this.policies = result.content.map(ele => {\n          return ele;\n        });\n      })\n\n    }\n  },\n  created() {\n    this.findPolicies();\n  }\n\n};\n</script>\n"]}]}