{"remainingRequest":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/apps/board/BoardForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/apps/board/BoardForm.vue","mtime":1665531625449},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/babel-loader/lib/index.js","mtime":1665531751248},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js","mtime":1665531752006}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgppbXBvcnQgcm9sZUFwaSBmcm9tICdAL2FwaS9Sb2xlQXBpJwppbXBvcnQgYm9hcmRBcGkgZnJvbSAiQC9hcGkvQm9hcmRBcGkiOwoKaW1wb3J0IHJ1bGVzIGZyb20gIkAvdXRpbHMvcnVsZXMiOwppbXBvcnQgY29uZmlnIGZyb20gIkAvY29uZmlncyI7CgppbXBvcnQgXyBmcm9tICJsb2Rhc2giOwppbXBvcnQgRWRpdG9yQ29tcG9uZW50IGZyb20gIi4uLy4uL2NvbXBvbmVudHMvZWRpdG9yL0VkaXRvckNvbXBvbmVudCI7CmltcG9ydCBkcmFnZ2FibGUgZnJvbSAidnVlZHJhZ2dhYmxlIjsKCmltcG9ydCBDYXRlZ29yeUZvcm0gZnJvbSAiLi9DYXRlZ29yeUZvcm0iOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6ewogICAgJ2VkaXRvci1jb21wb25lbnQnOiBFZGl0b3JDb21wb25lbnQsCiAgICBkcmFnZ2FibGUsCiAgICAnY2F0ZWdvcnktZm9ybSc6IENhdGVnb3J5Rm9ybQogIH0sCiAgcHJvcHM6IFsnaWQnXSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYnJlYWRjcnVtYnM6IFsKICAgICAgICB7CiAgICAgICAgICB0ZXh0OiAn6rKM7Iuc7YyQIOq0gOumrCcsCiAgICAgICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgICAgICBocmVmOiAnIycKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIHRleHQ6IHRoaXMuJHByb3BzLmlkID8gJ+qyjOyLnO2MkCDsiJjsoJUnIDogJ+qyjOyLnO2MkCDrk7HroZ0nCiAgICAgICAgfQogICAgICBdLAogICAgICBib2FyZFR5cGVJdGVtczogWwogICAgICAgIHsKICAgICAgICAgICd2YWx1ZSc6ICdUWVBFX0dFTkVSQUwnLAogICAgICAgICAgJ3RleHQnOiAn7J2867CY6rKM7Iuc7YyQJwogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgJ3ZhbHVlJzogJ1RZUEVfUEhPVE8nLAogICAgICAgICAgJ3RleHQnOiAn7IKs7KeE6rKM7Iuc7YyQJwogICAgICAgIH0KICAgICAgICAvLyAsCiAgICAgICAgLy8gewogICAgICAgIC8vICAgJ3ZhbHVlJzogJ1RZUEVfU0NIRURVTEUnLAogICAgICAgIC8vICAgJ3RleHQnOiAn7J287KCV6rKM7Iuc7YyQJwogICAgICAgIC8vIH0KICAgICAgXSwKICAgICAgYm9hcmQ6IHsKICAgICAgICBib2FyZFR5cGU6ICdUWVBFX0dFTkVSQUwnLAogICAgICAgIG1lZGlhTmFtZTogbnVsbCwKCiAgICAgICAgYm9hcmROYW1lOiBudWxsLAogICAgICAgIGNvbnRlbnQ6IG51bGwsCiAgICAgICAgYWN0aXZhdGVkOiB0cnVlLAogICAgICAgIGhhc0F0dGFjaG1lbnQ6IHRydWUsCiAgICAgICAgcGFnZVNpemU6IDEwLAogICAgICAgIG5ld1BlcmlvZDogMwogICAgICB9LAogICAgICBwZXJtaXNzaW9uczogewogICAgICAgIFJFQUQ6IFtdLAogICAgICAgIFdSSVRFOiBbXSwKICAgICAgICBDT01NRU5UOiBbXSwKICAgICAgICBOT1RJQ0U6IFtdLAogICAgICAgIEFETUlOOiBbXSwKICAgICAgfSwKICAgICAgcGVybWlzc2lvbjoge30sCiAgICAgIHJvbGVzOiBbXSwKICAgICAgYmlydGg6IGZhbHNlLAogICAgICBnZW5kZXI6ICdtYWxlJywKICAgICAgZGF1bURpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICBydWxlcywKICAgICAgY29uZmlybVBhc3N3b3JkOiBudWxsLAogICAgICBzdGF0ZXM6IGNvbmZpZy5tZXRhLnVzZXIuc3RhdGUsCiAgICAgIC8vIHJvbGVzOmNvbmZpZy5tZXRhLnVzZXIucm9sZSwKICAgICAgY2F0ZWdvcnlIZWFkZXI6IFsKICAgICAgICB7dGV4dDogJ+yInOyEnCcsIGFsaWduOiAnbGVmdCcsIHNvcnRhYmxlOiBmYWxzZX0sCiAgICAgICAge3RleHQ6ICfsubTthYzqs6Drpqwg66qFJywgdmFsdWU6ICdjYXRlZ29yeU5hbWUnLCBhbGlnbjogJ2xlZnQnLCBzb3J0YWJsZTogZmFsc2V9LAogICAgICAgIC8vIHt0ZXh0OiAn7IOd7ISx7J28JywgdmFsdWU6ICdjcmVhdGVkQXQnLCBzb3J0YWJsZTogZmFsc2V9LAogICAgICAgIHt0ZXh0OiAn7IKs7Jqp7Jes67aAJywgdmFsdWU6ICdhY3RpdmF0ZWQnLCBzb3J0YWJsZTogZmFsc2V9LAogICAgICAgIHt0ZXh0OiAn6rSA66asJywgdmFsdWU6ICdhY3Rpb25zJywgc29ydGFibGU6IGZhbHNlfQogICAgICBdLAogICAgICBjYXRlZ29yaWVzOiBbXSwKICAgICAgY2F0ZWdvcnk6IG51bGwsCiAgICAgIGZvcm1WaXNpYmxlOiBmYWxzZSwKICAgICAgZmlsZU1ldGE6IHt9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICB1cGxvYWRJbWFnZShmKSB7CiAgICAgIGJvYXJkQXBpLnVwbG9hZEltYWdlKGYpLnRoZW4ocmVzID0+IHsKICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXMpOwogICAgICAgIHRoaXMuZmlsZU1ldGEgPSByZXM7CiAgICAgIH0pOwogICAgfSwKICAgIGdvTGlzdCgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goe3BhdGg6ICcvYm9hcmRzJ30pCiAgICB9LAogICAgYXN5bmMgc2F2ZSgpIHsKCiAgICAgIGlmKCFhd2FpdCB0aGlzLiRyZWZzLmJvYXJkRm9ybS52YWxpZGF0ZSgpKQogICAgICAgIHJldHVybjsKCiAgICAgIC8vIHRoaXMuYm9hcmQuYm9hcmRQZXJtaXNzaW9ucy5wdXNoKHRoaXMucGVybWlzc2lvbl9yLm1hcChwID0+IHtyZXR1cm4ge2Z1bmN0aW9uVHlwZToncicsIHJvbGVJZDpwfX0pKQoKICAgICAgdGhpcy5ib2FyZC5ib2FyZFBlcm1pc3Npb25zID0gT2JqZWN0LmVudHJpZXModGhpcy5wZXJtaXNzaW9ucykuZmxhdE1hcCgoW2ssIHZdKSA9PiB7CiAgICAgICAgLy8gY29uc29sZS5sb2coaykKICAgICAgICAvLyBjb25zb2xlLmxvZyh2KQogICAgICAgIHJldHVybiB2Py5tYXAocCA9PiB7cmV0dXJuIHtmdW5jdGlvblR5cGU6aywgcm9sZUlkOnB9fSk/P1tdCiAgICAgIH0pOwoKICAgICAgdGhpcy5ib2FyZC5ib2FyZENvbnRlbnRzID0gdGhpcy4kcmVmcy5ib2FyZENvbnRlbnRzLmdldFZhbHVlKCk7CgogICAgICB0aGlzLmJvYXJkLmJvYXJkQ2F0ZWdvcmllcyA9IF8uY2xvbmVEZWVwKHRoaXMuY2F0ZWdvcmllcykucmV2ZXJzZSgpLm1hcCgoYywgaSkgPT4gewogICAgICAgIGMub3JkZXJObyA9IGk7CiAgICAgICAgcmV0dXJuIGM7CiAgICAgIH0pOwoKICAgICAgYm9hcmRBcGkuc2F2ZSh0aGlzLmJvYXJkKS50aGVuKGRhdGEgPT4gewogICAgICAgIGlmIChkYXRhKSB7CiAgICAgICAgICBpZih0aGlzLmJvYXJkLmlkKSB7CiAgICAgICAgICAgIGFsZXJ0KCLsiJjsoJXrkJjsl4jsirXri4jri6QuIik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBhbGVydCgi65Ox66Gd65CY7JeI7Iq164uI64ukLiIpOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5nb0xpc3QoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgYWxlcnQoIkVycm9yIik7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICBsb2c6IGZ1bmN0aW9uKGUpIHsKICAgICAgLy8gd2luZG93LmNvbnNvbGUubG9nKCJGdXR1cmUgaW5kZXg6ICIgKyBlLmRyYWdnZWRDb250ZXh0LmZ1dHVyZUluZGV4KTsKICAgICAgd2luZG93LmNvbnNvbGUubG9nKGUpOwogICAgfSwKICAgIGNyZWF0ZUNhdGVnb3J5Rm9ybSgpIHsKICAgICAgdGhpcy5mb3JtVmlzaWJsZSA9IHRydWU7CiAgICAgIHRoaXMuY2F0ZWdvcnkgPSB7fTsKICAgIH0sCiAgICByZXNldENhdGVnb3J5KCkgewogICAgICB0aGlzLmNhdGVnb3JpZXMgPSBfLmNsb25lRGVlcCh0aGlzLmJvYXJkPy5ib2FyZENhdGVnb3JpZXM/P1tdKTsKICAgICAgdGhpcy5jYXRlZ29yaWVzLnNvcnQoKGEsIGIpID0+IHsKICAgICAgICByZXR1cm4gYS5vcmRlck5vID4gYi5vcmRlck5vID8gLTEgOiBhLm9yZGVyTm8gPCBiLm9yZGVyTm8gPyAxIDogMDsKICAgICAgfSkKICAgIH0sCiAgICB1cGRhdGVDYXRlZ29yeUZvcm0oaXRlbSkgewogICAgICB0aGlzLmZvcm1WaXNpYmxlID0gdHJ1ZTsKICAgICAgdGhpcy5jYXRlZ29yeSA9IGl0ZW07CiAgICB9LAogICAgc2F2ZWRDYXRlZ29yeShpdGVtKSB7CiAgICAgIHRoaXMuZm9ybVZpc2libGUgPSBmYWxzZTsKICAgICAgaWYoaXRlbS5jYXRlZ29yeUlkKSB7CgogICAgICAgIHRoaXMuY2F0ZWdvcmllcyA9IHRoaXMuY2F0ZWdvcmllcy5tYXAoYyA9PiB7CiAgICAgICAgICBpZihjLmNhdGVnb3J5SWQgPT09IGl0ZW0uY2F0ZWdvcnlJZCkgewogICAgICAgICAgICAvLyBpdGVtLm9yZGVyTm8gPSBpOwogICAgICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIGMub3JkZXJObyA9IGk7CiAgICAgICAgICAgIHJldHVybiBjOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewoKICAgICAgICBpZighdGhpcy5jYXRlZ29yaWVzLmZpbmQoYyA9PiBjLmNhdGVnb3J5TmFtZSA9PT0gaXRlbS5vcmlnaW5OYW1lKSkKICAgICAgICAgIHRoaXMuY2F0ZWdvcmllcy5wdXNoKGl0ZW0pOwogICAgICAgIGVsc2UKICAgICAgICAgIHRoaXMuY2F0ZWdvcmllcyA9IHRoaXMuY2F0ZWdvcmllcy5tYXAoYyA9PiB7CiAgICAgICAgICAgIGlmKGMuY2F0ZWdvcnlOYW1lID09PSBpdGVtLm9yaWdpbk5hbWUpIHsKICAgICAgICAgICAgICAvLyBpdGVtLm9yZGVyTm8gPSBpOwogICAgICAgICAgICAgIHJldHVybiBpdGVtOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIC8vIGMub3JkZXJObyA9IGk7CiAgICAgICAgICAgICAgcmV0dXJuIGM7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwoKICAgICAgfQoKICAgIH0sCiAgICBkZWxldGVDYXRlZ29yeShpbmRleCkgewogICAgICB0aGlzLmNhdGVnb3JpZXMgPSB0aGlzLmNhdGVnb3JpZXMuZmlsdGVyKChjLGkpID0+IGkgIT09IGluZGV4KTsKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICByb2xlQXBpLmdldFJvbGVzKHRydWUpLnRoZW4oZGF0YSA9PiB7CiAgICAgIHRoaXMucm9sZXMgPSBkYXRhOwogICAgfSk7CiAgICBpZih0aGlzLmlkKSB7CiAgICAgIGJvYXJkQXBpLmZpbmRCeUlkKHRoaXMuaWQpLnRoZW4oZGF0YSA9PiB7CiAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7CiAgICAgICAgdGhpcy5ib2FyZCA9IGRhdGE7CiAgICAgICAgdGhpcy5ib2FyZC5ib2FyZFBlcm1pc3Npb25zLmZvckVhY2gocCA9PiB7CiAgICAgICAgICB0aGlzLnBlcm1pc3Npb25zW3AuaWQuZnVuY3Rpb25UeXBlXS5wdXNoKHAuaWQucm9sZUlkKTsKICAgICAgICB9KTsKCiAgICAgICAgdGhpcy5jYXRlZ29yaWVzID0gXy5jbG9uZURlZXAodGhpcy5ib2FyZC5ib2FyZENhdGVnb3JpZXMpOwogICAgICAgIHRoaXMuY2F0ZWdvcmllcy5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgICByZXR1cm4gYS5vcmRlck5vID4gYi5vcmRlck5vID8gLTEgOiBhLm9yZGVyTm8gPCBiLm9yZGVyTm8gPyAxIDogMDsKICAgICAgICB9KQogICAgICB9KTsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["BoardForm.vue"],"names":[],"mappings":";;AAoOA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BoardForm.vue","sourceRoot":"src/apps/board","sourcesContent":["<template>\n  <div class=\"d-flex flex-column flex-grow-1\">\n    <div class=\"d-flex align-center py-3\">\n      <div>\n        <div class=\"display-1\">{{ breadcrumbs[0].text }}</div>\n        <v-breadcrumbs :items=\"breadcrumbs\" class=\"pa-0 py-2\"></v-breadcrumbs>\n      </div>\n      <v-spacer></v-spacer>\n      <v-btn dark color=\"indigo\" @click=\"save()\">\n        <v-icon left>mdi mdi-content-save</v-icon>\n        저장\n      </v-btn>\n      <v-btn @click=\"goList()\" style=\"margin-left:1rem\">\n        <v-icon left>mdi mdi-format-list-bulleted</v-icon>\n        목록\n      </v-btn>\n    </div>\n\n    <v-card>\n\n      <v-form ref=\"boardForm\">\n        <v-container fluid>\n          <v-row align=\"center\">\n            <v-col cols=\"2\">\n              <v-subheader><h3>게시판 형태</h3><b class=\"essential\"> &nbsp;&nbsp;*</b></v-subheader>\n            </v-col>\n            <v-col>\n              <v-radio-group\n                v-model=\"board.boardType\"\n                row\n                :rules=\"[rules.common.required]\"\n              >\n                <v-radio v-for=\"(t) in boardTypeItems\" :key=\"t.value\" :value=\"t.value\" :label=\"t.text\" hide-details></v-radio>\n              </v-radio-group>\n            </v-col>\n          </v-row>\n          <v-row align=\"center\">\n            <v-col cols=\"2\">\n              <v-subheader><h3>게시판 명</h3><b class=\"essential\"> &nbsp;&nbsp;*</b></v-subheader>\n            </v-col>\n            <v-col cols=\"10\">\n              <v-text-field label=\"게시판 이름을 입력해주세요.\" v-model=\"board.boardName\" :rules=\"[rules.common.required]\" maxlength=\"120\"/>\n            </v-col>\n          </v-row>\n        </v-container>\n        <v-container fluid style=\"margin-top:-8rem\">\n          <v-row align=\"center\">\n            <v-col cols=\"2\">\n              <v-subheader><h3>게시판 상세</h3></v-subheader>\n            </v-col>\n            <v-col cols=\"10\">\n              <editor-component\n                ref=\"boardContents\"\n                :val=\"board.boardContents\"\n                :uploaded=\"fileMeta\"\n                @callback-upload=\"uploadImage\"\n                label=\"게시판 내용\" />\n            </v-col>\n          </v-row>\n        </v-container>\n        <v-container fluid>\n          <v-row align=\"center\">\n            <v-col cols=\"2\">\n              <v-subheader><h3>공지 기능</h3></v-subheader>\n            </v-col>\n            <v-col cols=\"10\" class=\"d-flex\">\n              <v-switch\n                v-model=\"board.hasNotice\"\n                flat\n                color=\"primary\"\n                :label=\"board.hasNotice ? '공지 사용' : '공지 사용안함'\"\n              ></v-switch>\n              <v-switch\n                v-if=\"board.hasNotice\"\n                style=\"padding-left: 10px\"\n                v-model=\"board.hasPeriod\"\n                flat\n                color=\"primary\"\n                :label=\"board.hasPeriod ? '공지 게시기간 설정 사용' : '공지 게시기간 설정 사용안함'\"\n              ></v-switch>\n            </v-col>\n          </v-row>\n          <v-row align=\"center\">\n            <v-col cols=\"2\">\n              <v-subheader><h3>댓글 기능</h3></v-subheader>\n            </v-col>\n            <v-col cols=\"4\" class=\"d-flex\">\n              <v-switch\n                v-model=\"board.hasComment\"\n                flat\n                color=\"primary\"\n                :label=\"board.hasComment ? '댓글 사용' : '댓글 사용안함'\"\n              ></v-switch>\n            </v-col>\n            <v-col cols=\"2\">\n              <v-subheader><h3>첨부 파일 기능</h3></v-subheader>\n            </v-col>\n            <v-col cols=\"4\" class=\"d-flex\">\n              <v-switch\n                v-model=\"board.hasAttachment\"\n                flat\n                color=\"primary\"\n                :label=\"board.hasAttachment ? '파일 첨부 사용' : '파일 첨부 사용안함'\"\n              ></v-switch>\n            </v-col>\n          </v-row>\n          <v-row align=\"center\">\n            <v-col cols=\"6\">\n              <v-text-field v-model=\"board.pageSize\" label=\"페이지 게시물 수\" maxlength=\"2\" outlined color=\"white\" clearable type=\"number\"  style=\"margin-left: 1rem\"/>\n            </v-col>\n            <v-col cols=\"6\" class=\"d-flex\">\n              <v-text-field v-model=\"board.newPeriod\" label=\"새글 표시 기간\" maxlength=\"2\" outlined color=\"white\" clearable type=\"number\"  style=\"margin-left: 1rem\"/>\n\n            </v-col>\n          </v-row>\n          <v-row align=\"center\">\n            <v-col cols=\"6\" align-self=\"start\">\n              <v-subheader><h3>권한 설정</h3><b class=\"essential\"> &nbsp;&nbsp;*</b></v-subheader>\n\n              <v-select :items=\"roles\" item-value=\"id\" item-text=\"roleName\" v-model=\"permissions.READ\"\n                        dense clearable flat label=\"조회 권한\" multiple  style=\"margin-left: 1rem\"/>\n\n              <v-select :items=\"roles\" item-value=\"id\" item-text=\"roleName\" v-model=\"permissions.WRITE\"\n                        dense clearable flat label=\"작성 권한\" multiple  style=\"margin-left: 1rem\"/>\n\n              <v-select :items=\"roles\" item-value=\"id\" item-text=\"roleName\" v-model=\"permissions.COMMENT\"\n                        dense clearable flat label=\"댓글 권한\" multiple  style=\"margin-left: 1rem\"/>\n\n              <v-select :items=\"roles\" item-value=\"id\" item-text=\"roleName\" v-model=\"permissions.NOTICE\"\n                        dense clearable flat label=\"공지 권한 *\" :rules=\"[rules.common.required, rules.common.qtZero]\" multiple  style=\"margin-left: 1rem\"/>\n\n              <v-select :items=\"roles\" item-value=\"id\" item-text=\"roleName\" v-model=\"permissions.ADMIN\"\n                        dense clearable flat label=\"관리자 권한 *\" :rules=\"[rules.common.required, rules.common.qtZero]\" multiple  style=\"margin-left: 1rem\"/>\n\n            </v-col>\n            <v-col cols=\"6\" align-self=\"start\">\n              <v-subheader><h3>카테고리 설정</h3></v-subheader>\n              <v-row dense class=\"pa-2 align-center\" style=\"margin-left: 1rem\">\n                <v-col cols=\"6\">\n                </v-col>\n                <v-col cols=\"6\" class=\"text-right\">\n                  <v-btn color=\"primary\" @click=\"createCategoryForm\"><v-icon left>mdi mdi-playlist-plus</v-icon> 카테고리 추가</v-btn>\n                  <v-btn class=\"vBtn\" @click=\"resetCategory\" style=\"margin-left: 1rem\">\n                    <v-icon left>mdi mdi-reload</v-icon> 취소\n                  </v-btn>\n                </v-col>\n              </v-row>\n\n              <v-data-table\n                id=\"categoryTable\"\n                item-key=\"categoryId\"\n                :hide-default-footer=\"true\"\n                disable-pagination\n                :headers=\"categoryHeader\"\n                :items=\"categories\"\n                class=\"elevation-1\"\n                style=\"margin-left: 1rem\"\n              >\n                <template v-slot:body=\"props\">\n                  <draggable\n                    :list=\"categories\"\n                    @change=\"log\"\n                    tag=\"tbody\"\n                  >\n                    <tr\n                      v-for=\"(item, index) in props.items\"\n                      :key=\"index\"\n                    >\n                      <td>\n                        <v-icon\n                          small\n                          class=\"page__grab-icon\"\n                        >\n                          mdi-arrow-all\n                        </v-icon>\n                      </td>\n                      <!--                    <td> {{ index + 1 }} </td>-->\n                      <td> {{ item.categoryName }} </td>\n<!--                      <td> {{ item.createdAt ? $moment(item.createdAt).format('YYYY-MM-DD HH:mm:ss') : \"\" }} </td>-->\n                      <td> {{ item.activated ? '사용' : '사용안함' }} </td>\n                      <td>\n                        <v-icon\n                          small\n                          @click=\"updateCategoryForm(item)\"\n                        >\n                          mdi-pencil\n                        </v-icon>\n                        <v-icon\n                          small\n                          @click.stop=\"deleteCategory(index)\"\n                        >\n                          mdi-delete\n                        </v-icon>\n                      </td>\n                    </tr>\n\n                  </draggable>\n                </template>\n              </v-data-table>\n            </v-col>\n          </v-row>\n        </v-container>\n      </v-form>\n    </v-card>\n    <div class=\"d-flex flex-column flex-grow-1\">\n      <div class=\"d-flex align-center py-3\">\n        <v-spacer></v-spacer>\n        <v-btn dark color=\"indigo\" @click=\"save()\">\n          <v-icon left>mdi mdi-content-save</v-icon>\n          저장\n        </v-btn>\n        <v-btn @click=\"goList()\" style=\"margin-left:1rem\">\n          <v-icon left>mdi mdi-format-list-bulleted</v-icon>\n          목록\n        </v-btn>\n      </div>\n    </div>\n    <category-form\n      :visible=\"formVisible\"\n      :item=\"category\"\n      @callback-canceled=\"formVisible = false\"\n      @callback-saved=\"savedCategory\"\n    />\n  </div>\n</template>\n\n<script>\n\nimport roleApi from '@/api/RoleApi'\nimport boardApi from \"@/api/BoardApi\";\n\nimport rules from \"@/utils/rules\";\nimport config from \"@/configs\";\n\nimport _ from \"lodash\";\nimport EditorComponent from \"../../components/editor/EditorComponent\";\nimport draggable from \"vuedraggable\";\n\nimport CategoryForm from \"./CategoryForm\";\n\nexport default {\n  components:{\n    'editor-component': EditorComponent,\n    draggable,\n    'category-form': CategoryForm\n  },\n  props: ['id'],\n  data() {\n    return {\n      breadcrumbs: [\n        {\n          text: '게시판 관리',\n          disabled: false,\n          href: '#'\n        },\n        {\n          text: this.$props.id ? '게시판 수정' : '게시판 등록'\n        }\n      ],\n      boardTypeItems: [\n        {\n          'value': 'TYPE_GENERAL',\n          'text': '일반게시판'\n        },\n        {\n          'value': 'TYPE_PHOTO',\n          'text': '사진게시판'\n        }\n        // ,\n        // {\n        //   'value': 'TYPE_SCHEDULE',\n        //   'text': '일정게시판'\n        // }\n      ],\n      board: {\n        boardType: 'TYPE_GENERAL',\n        mediaName: null,\n\n        boardName: null,\n        content: null,\n        activated: true,\n        hasAttachment: true,\n        pageSize: 10,\n        newPeriod: 3\n      },\n      permissions: {\n        READ: [],\n        WRITE: [],\n        COMMENT: [],\n        NOTICE: [],\n        ADMIN: [],\n      },\n      permission: {},\n      roles: [],\n      birth: false,\n      gender: 'male',\n      daumDialogVisible: false,\n      rules,\n      confirmPassword: null,\n      states: config.meta.user.state,\n      // roles:config.meta.user.role,\n      categoryHeader: [\n        {text: '순서', align: 'left', sortable: false},\n        {text: '카테고리 명', value: 'categoryName', align: 'left', sortable: false},\n        // {text: '생성일', value: 'createdAt', sortable: false},\n        {text: '사용여부', value: 'activated', sortable: false},\n        {text: '관리', value: 'actions', sortable: false}\n      ],\n      categories: [],\n      category: null,\n      formVisible: false,\n      fileMeta: {}\n    }\n  },\n  methods: {\n    uploadImage(f) {\n      boardApi.uploadImage(f).then(res => {\n        // console.log(res);\n        this.fileMeta = res;\n      });\n    },\n    goList() {\n      this.$router.push({path: '/boards'})\n    },\n    async save() {\n\n      if(!await this.$refs.boardForm.validate())\n        return;\n\n      // this.board.boardPermissions.push(this.permission_r.map(p => {return {functionType:'r', roleId:p}}))\n\n      this.board.boardPermissions = Object.entries(this.permissions).flatMap(([k, v]) => {\n        // console.log(k)\n        // console.log(v)\n        return v?.map(p => {return {functionType:k, roleId:p}})??[]\n      });\n\n      this.board.boardContents = this.$refs.boardContents.getValue();\n\n      this.board.boardCategories = _.cloneDeep(this.categories).reverse().map((c, i) => {\n        c.orderNo = i;\n        return c;\n      });\n\n      boardApi.save(this.board).then(data => {\n        if (data) {\n          if(this.board.id) {\n            alert(\"수정되었습니다.\");\n          } else {\n            alert(\"등록되었습니다.\");\n          }\n          this.goList();\n        } else {\n          alert(\"Error\");\n        }\n      });\n    },\n    log: function(e) {\n      // window.console.log(\"Future index: \" + e.draggedContext.futureIndex);\n      window.console.log(e);\n    },\n    createCategoryForm() {\n      this.formVisible = true;\n      this.category = {};\n    },\n    resetCategory() {\n      this.categories = _.cloneDeep(this.board?.boardCategories??[]);\n      this.categories.sort((a, b) => {\n        return a.orderNo > b.orderNo ? -1 : a.orderNo < b.orderNo ? 1 : 0;\n      })\n    },\n    updateCategoryForm(item) {\n      this.formVisible = true;\n      this.category = item;\n    },\n    savedCategory(item) {\n      this.formVisible = false;\n      if(item.categoryId) {\n\n        this.categories = this.categories.map(c => {\n          if(c.categoryId === item.categoryId) {\n            // item.orderNo = i;\n            return item;\n          } else {\n            // c.orderNo = i;\n            return c;\n          }\n        });\n      } else {\n\n        if(!this.categories.find(c => c.categoryName === item.originName))\n          this.categories.push(item);\n        else\n          this.categories = this.categories.map(c => {\n            if(c.categoryName === item.originName) {\n              // item.orderNo = i;\n              return item;\n            } else {\n              // c.orderNo = i;\n              return c;\n            }\n          });\n\n      }\n\n    },\n    deleteCategory(index) {\n      this.categories = this.categories.filter((c,i) => i !== index);\n    }\n  },\n  created() {\n    roleApi.getRoles(true).then(data => {\n      this.roles = data;\n    });\n    if(this.id) {\n      boardApi.findById(this.id).then(data => {\n        // console.log(data);\n        this.board = data;\n        this.board.boardPermissions.forEach(p => {\n          this.permissions[p.id.functionType].push(p.id.roleId);\n        });\n\n        this.categories = _.cloneDeep(this.board.boardCategories);\n        this.categories.sort((a, b) => {\n          return a.orderNo > b.orderNo ? -1 : a.orderNo < b.orderNo ? 1 : 0;\n        })\n      });\n    }\n  }\n}\n</script>\n"]}]}