{"remainingRequest":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/components/app/Endpoints.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/components/app/Endpoints.vue","mtime":1665531625454},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/babel-loader/lib/index.js","mtime":1665531751248},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js","mtime":1665531752006}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBFbmRwb2ludEFwaSBmcm9tICcuLi8uLi9hcGkvRW5kcG9pbnRBcGknOwppbXBvcnQgXyBmcm9tICJsb2Rhc2giOwoKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBoZWFkZXJzOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiAoKSA9PiAoWwogICAgICAgIHt0ZXh0OiAn6rO16rCcJywgdmFsdWU6ICdpc1B1YmxpY1RleHQnLCBhbGlnbjogJ2NlbnRlcid9LAogICAgICAgIHt0ZXh0OiAndXJpJywgdmFsdWU6ICd1cmknLCBhbGlnbjogJ2xlZnQnfSwKICAgICAgICB7dGV4dDogJ2h0dHAgbWV0aG9kJywgdmFsdWU6ICdodHRwTWV0aG9kJywgYWxpZ246ICdsZWZ0J30sCiAgICAgICAge3RleHQ6ICdhcGkgdGl0bGUnLCB2YWx1ZTogJ29wZXJhdGlvbkRlc2NyaXB0aW9uJywgYWxpZ246ICdsZWZ0J30sCiAgICAgICAge3RleHQ6ICdyZXNvdXJjZSB0aXRsZScsIHZhbHVlOiAncmVzb3VyY2VEZXNjcmlwdGlvbicsIGFsaWduOiAnbGVmdCd9CiAgICAgIF0pCiAgICB9LAogICAgc2VsZWN0ZWRFbmRwb2ludDogewogICAgICB0eXBlOiBBcnJheQogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIHNlbGVjdGVkRW5kcG9pbnQ6IHsKICAgICAgaGFuZGxlcihudikgewogICAgICAgIHRoaXMuc2VsZWN0ZWQgPSBudi5tYXAodiA9PiB7CiAgICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih2LCB7J2l0ZW1LZXknIDogdi51cmkgKyAnXycgKyB2Lmh0dHBNZXRob2R9KQogICAgICAgIH0pPz9bXQogICAgICAgIC8vIGNvbnNvbGUubG9nKG52KQogICAgICB9CiAgICB9LAogICAgc2VhcmNoU2VsZWN0ZWQ6IHsKICAgICAgaGFuZGxlcihudikgewogICAgICAgIGlmKG52KSB7CiAgICAgICAgICB0aGlzLmNvcGllZEVuZHBvaW50cyA9IF8uY2xvbmVEZWVwKHRoaXMuZW5kcG9pbnRzKQogICAgICAgICAgdGhpcy5lbmRwb2ludHMgPSB0aGlzLmVuZHBvaW50cy5maWx0ZXIoZSA9PiB0aGlzLnNlbGVjdGVkLm1hcChzID0+IHMuaXRlbUtleSkuaW5jbHVkZXMoZS5pdGVtS2V5KSkKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5lbmRwb2ludHMgPSBfLmNsb25lRGVlcCh0aGlzLmNvcGllZEVuZHBvaW50cykKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBicmVhZGNydW1iczogW3sKICAgICAgICB0ZXh0OiAn7JeU65Oc7Y+s7J247Yq4IOq0gOumrCcsCiAgICAgICAgZGlzYWJsZWQ6IGZhbHNlLAogICAgICAgIGhyZWY6ICcjJwogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ+yXlOuTnO2PrOyduO2KuCDrqqnroZ0nCiAgICAgIH1dLAogICAgICBzZWFyY2hTZWxlY3RlZDogZmFsc2UsCiAgICAgIHNlYXJjaDogJycsCiAgICAgIC8vIGhlYWRlcnM6ICwKICAgICAgb3B0aW9uczogewogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgaXRlbXNQZXJQYWdlOiA1CiAgICAgIH0sCiAgICAgIHNlbGVjdGVkOiBbXSwKICAgICAgZW5kcG9pbnRzOiBbXSwKICAgICAgY29waWVkRW5kcG9pbnRzOiBbXSwKICAgICAgdG90YWxDb3VudDogbnVsbCwKICAgICAgZGlhbG9nOiBmYWxzZSwKICAgICAgcnVsZXM6IHsKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgc2F2ZUV2ZW50KCkgewogICAgICB0aGlzLiRlbWl0KCdjYWxsYmFjay1zYXZlLWV2ZW50JywgdGhpcy5zZWxlY3RlZCk7CiAgICB9LAogICAgYXN5bmMgZ2V0RW5kcG9pbnRzKCkgewoKICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoW0VuZHBvaW50QXBpLmdldFB1YmxpY0VuZHBvaW50cygpLCBFbmRwb2ludEFwaS5nZXRFbmRwb2ludHMoKV0pCiAgICAgICAgLnRoZW4oKFtwcywgZW5kcG9pbnRzXSkgPT4gewogICAgICAgICAgY29uc3QgcHVibGljRW5kcG9pbnRzID0gcHMubWFwKHAgPT4gcC5lbmRwb2ludCk7CiAgICAgICAgICB0aGlzLmVuZHBvaW50cyA9IGVuZHBvaW50cy5tYXAoZWxlID0+IHsKICAgICAgICAgICAgZWxlLmlzUHVibGljID0gISFwdWJsaWNFbmRwb2ludHMuZmluZChwZSA9PiBwZS51cmkgPT09IGVsZS51cmkgJiYgcGUuaHR0cE1ldGhvZCA9PT0gZWxlLmh0dHBNZXRob2QpOwogICAgICAgICAgICBlbGUuaXRlbUtleSA9IGVsZS51cmkgKyAnXycgKyBlbGUuaHR0cE1ldGhvZAogICAgICAgICAgICBlbGUuaXNQdWJsaWNUZXh0ID0gZWxlLmlzUHVibGljID8n6rO16rCcJzon67mE6rO16rCcJwogICAgICAgICAgICByZXR1cm4gZWxlOwogICAgICAgICAgfSk7CiAgICAgIH0pCgogICAgfSwKCiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRFbmRwb2ludHMoKTsKICB9Cgp9Owo="},{"version":3,"sources":["Endpoints.vue"],"names":[],"mappings":";AAoEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA","file":"Endpoints.vue","sourceRoot":"src/components/app","sourcesContent":["<template>\n  <div class=\"d-flex flex-column flex-grow-1\">\n\n\n    <v-card>\n      <v-card-title>\n        <v-switch\n          v-model=\"searchSelected\"\n          :label=\"searchSelected ? '선택 API' : '전체 API'\"\n          flat\n        >\n        </v-switch>\n        <v-spacer></v-spacer>\n        <v-text-field\n          v-model=\"search\"\n          append-icon=\"mdi-magnify\"\n          label=\"전체 검색\"\n          single-line\n          hide-details\n          clearable\n        ></v-text-field>\n      </v-card-title>\n\n      <v-data-table\n        v-model=\"selected\"\n        :search=\"search\"\n        :headers=\"headers\"\n        :items=\"endpoints\"\n        show-select\n        item-key=\"itemKey\"\n        class=\"elevation-1\"\n        sortable=\"false\"\n        :options.sync=\"options\"\n        :footer-props=\"{showFirstLastPage: true, 'items-per-page-options' : [5,10,20,50,100,-1]}\"\n        @click:row=\"(item, row) => row.select(!row.isSelected)\"\n      >\n        <template v-slot:item.isPublic=\"{ item }\">\n          <v-switch\n            v-model=\"item.isPublic\"\n            flat\n            @click.native.stop=\"publicChange(item)\"\n            :color=\"item.isPublic ? 'success' : 'error'\"\n          >\n<!--            :label=\"item.isPublic ?'공개':'비공개'\"-->\n          </v-switch>\n        </template>\n        <template v-slot:item.isPublicText=\"{ item }\">\n          {{ item.isPublic ?'공개':'비공개' }}\n        </template>\n\n      </v-data-table>\n\n<!--      <div class=\"text-center pt-2\">-->\n<!--        <v-btn-->\n<!--          color=\"primary\"-->\n<!--          class=\"mr-2\"-->\n<!--          @click=\"saveEvent\"-->\n<!--        >-->\n<!--          저장-->\n<!--        </v-btn>-->\n<!--      </div>-->\n    </v-card>\n\n\n  </div>\n</template>\n\n<script>\nimport EndpointApi from '../../api/EndpointApi';\nimport _ from \"lodash\";\n\nexport default {\n  props: {\n    headers: {\n      type: Array,\n      default: () => ([\n        {text: '공개', value: 'isPublicText', align: 'center'},\n        {text: 'uri', value: 'uri', align: 'left'},\n        {text: 'http method', value: 'httpMethod', align: 'left'},\n        {text: 'api title', value: 'operationDescription', align: 'left'},\n        {text: 'resource title', value: 'resourceDescription', align: 'left'}\n      ])\n    },\n    selectedEndpoint: {\n      type: Array\n    }\n  },\n  watch: {\n    selectedEndpoint: {\n      handler(nv) {\n        this.selected = nv.map(v => {\n          return Object.assign(v, {'itemKey' : v.uri + '_' + v.httpMethod})\n        })??[]\n        // console.log(nv)\n      }\n    },\n    searchSelected: {\n      handler(nv) {\n        if(nv) {\n          this.copiedEndpoints = _.cloneDeep(this.endpoints)\n          this.endpoints = this.endpoints.filter(e => this.selected.map(s => s.itemKey).includes(e.itemKey))\n        } else {\n          this.endpoints = _.cloneDeep(this.copiedEndpoints)\n        }\n      }\n    }\n  },\n  data() {\n    return {\n      breadcrumbs: [{\n        text: '엔드포인트 관리',\n        disabled: false,\n        href: '#'\n      }, {\n        text: '엔드포인트 목록'\n      }],\n      searchSelected: false,\n      search: '',\n      // headers: ,\n      options: {\n        page: 1,\n        itemsPerPage: 5\n      },\n      selected: [],\n      endpoints: [],\n      copiedEndpoints: [],\n      totalCount: null,\n      dialog: false,\n      rules: {\n      }\n    }\n  },\n  methods: {\n    saveEvent() {\n      this.$emit('callback-save-event', this.selected);\n    },\n    async getEndpoints() {\n\n      await Promise.all([EndpointApi.getPublicEndpoints(), EndpointApi.getEndpoints()])\n        .then(([ps, endpoints]) => {\n          const publicEndpoints = ps.map(p => p.endpoint);\n          this.endpoints = endpoints.map(ele => {\n            ele.isPublic = !!publicEndpoints.find(pe => pe.uri === ele.uri && pe.httpMethod === ele.httpMethod);\n            ele.itemKey = ele.uri + '_' + ele.httpMethod\n            ele.isPublicText = ele.isPublic ?'공개':'비공개'\n            return ele;\n          });\n      })\n\n    },\n\n  },\n  created() {\n    this.getEndpoints();\n  }\n\n};\n</script>\n"]}]}