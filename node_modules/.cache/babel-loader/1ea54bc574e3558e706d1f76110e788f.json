{"remainingRequest":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/babel-loader/lib/index.js!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/apps/role/Roles.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/apps/role/Roles.vue","mtime":1665531625451},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/babel.config.js","mtime":1665531625438},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/babel-loader/lib/index.js","mtime":1665531751248},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js","mtime":1665531752006}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBSb2xlQXBpIGZyb20gJy4uLy4uL2FwaS9Sb2xlQXBpJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdyb2xlcycsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGJyZWFkY3J1bWJzOiBbewogICAgICAgIHRleHQ6ICfsl63tlaAg6rSA66asJywKICAgICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgICAgaHJlZjogJyMnCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAn7Jet7ZWgIOuqqeuhnScKICAgICAgfV0sCiAgICAgIHNlYXJjaDogJycsCiAgICAgIGhlYWRlcnM6IFt7CiAgICAgICAgdGV4dDogJ+yXre2VoCDrqoUnLAogICAgICAgIHZhbHVlOiAncm9sZU5hbWUnCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAn7IKs7JqpIOyXrOu2gCcsCiAgICAgICAgdmFsdWU6ICdhY3RpdmF0ZWQnCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAn7Jet7ZWgIO2DgOyehScsCiAgICAgICAgdmFsdWU6ICdtYW5hZ2VyJwogICAgICB9LAogICAgICAvLyB7dGV4dDogJ+yDneyEseyekCcsIHZhbHVlOiAnY3JlYXRlZEJ5J30sCiAgICAgIHsKICAgICAgICB0ZXh0OiAn7IOd7ISx7J28JywKICAgICAgICB2YWx1ZTogJ2NyZWF0ZWRBdCcKICAgICAgfSwKICAgICAgLy8ge3RleHQ6ICfsiJjsoJXsnpAnLCB2YWx1ZTogJ3VwZGF0ZWRCeSd9LAogICAgICB7CiAgICAgICAgdGV4dDogJ+yImOygleydvCcsCiAgICAgICAgdmFsdWU6ICd1cGRhdGVkQXQnCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAn6rSA66asJywKICAgICAgICB2YWx1ZTogJ2FjdGlvbicsCiAgICAgICAgc29ydGFibGU6IGZhbHNlCiAgICAgIH1dLAogICAgICBzZWxlY3RlZDogW10sCiAgICAgIHJvbGVzOiBbXSwKICAgICAgdG90YWxDb3VudDogbnVsbCwKICAgICAgZGlhbG9nOiBmYWxzZSwKICAgICAgb3B0aW9uczoge30KICAgIH07CiAgfSwKICB3YXRjaDogewogICAgb3B0aW9uczogewogICAgICBoYW5kbGVyKCkgewogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0UGFyYW1zJywgdGhpcy5vcHRpb25zKTsKICAgICAgfSwKICAgICAgZGVlcDogdHJ1ZQogICAgfSwKICAgIHNlYXJjaDogewogICAgICBoYW5kbGVyKG52KSB7CiAgICAgICAgdGhpcy5vcHRpb25zLnNlYXJjaCA9IG52OwogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0UGFyYW1zJywgdGhpcy5vcHRpb25zKTsKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZ2V0Um9sZXMoc3RvcmVkUGFyYW1zKSB7CiAgICAgIFJvbGVBcGkuZ2V0Um9sZXMoKS50aGVuKHJvbGVzID0+IHsKICAgICAgICB0aGlzLnJvbGVzID0gcm9sZXM7CiAgICAgICAgaWYgKHN0b3JlZFBhcmFtcykgdGhpcy5vcHRpb25zID0gc3RvcmVkUGFyYW1zOwogICAgICB9KTsKICAgIH0sCiAgICB1cGRhdGVSb2xlKHJvbGUpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6IGAvcm9sZXMvJHtyb2xlLmlkfWAKICAgICAgfSk7CiAgICB9LAogICAgZGVsZXRlUm9sZShyb2xlKSB7CiAgICAgIGlmIChyb2xlLmlkID09PSAxKSB7CiAgICAgICAgYWxlcnQoIuq0gOumrOyekCDsl63tlaDsnYAg7IiY7KCV7ZWY6rGw64KYIOyCreygnO2VmOyLpCDsiJgg7JeG7Iq164uI64ukLiIpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBpZiAoY29uZmlybSgn7IKt7KCc7ZWY7Iuc6rKg7Iq164uI6rmMPycpKSBSb2xlQXBpLmRlbGV0ZVJvbGUocm9sZS5pZCkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy5yb2xlcyA9IHRoaXMucm9sZXMuZmlsdGVyKHIgPT4gciAhPT0gcm9sZSk7CiAgICAgICAgYWxlcnQoIuyCreygnOuQmOyXiOyKteuLiOuLpC4iKTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBhc3luYyBjcmVhdGVkKCkgewogICAgdmFyIF90aGlzJCRzdG9yZSRnZXR0ZXJzJCwgX3RoaXMkJHN0b3JlJGdldHRlcnM7CiAgICBsZXQgc3RvcmVkUGFyYW1zID0gKF90aGlzJCRzdG9yZSRnZXR0ZXJzJCA9IChfdGhpcyQkc3RvcmUkZ2V0dGVycyA9IHRoaXMuJHN0b3JlLmdldHRlcnMpID09PSBudWxsIHx8IF90aGlzJCRzdG9yZSRnZXR0ZXJzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyQkc3RvcmUkZ2V0dGVycy5wYXJhbXMpICE9PSBudWxsICYmIF90aGlzJCRzdG9yZSRnZXR0ZXJzJCAhPT0gdm9pZCAwID8gX3RoaXMkJHN0b3JlJGdldHRlcnMkIDoge307CgogICAgLy8gZmlyc3QgbG9hZAogICAgaWYgKCFzdG9yZWRQYXJhbXMubmFtZSB8fCBzdG9yZWRQYXJhbXMubmFtZSAhPT0gdGhpcy4kb3B0aW9ucy5uYW1lKSB7CiAgICAgIHRoaXMub3B0aW9ucyA9IHsKICAgICAgICBwYWdlOiAxLAogICAgICAgIGl0ZW1zUGVyUGFnZTogMTAsCiAgICAgICAgc2VhcmNoOiBudWxsLAogICAgICAgIG5hbWU6IHRoaXMuJG9wdGlvbnMubmFtZQogICAgICB9OwogICAgICBzdG9yZWRQYXJhbXMgPSB0aGlzLm9wdGlvbnM7CiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnc2V0UGFyYW1zJywgc3RvcmVkUGFyYW1zKTsKICAgIH0gZWxzZSB7CiAgICAgIHN0b3JlZFBhcmFtcy5uYW1lID0gdGhpcy4kb3B0aW9ucy5uYW1lOwogICAgICB0aGlzLm9wdGlvbnMgPSBzdG9yZWRQYXJhbXM7CiAgICB9CiAgICBhd2FpdCB0aGlzLmdldFJvbGVzKHN0b3JlZFBhcmFtcyk7CiAgICB0aGlzLnNlYXJjaCA9IHRoaXMub3B0aW9ucy5zZWFyY2ggPyB0aGlzLm9wdGlvbnMuc2VhcmNoIDogbnVsbDsKICB9Cn07"},{"version":3,"mappings":";AAwGA;AAEA;EACAA;EACAC;IACA;MACAC;QACAC;QACAC;QACAC;MACA;QACAF;MACA;MAEAG;MACAC,UACA;QAAAJ;QAAAK;MAAA,GACA;QAAAL;QAAAK;MAAA,GACA;QAAAL;QAAAK;MAAA;MACA;MACA;QAAAL;QAAAK;MAAA;MACA;MACA;QAAAL;QAAAK;MAAA,GACA;QAAAL;QAAAK;QAAAC;MAAA,EACA;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAD;MACAE;QACA;MACA;MACAC;IACA;IACAX;MACAU;QACA;QACA;MACA;IACA;EACA;EACAE;IACAC;MACAC;QACA;QACA,kBACA;MACA;IACA;IACAC;MACA;QAAAC;MAAA;IACA;IACAC;MACA;QACAC;QACA;MACA;MACA,0BACAJ;QACA;QACAI;MACA;IACA;EACA;EACA;IAAA;IACA;;IAEA;IACA;MACA;QACAC;QACAC;QACApB;QACAN;MACA;MAEA2B;MACA;IAEA;MACAA;MACA;IACA;IACA;IACA;EAEA;AAEA","names":["name","data","breadcrumbs","text","disabled","href","search","headers","value","sortable","selected","roles","totalCount","dialog","options","watch","handler","deep","methods","getRoles","RoleApi","updateRole","path","deleteRole","alert","page","itemsPerPage","storedParams"],"sourceRoot":"src/apps/role","sources":["Roles.vue"],"sourcesContent":["<template>\n  <div class=\"d-flex flex-column flex-grow-1\">\n\n    <div class=\"d-flex align-center py-3\">\n      <div>\n        <div class=\"display-1\">역할 관리</div>\n        <v-breadcrumbs :items=\"breadcrumbs\" class=\"pa-0 py-2\"></v-breadcrumbs>\n      </div>\n      <v-spacer></v-spacer>\n      <v-btn color=\"primary\" to=\"/roles/form\" style=\"margin-right:1rem\">\n        <v-icon left>mdi mdi-playlist-plus</v-icon>\n        역할 추가\n      </v-btn>\n    </div>\n\n    <v-card>\n      <v-card-title>\n        <v-spacer></v-spacer>\n        <v-text-field\n          v-model=\"search\"\n          append-icon=\"mdi-magnify\"\n          label=\"검색\"\n          dense\n          single-line\n          hide-details\n          clearable\n        ></v-text-field>\n      </v-card-title>\n\n      <v-data-table\n        :search=\"search\"\n        :headers=\"headers\"\n        :items=\"roles\"\n        item-key=\"id\"\n        class=\"elevation-1\"\n        :sortable=\"true\"\n        :footer-props=\"{showFirstLastPage: true, 'items-per-page-options' : [10,20,50,100,-1], showCurrentPage:true}\"\n        :options.sync=\"options\"\n      >\n<!--        @click:row=\"(item, row) => row.select(!row.isSelected)\"-->\n<!--        @click:row=\"updateRole\"-->\n<!--        style=\"cursor: pointer\"-->\n\n        <template v-slot:item.roleName=\"{ item }\">\n          <router-link :to=\"{path:`/roles/${item.id}`}\">{{ item.roleName }}</router-link>\n        </template>\n\n        <template v-slot:item.activated=\"{ item }\">\n          {{ item.activated ?'사용':'사용안함' }}\n        </template>\n        <template v-slot:item.manager=\"{ item }\">\n          {{ item.manager ? '관리자 역할':'사용자 역할' }}\n        </template>\n        <template v-slot:item.createdAt=\"{ value }\">\n          <div>{{ value | formatDate('YYYY-MM-DD HH:mm:ss') }}</div>\n        </template>\n        <template v-slot:item.updatedAt=\"{ value }\">\n          <div>{{ value | formatDate('YYYY-MM-DD HH:mm:ss') }}</div>\n        </template>\n\n        <template v-slot:item.action=\"{ item }\">\n          <v-icon\n            class=\"mr-2\"\n            @click.stop=\"updateRole(item)\"\n            small\n          >\n            mdi-pencil\n          </v-icon>\n          <v-icon\n            class=\"mr-2\"\n            @click.stop=\"deleteRole(item)\"\n            small\n          >\n            mdi-delete\n          </v-icon>\n        </template>\n        <template #footer.page-text=\"props\">\n\n          <v-combobox\n            v-model=\"options.page\"\n            :label=\"`${props.pageStart}-${props.pageStop} of ${props.itemsLength} rows / ${options.page} page / total ${Math.ceil(props.itemsLength / options.itemsPerPage)} pages`\"\n            :items=\"Array.from({length: Math.ceil(props.itemsLength / options.itemsPerPage)}, (v, k) => k+1 )\"\n            :return-object=\"false\"\n            hide-details dense\n            type=\"number\"\n            suffix=\"page\"\n          >\n          </v-combobox>\n        </template>\n      </v-data-table>\n    </v-card>\n\n    <div class=\"d-flex align-center py-3\">\n      <v-spacer></v-spacer>\n      <v-btn color=\"primary\" to=\"/roles/form\" style=\"margin-right:1rem\">\n        <v-icon left>mdi mdi-playlist-plus</v-icon>\n        역할 추가\n      </v-btn>\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport RoleApi from '../../api/RoleApi';\n\nexport default {\n  name:'roles',\n  data() {\n    return {\n      breadcrumbs: [{\n        text: '역할 관리',\n        disabled: false,\n        href: '#'\n      }, {\n        text: '역할 목록'\n      }],\n\n      search: '',\n      headers: [\n        {text: '역할 명', value: 'roleName'},\n        {text: '사용 여부', value: 'activated'},\n        {text: '역할 타입', value: 'manager'},\n        // {text: '생성자', value: 'createdBy'},\n        {text: '생성일', value: 'createdAt'},\n        // {text: '수정자', value: 'updatedBy'},\n        {text: '수정일', value: 'updatedAt'},\n        {text: '관리', value: 'action', sortable: false }\n      ],\n      selected: [],\n      roles: [],\n      totalCount: null,\n      dialog: false,\n      options: {},\n    }\n  },\n  watch: {\n    options: {\n      handler() {\n        this.$store.commit('setParams', this.options);\n      },\n      deep: true,\n    },\n    search: {\n      handler(nv) {\n        this.options.search = nv;\n        this.$store.commit('setParams', this.options);\n      }\n    }\n  },\n  methods: {\n    getRoles(storedParams) {\n      RoleApi.getRoles().then(roles => {\n        this.roles = roles\n        if(storedParams)\n          this.options = storedParams\n      })\n    },\n    updateRole(role) {\n      this.$router.push({path : `/roles/${role.id}`})\n    },\n    deleteRole(role) {\n      if(role.id === 1) {\n        alert(\"관리자 역할은 수정하거나 삭제하실 수 없습니다.\")\n        return false\n      }\n      if (confirm('삭제하시겠습니까?'))\n        RoleApi.deleteRole(role.id).then(() => {\n          this.roles = this.roles.filter(r => r !== role)\n          alert(\"삭제되었습니다.\")\n        })\n    }\n  },\n  async created() {\n    let storedParams = this.$store.getters?.params??{};\n\n    // first load\n    if(!storedParams.name || storedParams.name !== this.$options.name) {\n      this.options = {\n        page:1,\n        itemsPerPage:10,\n        search:null,\n        name:this.$options.name\n      }\n\n      storedParams = this.options\n      this.$store.commit('setParams', storedParams)\n\n    } else {\n      storedParams.name = this.$options.name\n      this.options = storedParams\n    }\n    await this.getRoles(storedParams)\n    this.search = this.options.search ? this.options.search : null\n\n  }\n\n};\n</script>\n"]}]}