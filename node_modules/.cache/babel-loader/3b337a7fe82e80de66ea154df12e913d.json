{"remainingRequest":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/babel-loader/lib/index.js!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/components/app/Policies.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/components/app/Policies.vue","mtime":1665531625454},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/babel.config.js","mtime":1665531625438},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/babel-loader/lib/index.js","mtime":1665531751248},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js","mtime":1665531752006}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHBvbGljeUFwaSBmcm9tICdAL2FwaS9Qb2xpY3lBcGknOwppbXBvcnQgXyBmcm9tICJsb2Rhc2giOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIGhlYWRlcnM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6ICgpID0+IFt7CiAgICAgICAgdGV4dDogJ+ygleyxhSDqt7jro7kg7L2U65OcJywKICAgICAgICB2YWx1ZTogJ3BvbGljeUdyb3VwQ29kZScsCiAgICAgICAgYWxpZ246ICdsZWZ0JwogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ+ygleyxhSDsvZTrk5wnLAogICAgICAgIHZhbHVlOiAncG9saWN5Q29kZScsCiAgICAgICAgYWxpZ246ICdsZWZ0JwogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ+ygleyxhSDrqoUnLAogICAgICAgIHZhbHVlOiAncG9saWN5TmFtZScsCiAgICAgICAgYWxpZ246ICdsZWZ0JwogICAgICB9XQogICAgfSwKICAgIHNlbGVjdGVkUG9saWN5OiB7CiAgICAgIHR5cGU6IEFycmF5CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgc2VhcmNoU2VsZWN0ZWQ6IHsKICAgICAgaGFuZGxlcihudikgewogICAgICAgIGNvbnNvbGUubG9nKG52KTsKICAgICAgICBpZiAobnYpIHsKICAgICAgICAgIHRoaXMuY29waWVkUG9saWNpZXMgPSBfLmNsb25lRGVlcCh0aGlzLnBvbGljaWVzKTsKICAgICAgICAgIHRoaXMucG9saWNpZXMgPSB0aGlzLnBvbGljaWVzLmZpbHRlcihlID0+IHRoaXMuc2VsZWN0ZWQubWFwKHMgPT4gcy5pZCkuaW5jbHVkZXMoZS5pZCkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnBvbGljaWVzID0gXy5jbG9uZURlZXAodGhpcy5jb3BpZWRQb2xpY2llcyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VhcmNoU2VsZWN0ZWQ6IGZhbHNlLAogICAgICBzZWFyY2g6ICcnLAogICAgICAvLyBoZWFkZXJzOiAsCiAgICAgIG9wdGlvbnM6IHsKICAgICAgICBwYWdlOiAxLAogICAgICAgIGl0ZW1zUGVyUGFnZTogNQogICAgICB9LAogICAgICBzZWxlY3RlZDogW10sCiAgICAgIHBvbGljaWVzOiBbXSwKICAgICAgY29waWVkUG9saWNpZXM6IFtdLAogICAgICB0b3RhbENvdW50OiBudWxsLAogICAgICBydWxlczoge30sCiAgICAgIGluaXQ6IGZhbHNlCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgc2F2ZUV2ZW50KCkgewogICAgICB0aGlzLiRlbWl0KCdjYWxsYmFjay1zYXZlLWV2ZW50JywgdGhpcy5zZWxlY3RlZCk7CiAgICB9LAogICAgYXN5bmMgZmluZFBvbGljaWVzKCkgewogICAgICBpZiAoIXRoaXMuaW5pdCkgewogICAgICAgIHZhciBfdGhpcyRzZWxlY3RlZFBvbGljeSQ7CiAgICAgICAgdGhpcy5zZWxlY3RlZCA9IChfdGhpcyRzZWxlY3RlZFBvbGljeSQgPSB0aGlzLnNlbGVjdGVkUG9saWN5Lm1hcCh2ID0+IHsKICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHYsIHsKICAgICAgICAgICAgJ2lkJzogdi5pZAogICAgICAgICAgfSk7CiAgICAgICAgfSkpICE9PSBudWxsICYmIF90aGlzJHNlbGVjdGVkUG9saWN5JCAhPT0gdm9pZCAwID8gX3RoaXMkc2VsZWN0ZWRQb2xpY3kkIDogW107CiAgICAgICAgdGhpcy5pbml0ID0gdHJ1ZTsKICAgICAgfQogICAgICBwb2xpY3lBcGkuZmluZFBvbGljaWVzKCkudGhlbihyZXN1bHQgPT4gewogICAgICAgIHRoaXMucG9saWNpZXMgPSByZXN1bHQuY29udGVudC5tYXAoZWxlID0+IHsKICAgICAgICAgIHJldHVybiBlbGU7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZmluZFBvbGljaWVzKCk7CiAgfQp9Ow=="},{"version":3,"mappings":"AAyCA;AACA;AAEA;EACAA;IACAC;MACAC;MACAC,gBACA;QAAAC;QAAAC;QAAAC;MAAA,GACA;QAAAF;QAAAC;QAAAC;MAAA,GACA;QAAAF;QAAAC;QAAAC;MAAA;IAEA;IACAC;MACAL;IACA;EACA;EACAM;IACAC;MACAC;QACAC;QACA;UACA;UACA;QACA;UACA;QACA;MACA;IACA;EACA;EACAC;IACA;MACAH;MACAI;MACA;MACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC,QACA;MACAC;IACA;EACA;EACAC;IACAC;MACA;IACA;IACA;MAEA;QAAA;QACA;UACA;YAAA;UAAA;QACA;QACA;MACA;MAEAC;QAEA;UACA;QACA;MACA;IAEA;EACA;EACAC;IACA;EACA;AAEA","names":["props","headers","type","default","text","value","align","selectedPolicy","watch","searchSelected","handler","console","data","search","options","page","itemsPerPage","selected","policies","copiedPolicies","totalCount","rules","init","methods","saveEvent","policyApi","created"],"sourceRoot":"src/components/app","sources":["Policies.vue"],"sourcesContent":["<template>\n  <div class=\"d-flex flex-column flex-grow-1\">\n    <v-card>\n      <v-card-title>\n        <v-switch\n          v-model=\"searchSelected\"\n          :label=\"searchSelected ? '선택 정책' : '전체 정책'\"\n          flat\n        >\n        </v-switch>\n        <v-spacer></v-spacer>\n        <v-text-field\n          v-model=\"search\"\n          append-icon=\"mdi-magnify\"\n          label=\"전체 검색\"\n          single-line\n          hide-details\n          clearable\n        ></v-text-field>\n      </v-card-title>\n\n      <v-data-table\n        v-model=\"selected\"\n        :search=\"search\"\n        :headers=\"headers\"\n        :items=\"policies\"\n        show-select\n        item-key=\"id\"\n        class=\"elevation-1\"\n        sortable=\"false\"\n        :options.sync=\"options\"\n        :footer-props=\"{showFirstLastPage: true, 'items-per-page-options' : [5,10,20,50,100,-1]}\"\n        @click:row=\"(item, row) => row.select(!row.isSelected)\"\n      >\n      </v-data-table>\n\n    </v-card>\n  </div>\n</template>\n\n<script>\nimport policyApi from '@/api/PolicyApi';\nimport _ from \"lodash\";\n\nexport default {\n  props: {\n    headers: {\n      type: Array,\n      default: () => ([\n        {text: '정책 그룹 코드', value: 'policyGroupCode', align: 'left'},\n        {text: '정책 코드', value: 'policyCode', align: 'left'},\n        {text: '정책 명', value: 'policyName', align: 'left'}\n      ])\n    },\n    selectedPolicy: {\n      type: Array\n    }\n  },\n  watch: {\n    searchSelected: {\n      handler(nv) {\n        console.log(nv)\n        if(nv) {\n          this.copiedPolicies = _.cloneDeep(this.policies)\n          this.policies = this.policies.filter(e => this.selected.map(s => s.id).includes(e.id))\n        } else {\n          this.policies = _.cloneDeep(this.copiedPolicies)\n        }\n      }\n    }\n  },\n  data() {\n    return {\n      searchSelected: false,\n      search: '',\n      // headers: ,\n      options: {\n        page: 1,\n        itemsPerPage: 5\n      },\n      selected: [],\n      policies: [],\n      copiedPolicies: [],\n      totalCount: null,\n      rules: {\n      },\n      init: false\n    }\n  },\n  methods: {\n    saveEvent() {\n      this.$emit('callback-save-event', this.selected);\n    },\n    async findPolicies() {\n\n      if(!this.init) {\n        this.selected = this.selectedPolicy.map(v => {\n          return Object.assign(v, {'id': v.id})\n        }) ?? []\n        this.init = true\n      }\n\n      policyApi.findPolicies().then(result => {\n\n        this.policies = result.content.map(ele => {\n          return ele;\n        });\n      })\n\n    }\n  },\n  created() {\n    this.findPolicies();\n  }\n\n};\n</script>\n"]}]}