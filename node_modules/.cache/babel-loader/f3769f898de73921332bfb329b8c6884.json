{"remainingRequest":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/babel-loader/lib/index.js!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/apps/content/ContentForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/apps/content/ContentForm.vue","mtime":1665531625450},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/babel.config.js","mtime":1665531625438},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/babel-loader/lib/index.js","mtime":1665531751248},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js","mtime":1665531752006}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBDb250ZW50QXBpIGZyb20gJy4uLy4uL2FwaS9Db250ZW50QXBpJzsKaW1wb3J0IHJ1bGVzIGZyb20gIkAvdXRpbHMvcnVsZXMiOwppbXBvcnQgXyBmcm9tICJsb2Rhc2giOwppbXBvcnQgRWRpdG9yQ29tcG9uZW50IGZyb20gIi4uLy4uL2NvbXBvbmVudHMvZWRpdG9yL0VkaXRvckNvbXBvbmVudCI7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICAnZWRpdG9yLWNvbXBvbmVudCc6IEVkaXRvckNvbXBvbmVudAogIH0sCiAgcHJvcHM6IFsnaWQnXSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgdGFiOiBudWxsLAogICAgICBydWxlcywKICAgICAgYnJlYWRjcnVtYnM6IFt7CiAgICAgICAgdGV4dDogJ+ygleyggSDtjpjsnbTsp4Ag6rSA66asJywKICAgICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgICAgaHJlZjogJyMnCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiB0aGlzLiRwcm9wcy5pZCA/ICftjpjsnbTsp4Ag7IiY7KCVJyA6ICftjpjsnbTsp4Ag65Ox66GdJwogICAgICB9XSwKICAgICAgY29udGVudDogewogICAgICAgIHRpdGxlOiAnJwogICAgICB9LAogICAgICBjb3BpZWRDb250ZW50OiB7fSwKICAgICAgZmlsZU1ldGE6IHt9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgdXBsb2FkSW1hZ2UoZikgewogICAgICBDb250ZW50QXBpLnVwbG9hZEltYWdlKGYpLnRoZW4ocmVzID0+IHsKICAgICAgICB0aGlzLmZpbGVNZXRhID0gcmVzOwogICAgICB9KTsKICAgIH0sCiAgICBhc3luYyBzYXZlQ29udGVudCgpIHsKICAgICAgaWYgKGNvbmZpcm0oIuyggOyepe2VmOyLnOqyoOyKteuLiOq5jD8iKSAmJiAoYXdhaXQgdGhpcy4kcmVmcy5jb250ZW50Rm9ybS52YWxpZGF0ZSgpKSkgewogICAgICAgIHRoaXMuY29udGVudC5jb250ZW50cyA9IHRoaXMuJHJlZnMuY29udGVudHMuZ2V0VmFsdWUoKTsKICAgICAgICBDb250ZW50QXBpLnNhdmUodGhpcy5jb250ZW50KS50aGVuKHJlc3VsdCA9PiB7CiAgICAgICAgICB0aGlzLmNvbnRlbnQuaWQgPSByZXN1bHQuaWQ7CiAgICAgICAgICBhbGVydCgi7KCA7J6l65CY7JeI7Iq164uI64ukLiIpOwogICAgICAgICAgLy8gdGhpcy4kcm91dGVyLnB1c2goe3BhdGg6ICcvY29udGVudHMnfSkKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKCiAgICBnb1RvTGlzdCgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIHBhdGg6ICcvY29udGVudHMnCiAgICAgIH0pOwogICAgfSwKICAgIHJlc2V0Q29udGVudCgpIHsKICAgICAgdGhpcy5jb250ZW50ID0gXy5jbG9uZURlZXAodGhpcy5jb3BpZWRDb250ZW50KTsKICAgIH0sCiAgICBkZWxldGVDb250ZW50KGNvbnRlbnQpIHsKICAgICAgaWYgKGNvbmZpcm0oJ+yCreygnO2VmOyLnOqyoOyKteuLiOq5jD8nKSkgQ29udGVudEFwaS5kZWxldGUoY29udGVudC5pZCkudGhlbigoKSA9PiB7CiAgICAgICAgdGhpcy5jb250ZW50ID0gdGhpcy5jb250ZW50LmZpbHRlcihyID0+IHIgIT09IGNvbnRlbnQpOwogICAgICAgIGFsZXJ0KCLsgq3soJzrkJjsl4jsirXri4jri6QuIik7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgICAgcGF0aDogJy9jb250ZW50cycKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgaWYgKHRoaXMuaWQpIHsKICAgICAgQ29udGVudEFwaS5maW5kQ29udGVudEJ5SWQodGhpcy5pZCkudGhlbihyZXN1bHQgPT4gewogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3VsdCkKICAgICAgICB0aGlzLmNvbnRlbnQgPSByZXN1bHQ7CiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5jb250ZW50KQogICAgICAgIHRoaXMuY29waWVkQ29udGVudCA9IF8uY2xvbmVEZWVwKHRoaXMuY29udGVudCk7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"mappings":";AA+EA;AAEA;AACA;AACA;AAEA;EACAA;IACA;EACA;EACAC;EACAC;IACA;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;MACA;QACAF;MACA;MACAG;QACAC;MACA;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACAC;QACA;MACA;IACA;IACA;MACA;QAEA;QAEAA;UACA;UACAC;UACA;QACA;MACA;IACA;;IACAC;MACA;QAAAC;MAAA;IACA;IACAC;MACA;IACA;IACAC;MACA,0BACAL;QACA;QACAC;QACA;UAAAE;QAAA;MACA;IACA;EAEA;EACAG;IACA;MACAN;QACA;QACA;QACA;QACA;MAEA;IACA;EACA;AAGA","names":["components","props","data","tab","rules","breadcrumbs","text","disabled","href","content","title","copiedContent","fileMeta","methods","uploadImage","ContentApi","alert","goToList","path","resetContent","deleteContent","created"],"sourceRoot":"src/apps/content","sources":["ContentForm.vue"],"sourcesContent":["<template>\n  <div class=\"flex-grow-1\">\n    <div class=\"d-flex align-center py-3\">\n      <div>\n        <div class=\"display-1\">정적페이지 관리 {{ content.title && `- ${content.title}` }}</div>\n        <v-breadcrumbs :items=\"breadcrumbs\" class=\"pa-0 py-2\"></v-breadcrumbs>\n      </div>\n      <v-spacer></v-spacer>\n<!--      <v-btn @click=\"saveContent\">{{ this.content.contentId != null ? '수정' : '추가' }}</v-btn>-->\n      <v-btn color=\"red\" @click=\"deleteContent\" v-if=\"id\" style=\"margin-right:1rem\" dark><v-icon left>mdi mdi-delete</v-icon>삭제</v-btn>\n      <v-btn @click=\"resetContent\"><v-icon left>mdi-refresh</v-icon>리셋</v-btn>\n      <v-btn @click=\"saveContent\" color=\"indigo\" style=\"margin-left:1rem\" dark><v-icon left>mdi mdi-content-save</v-icon>저장</v-btn>\n      <v-btn @click=\"goToList\" style=\"margin-left:1rem\"><v-icon left>mdi mdi-format-list-bulleted</v-icon>목록</v-btn>\n\n<!--      <v-btn icon @click=\"resetContent\" style=\"margin-left:1rem\">-->\n\n    </div>\n\n    <v-card class=\"mb-4\">\n<!--      <v-card-title>기본 정보</v-card-title>-->\n\n      <v-card-text>\n\n        <v-form ref=\"contentForm\">\n          <v-col>\n<!--            <span class=\"font-weight-bold\">페이지 제목</span>-->\n            <span>\n                  <v-text-field\n                    v-model=\"content.title\"\n                    label=\"페이지 제목\"\n                    :rules=\"[rules.common.required]\"\n                    inverted\n                    clearable\n                    dense\n                  ></v-text-field>\n              </span>\n          </v-col>\n\n          <v-col>\n            <span class=\"font-weight-bold\">사용 여부</span>\n            <span>\n                <v-switch\n                  v-model=\"content.activated\"\n                  flat\n                  dense\n                  :label=\"content.activated ?'사용':'사용안함'\"\n                ></v-switch>\n            </span>\n          </v-col>\n\n          <v-col>\n            <span class=\"font-weight-bold\">페이지 내용</span>\n            <span>\n                <editor-component\n                  ref=\"contents\"\n                  :val=\"content.contents\"\n                  :uploaded=\"fileMeta\"\n                  @callback-upload=\"uploadImage\"\n                  label=\"페이지 내용\"/>\n            </span>\n          </v-col>\n\n        </v-form>\n      </v-card-text>\n    </v-card>\n\n    <div class=\"d-flex\" style=\"margin-top:1rem\">\n      <v-spacer></v-spacer>\n      <v-btn color=\"red\" @click=\"deleteContent\" v-if=\"id\" style=\"margin-right:1rem\" dark><v-icon left>mdi mdi-delete</v-icon>삭제</v-btn>\n      <v-btn @click=\"resetContent\"><v-icon left>mdi-refresh</v-icon>리셋</v-btn>\n      <v-btn color=\"indigo\" @click=\"saveContent\" style=\"margin-left:1rem\" dark><v-icon left>mdi mdi-content-save</v-icon>저장</v-btn>\n      <v-btn @click=\"goToList\" style=\"margin-left:1rem\"><v-icon left>mdi mdi-format-list-bulleted</v-icon>목록</v-btn>\n    </div>\n\n  </div>\n</template>\n\n<script>\n\nimport ContentApi from '../../api/ContentApi'\n\nimport rules from \"@/utils/rules\";\nimport _ from \"lodash\";\nimport EditorComponent from \"../../components/editor/EditorComponent\";\n\nexport default {\n  components: {\n    'editor-component': EditorComponent\n  },\n  props: ['id'],\n  data() {\n    return {\n      tab: null,\n      rules,\n      breadcrumbs: [{\n        text: '정적 페이지 관리',\n        disabled: false,\n        href: '#'\n      }, {\n        text: this.$props.id ? '페이지 수정' : '페이지 등록'\n      }],\n      content: {\n        title:''\n      },\n      copiedContent: {},\n      fileMeta: {},\n    }\n  },\n  methods: {\n    uploadImage(f) {\n      ContentApi.uploadImage(f).then(res => {\n        this.fileMeta = res;\n      });\n    },\n    async saveContent() {\n      if (confirm(\"저장하시겠습니까?\") && await this.$refs.contentForm.validate()) {\n\n        this.content.contents = this.$refs.contents.getValue();\n\n        ContentApi.save(this.content).then(result => {\n          this.content.id = result.id\n          alert(\"저장되었습니다.\")\n          // this.$router.push({path: '/contents'})\n        })\n      }\n    },\n    goToList() {\n      this.$router.push({path: '/contents'})\n    },\n    resetContent() {\n      this.content = _.cloneDeep(this.copiedContent)\n    },\n    deleteContent(content) {\n      if (confirm('삭제하시겠습니까?'))\n        ContentApi.delete(content.id).then(() => {\n          this.content = this.content.filter(r => r !== content)\n          alert(\"삭제되었습니다.\")\n          this.$router.push({path: '/contents'})\n        })\n    }\n\n  },\n  created() {\n    if (this.id) {\n      ContentApi.findContentById(this.id).then(result => {\n        // console.log(result)\n        this.content = result;\n        // console.log(this.content)\n        this.copiedContent = _.cloneDeep(this.content)\n\n      })\n    }\n  }\n\n\n};\n</script>\n"]}]}