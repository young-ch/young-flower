{"remainingRequest":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/babel-loader/lib/index.js!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/components/app/Endpoints.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/components/app/Endpoints.vue","mtime":1665531625454},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/babel.config.js","mtime":1665531625438},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/babel-loader/lib/index.js","mtime":1665531751248},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js","mtime":1665531752006}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IEVuZHBvaW50QXBpIGZyb20gJy4uLy4uL2FwaS9FbmRwb2ludEFwaSc7CmltcG9ydCBfIGZyb20gImxvZGFzaCI7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgaGVhZGVyczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gW3sKICAgICAgICB0ZXh0OiAn6rO16rCcJywKICAgICAgICB2YWx1ZTogJ2lzUHVibGljVGV4dCcsCiAgICAgICAgYWxpZ246ICdjZW50ZXInCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAndXJpJywKICAgICAgICB2YWx1ZTogJ3VyaScsCiAgICAgICAgYWxpZ246ICdsZWZ0JwogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ2h0dHAgbWV0aG9kJywKICAgICAgICB2YWx1ZTogJ2h0dHBNZXRob2QnLAogICAgICAgIGFsaWduOiAnbGVmdCcKICAgICAgfSwgewogICAgICAgIHRleHQ6ICdhcGkgdGl0bGUnLAogICAgICAgIHZhbHVlOiAnb3BlcmF0aW9uRGVzY3JpcHRpb24nLAogICAgICAgIGFsaWduOiAnbGVmdCcKICAgICAgfSwgewogICAgICAgIHRleHQ6ICdyZXNvdXJjZSB0aXRsZScsCiAgICAgICAgdmFsdWU6ICdyZXNvdXJjZURlc2NyaXB0aW9uJywKICAgICAgICBhbGlnbjogJ2xlZnQnCiAgICAgIH1dCiAgICB9LAogICAgc2VsZWN0ZWRFbmRwb2ludDogewogICAgICB0eXBlOiBBcnJheQogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIHNlbGVjdGVkRW5kcG9pbnQ6IHsKICAgICAgaGFuZGxlcihudikgewogICAgICAgIHZhciBfbnYkbWFwOwogICAgICAgIHRoaXMuc2VsZWN0ZWQgPSAoX252JG1hcCA9IG52Lm1hcCh2ID0+IHsKICAgICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHYsIHsKICAgICAgICAgICAgJ2l0ZW1LZXknOiB2LnVyaSArICdfJyArIHYuaHR0cE1ldGhvZAogICAgICAgICAgfSk7CiAgICAgICAgfSkpICE9PSBudWxsICYmIF9udiRtYXAgIT09IHZvaWQgMCA/IF9udiRtYXAgOiBbXTsKICAgICAgICAvLyBjb25zb2xlLmxvZyhudikKICAgICAgfQogICAgfSwKCiAgICBzZWFyY2hTZWxlY3RlZDogewogICAgICBoYW5kbGVyKG52KSB7CiAgICAgICAgaWYgKG52KSB7CiAgICAgICAgICB0aGlzLmNvcGllZEVuZHBvaW50cyA9IF8uY2xvbmVEZWVwKHRoaXMuZW5kcG9pbnRzKTsKICAgICAgICAgIHRoaXMuZW5kcG9pbnRzID0gdGhpcy5lbmRwb2ludHMuZmlsdGVyKGUgPT4gdGhpcy5zZWxlY3RlZC5tYXAocyA9PiBzLml0ZW1LZXkpLmluY2x1ZGVzKGUuaXRlbUtleSkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmVuZHBvaW50cyA9IF8uY2xvbmVEZWVwKHRoaXMuY29waWVkRW5kcG9pbnRzKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBicmVhZGNydW1iczogW3sKICAgICAgICB0ZXh0OiAn7JeU65Oc7Y+s7J247Yq4IOq0gOumrCcsCiAgICAgICAgZGlzYWJsZWQ6IGZhbHNlLAogICAgICAgIGhyZWY6ICcjJwogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ+yXlOuTnO2PrOyduO2KuCDrqqnroZ0nCiAgICAgIH1dLAogICAgICBzZWFyY2hTZWxlY3RlZDogZmFsc2UsCiAgICAgIHNlYXJjaDogJycsCiAgICAgIC8vIGhlYWRlcnM6ICwKICAgICAgb3B0aW9uczogewogICAgICAgIHBhZ2U6IDEsCiAgICAgICAgaXRlbXNQZXJQYWdlOiA1CiAgICAgIH0sCiAgICAgIHNlbGVjdGVkOiBbXSwKICAgICAgZW5kcG9pbnRzOiBbXSwKICAgICAgY29waWVkRW5kcG9pbnRzOiBbXSwKICAgICAgdG90YWxDb3VudDogbnVsbCwKICAgICAgZGlhbG9nOiBmYWxzZSwKICAgICAgcnVsZXM6IHt9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgc2F2ZUV2ZW50KCkgewogICAgICB0aGlzLiRlbWl0KCdjYWxsYmFjay1zYXZlLWV2ZW50JywgdGhpcy5zZWxlY3RlZCk7CiAgICB9LAogICAgYXN5bmMgZ2V0RW5kcG9pbnRzKCkgewogICAgICBhd2FpdCBQcm9taXNlLmFsbChbRW5kcG9pbnRBcGkuZ2V0UHVibGljRW5kcG9pbnRzKCksIEVuZHBvaW50QXBpLmdldEVuZHBvaW50cygpXSkudGhlbigoW3BzLCBlbmRwb2ludHNdKSA9PiB7CiAgICAgICAgY29uc3QgcHVibGljRW5kcG9pbnRzID0gcHMubWFwKHAgPT4gcC5lbmRwb2ludCk7CiAgICAgICAgdGhpcy5lbmRwb2ludHMgPSBlbmRwb2ludHMubWFwKGVsZSA9PiB7CiAgICAgICAgICBlbGUuaXNQdWJsaWMgPSAhIXB1YmxpY0VuZHBvaW50cy5maW5kKHBlID0+IHBlLnVyaSA9PT0gZWxlLnVyaSAmJiBwZS5odHRwTWV0aG9kID09PSBlbGUuaHR0cE1ldGhvZCk7CiAgICAgICAgICBlbGUuaXRlbUtleSA9IGVsZS51cmkgKyAnXycgKyBlbGUuaHR0cE1ldGhvZDsKICAgICAgICAgIGVsZS5pc1B1YmxpY1RleHQgPSBlbGUuaXNQdWJsaWMgPyAn6rO16rCcJyA6ICfruYTqs7XqsJwnOwogICAgICAgICAgcmV0dXJuIGVsZTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy5nZXRFbmRwb2ludHMoKTsKICB9Cn07"},{"version":3,"mappings":"AAoEA;AACA;AAEA;EACAA;IACAC;MACAC;MACAC,gBACA;QAAAC;QAAAC;QAAAC;MAAA,GACA;QAAAF;QAAAC;QAAAC;MAAA,GACA;QAAAF;QAAAC;QAAAC;MAAA,GACA;QAAAF;QAAAC;QAAAC;MAAA,GACA;QAAAF;QAAAC;QAAAC;MAAA;IAEA;IACAC;MACAL;IACA;EACA;EACAM;IACAD;MACAE;QAAA;QACA;UACA;YAAA;UAAA;QACA;QACA;MACA;IACA;;IACAC;MACAD;QACA;UACA;UACA;QACA;UACA;QACA;MACA;IACA;EACA;EACAE;IACA;MACAC;QACAR;QACAS;QACAC;MACA;QACAV;MACA;MACAM;MACAK;MACA;MACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC,QACA;IACA;EACA;EACAC;IACAC;MACA;IACA;IACA;MAEA,kFACAC;QACA;QACA;UACAC;UACAA;UACAA;UACA;QACA;MACA;IAEA;EAEA;EACAC;IACA;EACA;AAEA","names":["props","headers","type","default","text","value","align","selectedEndpoint","watch","handler","searchSelected","data","breadcrumbs","disabled","href","search","options","page","itemsPerPage","selected","endpoints","copiedEndpoints","totalCount","dialog","rules","methods","saveEvent","then","ele","created"],"sourceRoot":"src/components/app","sources":["Endpoints.vue"],"sourcesContent":["<template>\n  <div class=\"d-flex flex-column flex-grow-1\">\n\n\n    <v-card>\n      <v-card-title>\n        <v-switch\n          v-model=\"searchSelected\"\n          :label=\"searchSelected ? '선택 API' : '전체 API'\"\n          flat\n        >\n        </v-switch>\n        <v-spacer></v-spacer>\n        <v-text-field\n          v-model=\"search\"\n          append-icon=\"mdi-magnify\"\n          label=\"전체 검색\"\n          single-line\n          hide-details\n          clearable\n        ></v-text-field>\n      </v-card-title>\n\n      <v-data-table\n        v-model=\"selected\"\n        :search=\"search\"\n        :headers=\"headers\"\n        :items=\"endpoints\"\n        show-select\n        item-key=\"itemKey\"\n        class=\"elevation-1\"\n        sortable=\"false\"\n        :options.sync=\"options\"\n        :footer-props=\"{showFirstLastPage: true, 'items-per-page-options' : [5,10,20,50,100,-1]}\"\n        @click:row=\"(item, row) => row.select(!row.isSelected)\"\n      >\n        <template v-slot:item.isPublic=\"{ item }\">\n          <v-switch\n            v-model=\"item.isPublic\"\n            flat\n            @click.native.stop=\"publicChange(item)\"\n            :color=\"item.isPublic ? 'success' : 'error'\"\n          >\n<!--            :label=\"item.isPublic ?'공개':'비공개'\"-->\n          </v-switch>\n        </template>\n        <template v-slot:item.isPublicText=\"{ item }\">\n          {{ item.isPublic ?'공개':'비공개' }}\n        </template>\n\n      </v-data-table>\n\n<!--      <div class=\"text-center pt-2\">-->\n<!--        <v-btn-->\n<!--          color=\"primary\"-->\n<!--          class=\"mr-2\"-->\n<!--          @click=\"saveEvent\"-->\n<!--        >-->\n<!--          저장-->\n<!--        </v-btn>-->\n<!--      </div>-->\n    </v-card>\n\n\n  </div>\n</template>\n\n<script>\nimport EndpointApi from '../../api/EndpointApi';\nimport _ from \"lodash\";\n\nexport default {\n  props: {\n    headers: {\n      type: Array,\n      default: () => ([\n        {text: '공개', value: 'isPublicText', align: 'center'},\n        {text: 'uri', value: 'uri', align: 'left'},\n        {text: 'http method', value: 'httpMethod', align: 'left'},\n        {text: 'api title', value: 'operationDescription', align: 'left'},\n        {text: 'resource title', value: 'resourceDescription', align: 'left'}\n      ])\n    },\n    selectedEndpoint: {\n      type: Array\n    }\n  },\n  watch: {\n    selectedEndpoint: {\n      handler(nv) {\n        this.selected = nv.map(v => {\n          return Object.assign(v, {'itemKey' : v.uri + '_' + v.httpMethod})\n        })??[]\n        // console.log(nv)\n      }\n    },\n    searchSelected: {\n      handler(nv) {\n        if(nv) {\n          this.copiedEndpoints = _.cloneDeep(this.endpoints)\n          this.endpoints = this.endpoints.filter(e => this.selected.map(s => s.itemKey).includes(e.itemKey))\n        } else {\n          this.endpoints = _.cloneDeep(this.copiedEndpoints)\n        }\n      }\n    }\n  },\n  data() {\n    return {\n      breadcrumbs: [{\n        text: '엔드포인트 관리',\n        disabled: false,\n        href: '#'\n      }, {\n        text: '엔드포인트 목록'\n      }],\n      searchSelected: false,\n      search: '',\n      // headers: ,\n      options: {\n        page: 1,\n        itemsPerPage: 5\n      },\n      selected: [],\n      endpoints: [],\n      copiedEndpoints: [],\n      totalCount: null,\n      dialog: false,\n      rules: {\n      }\n    }\n  },\n  methods: {\n    saveEvent() {\n      this.$emit('callback-save-event', this.selected);\n    },\n    async getEndpoints() {\n\n      await Promise.all([EndpointApi.getPublicEndpoints(), EndpointApi.getEndpoints()])\n        .then(([ps, endpoints]) => {\n          const publicEndpoints = ps.map(p => p.endpoint);\n          this.endpoints = endpoints.map(ele => {\n            ele.isPublic = !!publicEndpoints.find(pe => pe.uri === ele.uri && pe.httpMethod === ele.httpMethod);\n            ele.itemKey = ele.uri + '_' + ele.httpMethod\n            ele.isPublicText = ele.isPublic ?'공개':'비공개'\n            return ele;\n          });\n      })\n\n    },\n\n  },\n  created() {\n    this.getEndpoints();\n  }\n\n};\n</script>\n"]}]}