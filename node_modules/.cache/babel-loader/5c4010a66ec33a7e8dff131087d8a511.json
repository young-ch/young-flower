{"remainingRequest":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/babel-loader/lib/index.js!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/apps/menu/Menus.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/apps/menu/Menus.vue","mtime":1665995886867},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/babel.config.js","mtime":1665531625438},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/babel-loader/lib/index.js","mtime":1665531751248},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js","mtime":1665531752006}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHJ1bGVzIGZyb20gIkAvdXRpbHMvcnVsZXMiOwppbXBvcnQgbWVudUFwaSBmcm9tICdAL2FwaS9NZW51QXBpJzsKaW1wb3J0IENvbnRlbnRBcGkgZnJvbSAnQC9hcGkvQ29udGVudEFwaSc7CmltcG9ydCBCb2FyZEFwaSBmcm9tICdAL2FwaS9Cb2FyZEFwaSc7CmltcG9ydCBfIGZyb20gImxvZGFzaCI7CmltcG9ydCBMaXF1b3JUcmVlIGZyb20gJ2xpcXVvci10cmVlJzsKaW1wb3J0IHZ1ZTJEcm9wem9uZSBmcm9tICd2dWUyLWRyb3B6b25lJzsKaW1wb3J0ICd2dWUyLWRyb3B6b25lL2Rpc3QvdnVlMkRyb3B6b25lLm1pbi5jc3MnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgW0xpcXVvclRyZWUubmFtZV06IExpcXVvclRyZWUsCiAgICB2dWVEcm9wem9uZTogdnVlMkRyb3B6b25lCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgbWVudTogewogICAgICAgIG1lbnVOYW1lOiBudWxsLAogICAgICAgIG1lbnVJbWFnZTogbnVsbCwKICAgICAgICBtZW51VHlwZTogIlRZUEVfTElOSyIsCiAgICAgICAgdXJsOiBudWxsLAogICAgICAgIGFjdGl2YXRlZDogbnVsbCwKICAgICAgICBwcm90ZWN0ZWQ6IG51bGwsCiAgICAgICAgY29udGVudElkOiBudWxsLAogICAgICAgIGJvYXJkSWQ6IG51bGwKICAgICAgfSwKICAgICAgcm93czogW10sCiAgICAgIHRyZWVGaWx0ZXI6IG51bGwsCiAgICAgIGF0dGFjaG1lbnRQYXRoOiBwcm9jZXNzLmVudi5WVUVfQVBQX0FUVEFDSF9GSUxFX1NFUlZFUl9VUkwsCiAgICAgIHNlYXJjaEtleXdvcmQ6IG51bGwsCiAgICAgIHN0YW5kYWxvbmVJZHM6IFtdLAogICAgICBleGNlcHRlZElkczogW10sCiAgICAgIHNlYXJjaE9wZW46IFtdLAogICAgICBsYXN0T3BlbjogW10sCiAgICAgIGFsbE9wZW5lZDogZmFsc2UsCiAgICAgIHRhYjogbnVsbCwKICAgICAgcnVsZXMsCiAgICAgIGlzTG9hZGluZzogZmFsc2UsCiAgICAgIGJyZWFkY3J1bWJzOiBbewogICAgICAgIHRleHQ6ICfrqZTribQg6rSA66asJywKICAgICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgICAgaHJlZjogJyMnCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAn66mU64m0IOuqqeuhnScKICAgICAgfV0sCiAgICAgIHdhaXRpbmdTZWFyY2g6IGZhbHNlLAogICAgICBtZXNzYWdlOiB7CiAgICAgICAgZXJyb3I6ICcnLAogICAgICAgIHN1Y2Nlc3M6ICcnCiAgICAgIH0sCiAgICAgIG9wdGlvbnM6IHsKICAgICAgICBzaXplOiAxMAogICAgICB9LAogICAgICBwYXJhbToge30sCiAgICAgIHRvdGFsSXRlbXM6IDAsCiAgICAgIGRhdGFzZXRzOiBbXSwKICAgICAgY29tcGFuaW9uTmFtZToge30sCiAgICAgIG9yaWdpbjoge30sCiAgICAgIGhhc01lbnVzOiBbXSwKICAgICAgbWVudXM6IFtdLAogICAgICB0cmVlT3B0aW9uczogewogICAgICAgIHBhcmVudFNlbGVjdDogdHJ1ZSwKICAgICAgICAvLyBwcm9wZXJ0eU5hbWVzOiB7CiAgICAgICAgLy8gICBzdGF0ZXM6ICdvcHRpb25zJywKICAgICAgICAvLyAgIHRleHQ6ICJ0ZXh0IiwKICAgICAgICAvLyAgIGNoaWxkcmVuOiAiY2hpbGRyZW4iCiAgICAgICAgLy8gfSwKICAgICAgICBkbmQ6IHRydWUsCiAgICAgICAgY2hlY2tib3g6IGZhbHNlLAogICAgICAgIGZpbHRlcjogewogICAgICAgICAgbWF0Y2hlcihxdWVyeSwgbm9kZSkgewogICAgICAgICAgICByZXR1cm4gbmV3IFJlZ0V4cChxdWVyeSwgJ2knKS50ZXN0KG5vZGUuZGF0YS5tZW51TmFtZSk7CiAgICAgICAgICB9LAogICAgICAgICAgZW1wdHlUZXh0OiAn7J287LmY7ZWY64qUIOuplOuJtOqwgCDsl4bsirXri4jri6QuJywKICAgICAgICAgIHBsYWluTGlzdDogdHJ1ZSwKICAgICAgICAgIHNob3dDaGlsZHJlbjogdHJ1ZQogICAgICAgIH0KICAgICAgfSwKICAgICAgcGFyZW50OiB7fSwKICAgICAgaXNNb2RpZnk6IGZhbHNlLAogICAgICB0cmVlSXRlbTogbnVsbCwKICAgICAgc2VhcmNoUm9sZUlkOiBudWxsLAogICAgICBib2FyZHM6IFtdLAogICAgICBjb250ZW50czogW10KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgZHJvcHpvbmVPcHRpb25zKCkgewogICAgICB2YXIgX3RoaXMkJHN0b3JlJGdldHRlcnMkLCBfdGhpcyQkc3RvcmUsIF90aGlzJCRzdG9yZSRnZXR0ZXJzOwogICAgICByZXR1cm4gewogICAgICAgIHVybDogYCR7cHJvY2Vzcy5lbnYuVlVFX0FQUF9HV19VUkx9L21lbnVzL21lbnUvaW1hZ2UvdXBsb2FkYCwKICAgICAgICB0aHVtYm5haWxIZWlnaHQ6IDExMCwKICAgICAgICB0aHVtYm5haWxXaWR0aDogMTQwLAogICAgICAgIG1heEZpbGVzaXplOiAxMCwKICAgICAgICAvLyBtYgogICAgICAgIG1heEZpbGVzOiAyLAogICAgICAgIC8vIGFjY2VwdGVkRmlsZVR5cGVzOiAiaW1hZ2UvKiIsCiAgICAgICAgYWNjZXB0ZWRGaWxlczogImltYWdlLyoiLAogICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYGJlYXJlciAkeyhfdGhpcyQkc3RvcmUkZ2V0dGVycyQgPSB0aGlzID09PSBudWxsIHx8IHRoaXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IChfdGhpcyQkc3RvcmUgPSB0aGlzLiRzdG9yZSkgPT09IG51bGwgfHwgX3RoaXMkJHN0b3JlID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RoaXMkJHN0b3JlJGdldHRlcnMgPSBfdGhpcyQkc3RvcmUuZ2V0dGVycykgPT09IG51bGwgfHwgX3RoaXMkJHN0b3JlJGdldHRlcnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJCRzdG9yZSRnZXR0ZXJzWyJ1c2VyL3Rva2VuIl0pICE9PSBudWxsICYmIF90aGlzJCRzdG9yZSRnZXR0ZXJzJCAhPT0gdm9pZCAwID8gX3RoaXMkJHN0b3JlJGdldHRlcnMkIDogJyd9YAogICAgICAgIH0sCiAgICAgICAgdXBsb2FkTXVsdGlwbGU6IGZhbHNlLAogICAgICAgIGNsaWNrYWJsZTogdHJ1ZSwKICAgICAgICBhZGRSZW1vdmVMaW5rczogdHJ1ZQogICAgICB9OwogICAgfQogIH0sCiAgd2F0Y2g6IHt9LAogIG1ldGhvZHM6IHsKICAgIGRyb3B6b25lVXBsb2FkU3VjY2Vzcyh1cGxvYWRlZEZpbGVJbmZvLCByZXMpIHsKICAgICAgY29uc3QgcmVqZWN0ZWRGaWxlcyA9IHRoaXMuJHJlZnMubWVudUltYWdlRHJvcHpvbmUuZ2V0UmVqZWN0ZWRGaWxlcygpOwogICAgICBmb3IgKGNvbnN0IGYgb2YgcmVqZWN0ZWRGaWxlcykgewogICAgICAgIHRoaXMuJHJlZnMubWVudUltYWdlRHJvcHpvbmUucmVtb3ZlRmlsZShmKTsKICAgICAgfQogICAgICBjb25zdCBhY2NlcHRlZEZpbGVzID0gdGhpcy4kcmVmcy5tZW51SW1hZ2VEcm9wem9uZS5nZXRBY2NlcHRlZEZpbGVzKCk7CiAgICAgIGZvciAoY29uc3QgZiBvZiBhY2NlcHRlZEZpbGVzKSB7CiAgICAgICAgaWYgKGYgIT09IHVwbG9hZGVkRmlsZUluZm8pIHRoaXMuJHJlZnMubWVudUltYWdlRHJvcHpvbmUucmVtb3ZlRmlsZShmKTsKICAgICAgfQogICAgICB0aGlzLm1lbnUubWVudUltYWdlID0gcmVzLnNhdmVOYW1lOwogICAgfSwKICAgIGRyb3B6b25lVXBsb2FkQ29tcGxldGVTdWNjZXNzKHJlc3BvbnNlKSB7CiAgICAgIGlmICghcmVzcG9uc2UuYWNjZXB0ZWQpIHsKICAgICAgICBjb25zdCBhY2NlcHRlZEZpbGVzID0gdGhpcy4kcmVmcy5tZW51SW1hZ2VEcm9wem9uZS5nZXRBY2NlcHRlZEZpbGVzKCk7CiAgICAgICAgY29uc3QgcmVqZWN0ZWRGaWxlcyA9IHRoaXMuJHJlZnMubWVudUltYWdlRHJvcHpvbmUuZ2V0UmVqZWN0ZWRGaWxlcygpOwogICAgICAgIGNvbnN0IGFsbEZpbGUgPSBbLi4uYWNjZXB0ZWRGaWxlcywgLi4ucmVqZWN0ZWRGaWxlc107CiAgICAgICAgZm9yIChjb25zdCBmIG9mIGFsbEZpbGUpIHsKICAgICAgICAgIGlmIChmICE9PSByZXNwb25zZSkgewogICAgICAgICAgICB0aGlzLiRyZWZzLm1lbnVJbWFnZURyb3B6b25lLnJlbW92ZUZpbGUoZik7IC8vIGNhbGxiYWNrIC0+IGltYWdlUmVtb3ZlCiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLm1lbnUubWVudUltYWdlKTsKICAgIH0sCgogICAgZHJvcHpvbmVSZW1vdmUoKSB7CiAgICAgIHRoaXMubWVudS5tZW51SW1hZ2UgPSBudWxsOwogICAgfSwKICAgIGRyb3B6b25lUHJvY2Vzc2luZygpIHsKICAgICAgdmFyIF9zZXNzaW9uU3RvcmFnZSRnZXRJdDsKICAgICAgdGhpcy4kcmVmcy5tZW51SW1hZ2VEcm9wem9uZS5zZXRPcHRpb24oJ2hlYWRlcnMnLCB7CiAgICAgICAgQXV0aG9yaXphdGlvbjogYGJlYXJlciAkeyhfc2Vzc2lvblN0b3JhZ2UkZ2V0SXQgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCJYLVRva2VuIikpICE9PSBudWxsICYmIF9zZXNzaW9uU3RvcmFnZSRnZXRJdCAhPT0gdm9pZCAwID8gX3Nlc3Npb25TdG9yYWdlJGdldEl0IDogJyd9YAogICAgICB9KTsKICAgIH0sCiAgICB1cGxvYWRlZFJlbW92ZSgpIHsKICAgICAgdGhpcy5tZW51Lm1lbnVJbWFnZSA9IG51bGw7CiAgICB9LAogICAgYXN5bmMgY2hhbmdlVHJlZURhdGEobWVudUNhdGVnb3J5KSB7CiAgICAgIHZhciBfdGhpcyQkcmVmcywgX3RoaXMkJHJlZnMkbWVudUZvcm07CiAgICAgIChfdGhpcyQkcmVmcyA9IHRoaXMuJHJlZnMpID09PSBudWxsIHx8IF90aGlzJCRyZWZzID09PSB2b2lkIDAgPyB2b2lkIDAgOiAoX3RoaXMkJHJlZnMkbWVudUZvcm0gPSBfdGhpcyQkcmVmcy5tZW51Rm9ybSkgPT09IG51bGwgfHwgX3RoaXMkJHJlZnMkbWVudUZvcm0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJCRyZWZzJG1lbnVGb3JtLnJlc2V0VmFsaWRhdGlvbigpOwogICAgICBjb25zb2xlLmxvZyh0aGlzLiRyZWZzLm1lbnVGb3JtKTsKICAgICAgdGhpcy5tZW51ID0gewogICAgICAgIG1lbnVDYXRlZ29yeTogbWVudUNhdGVnb3J5CiAgICAgIH07CiAgICAgIHRoaXMucGFyZW50ID0ge307CiAgICAgIHRoaXMudHJlZVZpc2libGUgPSBmYWxzZTsKICAgICAgdGhpcy5tZW51cyA9IGF3YWl0IHRoaXMubG9hZFRyZWVEYXRhKG1lbnVDYXRlZ29yeSk7CiAgICAgIHRoaXMudHJlZVZpc2libGUgPSB0cnVlOwogICAgICB0aGlzLiRyZWZzLm1lbnVUcmVlLnNldE1vZGVsKHRoaXMubWVudXMpOwogICAgICAvLyB0aGlzLiRyZWZzLm1lbnVUcmVlLmV4cGFuZEFsbCgpCiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMubWVudXMpCiAgICB9LAoKICAgIGFzeW5jIGdldE1lbnUobm9kZSkgewogICAgICB2YXIgX3RoaXMkJHJlZnMkbWVudUltYWdlOwogICAgICAoX3RoaXMkJHJlZnMkbWVudUltYWdlID0gdGhpcy4kcmVmcy5tZW51SW1hZ2VEcm9wem9uZSkgPT09IG51bGwgfHwgX3RoaXMkJHJlZnMkbWVudUltYWdlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyQkcmVmcyRtZW51SW1hZ2UucmVtb3ZlQWxsRmlsZXMoKTsKICAgICAgaWYgKG5vZGUuc3RhdGVzLnNlbGVjdGVkKSB7CiAgICAgICAgdmFyIF90aGlzJG1lbnUkbWVudUNhdGVnbywgX3RoaXMkbWVudTsKICAgICAgICBhd2FpdCBub2RlLnNlbGVjdChmYWxzZSk7CiAgICAgICAgbm9kZS51bnNlbGVjdCgpOwogICAgICAgIHRoaXMudHJlZUl0ZW0gPSBub2RlOwogICAgICAgIHRoaXMubWVudSA9IHsKICAgICAgICAgICdtZW51Q2F0ZWdvcnknOiAoX3RoaXMkbWVudSRtZW51Q2F0ZWdvID0gKF90aGlzJG1lbnUgPSB0aGlzLm1lbnUpID09PSBudWxsIHx8IF90aGlzJG1lbnUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG1lbnUubWVudUNhdGVnb3J5KSAhPT0gbnVsbCAmJiBfdGhpcyRtZW51JG1lbnVDYXRlZ28gIT09IHZvaWQgMCA/IF90aGlzJG1lbnUkbWVudUNhdGVnbyA6ICcnCiAgICAgICAgfTsKICAgICAgICB0aGlzLnBhcmVudCA9IG51bGw7CiAgICAgICAgdGhpcy5pc01vZGlmeSA9IGZhbHNlOwogICAgICAgIHRoaXMuJHJlZnMubWVudUZvcm0ucmVzZXRWYWxpZGF0aW9uKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy50cmVlSXRlbSA9IG5vZGU7CiAgICAgICAgdGhpcy5tZW51ID0gYXdhaXQgbWVudUFwaS5maW5kTWVudUJ5SWQobm9kZS5kYXRhLmlkKTsKICAgICAgICB0aGlzLnBhcmVudCA9IF8uY2xvbmVEZWVwKHRoaXMubWVudSk7CiAgICAgICAgdGhpcy5pc01vZGlmeSA9IHRydWU7CiAgICAgIH0KICAgIH0sCiAgICBhc3luYyBjcmVhdGVNZW51Rm9ybSgpIHsKICAgICAgdmFyIF90aGlzJG1lbnUkbWVudUNhdGVnbzI7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMubWVudS5tZW51Q2F0ZWdvcnkpOwogICAgICB0aGlzLm1lbnUgPSB7CiAgICAgICAgbWVudUNhdGVnb3J5OiAoX3RoaXMkbWVudSRtZW51Q2F0ZWdvMiA9IHRoaXMubWVudS5tZW51Q2F0ZWdvcnkpICE9PSBudWxsICYmIF90aGlzJG1lbnUkbWVudUNhdGVnbzIgIT09IHZvaWQgMCA/IF90aGlzJG1lbnUkbWVudUNhdGVnbzIgOiAnSE9NRScKICAgICAgfTsKICAgICAgdGhpcy5pc01vZGlmeSA9IGZhbHNlOwogICAgfSwKICAgIGFzeW5jIHNhdmVkTWVudSgpIHsKICAgICAgdmFyIF90aGlzJHBhcmVudCwgX3RoaXMkbWVudSRtZW51Q2F0ZWdvMzsKICAgICAgaWYgKCEoYXdhaXQgdGhpcy4kcmVmcy5tZW51Rm9ybS52YWxpZGF0ZSgpKSkgcmV0dXJuOwogICAgICBpZiAoIXRoaXMubWVudS5wYXJlbnRJZCAmJiAhdGhpcy5pc01vZGlmeSkgdGhpcy5tZW51LnBhcmVudElkID0gKF90aGlzJHBhcmVudCA9IHRoaXMucGFyZW50KSA9PT0gbnVsbCB8fCBfdGhpcyRwYXJlbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHBhcmVudC5pZDsKICAgICAgdGhpcy5tZW51Lm1lbnVDYXRlZ29yeSA9IChfdGhpcyRtZW51JG1lbnVDYXRlZ28zID0gdGhpcy5tZW51Lm1lbnVDYXRlZ29yeSkgIT09IG51bGwgJiYgX3RoaXMkbWVudSRtZW51Q2F0ZWdvMyAhPT0gdm9pZCAwID8gX3RoaXMkbWVudSRtZW51Q2F0ZWdvMyA6ICdIT01FJzsKICAgICAgbWVudUFwaS5zYXZlTWVudSh0aGlzLm1lbnUpLnRoZW4oYXN5bmMgc2F2ZWRNZW51ID0+IHsKICAgICAgICBpZiAodGhpcy5mbGF0TGlzdCh0aGlzLiRyZWZzLm1lbnVUcmVlLmZpbmRBbGwoKS50cmVlLm1vZGVsKS5tYXAodCA9PiB0LmRhdGEuaWQpLmluY2x1ZGVzKHNhdmVkTWVudS5pZCkpIHsKICAgICAgICAgIHRoaXMudHJlZUl0ZW0uZGF0YS5tZW51TmFtZSA9IHNhdmVkTWVudS5tZW51TmFtZTsKICAgICAgICAgIHRoaXMudHJlZUl0ZW0uZGF0YS5hY3RpdmF0ZWQgPSBzYXZlZE1lbnUuYWN0aXZhdGVkOwogICAgICAgICAgdGhpcy50cmVlSXRlbS50ZXh0ID0gc2F2ZWRNZW51Lm1lbnVOYW1lOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBsZXQgaXRlbSA9IHsKICAgICAgICAgICAgdGV4dDogc2F2ZWRNZW51Lm1lbnVOYW1lLAogICAgICAgICAgICBkYXRhOiB7CiAgICAgICAgICAgICAgaWQ6IHNhdmVkTWVudS5pZCwKICAgICAgICAgICAgICBtZW51TmFtZTogc2F2ZWRNZW51Lm1lbnVOYW1lLAogICAgICAgICAgICAgIGFjdGl2YXRlZDogc2F2ZWRNZW51LmFjdGl2YXRlZCwKICAgICAgICAgICAgICBwcm90ZWN0ZWQ6IHNhdmVkTWVudS5wcm90ZWN0ZWQsCiAgICAgICAgICAgICAgdGV4dDogc2F2ZWRNZW51Lm1lbnVOYW1lCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG1lbnVOYW1lOiBzYXZlZE1lbnUubWVudU5hbWUsCiAgICAgICAgICAgIHN0YXRlOiB7CiAgICAgICAgICAgICAgc2VsZWN0ZWQ6IGZhbHNlCiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgICBpZiAoc2F2ZWRNZW51LnBhcmVudElkKSB7CiAgICAgICAgICAgIHRoaXMudHJlZUl0ZW0uc3RhdGVzLmV4cGFuZGVkID0gdHJ1ZTsKICAgICAgICAgICAgY29uc3QgcGFyZW50Tm9kZSA9IHRoaXMuJHJlZnMubWVudVRyZWUuZmluZCh7CiAgICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgICAgaWQ6IHNhdmVkTWVudS5wYXJlbnRJZAogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSlbMF07CiAgICAgICAgICAgIHBhcmVudE5vZGUuYXBwZW5kKGl0ZW0pOwogICAgICAgICAgICAvLyB0aGlzLnRyZWVJdGVtID0gdGhpcy4kcmVmcy5tZW51VHJlZS5hcHBlbmQocGFyZW50Tm9kZSwgaXRlbSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygiLS0tLS0tLS0tLS0tLS0iKQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhpdGVtKTsKICAgICAgICAgICAgdGhpcy50cmVlSXRlbSA9IGF3YWl0IHRoaXMuJHJlZnMubWVudVRyZWUuYXBwZW5kKGl0ZW0pOwogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnRyZWVJdGVtKTsKICAgICAgICAgICAgLy8gYXdhaXQgdGhpcy5jaGFuZ2VUcmVlRGF0YShzYXZlZE1lbnUubWVudUNhdGVnb3J5KTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHRoaXMubWVudSA9IHNhdmVkTWVudTsKICAgICAgICB0aGlzLm1lbnUuY2hpbGRNZW51cyA9IFtdOwogICAgICAgIHRoaXMubWVudSA9IGF3YWl0IG1lbnVBcGkuZmluZE1lbnVCeUlkKHNhdmVkTWVudS5pZCk7CiAgICAgICAgdGhpcy5pc01vZGlmeSA9IHRydWU7CiAgICAgICAgYWxlcnQoIuyggOyepeuQmOyXiOyKteuLiOuLpC4iKTsKICAgICAgfSk7CiAgICB9LAogICAgZGVsZXRlTWVudSgpIHsKICAgICAgdmFyIF90aGlzJG1lbnUkY2hpbGRNZW51cywgX3RoaXMkbWVudSRjaGlsZE1lbnVzMjsKICAgICAgaWYgKChfdGhpcyRtZW51JGNoaWxkTWVudXMgPSAoX3RoaXMkbWVudSRjaGlsZE1lbnVzMiA9IHRoaXMubWVudS5jaGlsZE1lbnVzKSA9PT0gbnVsbCB8fCBfdGhpcyRtZW51JGNoaWxkTWVudXMyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRtZW51JGNoaWxkTWVudXMyLmxlbmd0aCkgIT09IG51bGwgJiYgX3RoaXMkbWVudSRjaGlsZE1lbnVzICE9PSB2b2lkIDAgPyBfdGhpcyRtZW51JGNoaWxkTWVudXMgOiAwICE9PSAwKSB7CiAgICAgICAgYWxlcnQoIu2VmOychCDrqZTribTqsIAg7KG07J6s7ZWp64uI64ukLiIpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBpZiAoY29uZmlybSgi7ZW064u5IOuplOuJtOulvCDsgq3soJztlZjsi5zqsqDsirXri4jquYw/IikpIHsKICAgICAgICBtZW51QXBpLmRlbGV0ZU1lbnUodGhpcy5tZW51LmlkKS50aGVuKCgpID0+IHsKICAgICAgICAgIHRoaXMuJHJlZnMubWVudUZvcm0ucmVzZXRWYWxpZGF0aW9uKCk7CiAgICAgICAgICB0aGlzLm1lbnUgPSB7fTsKICAgICAgICAgIHRoaXMucGFyZW50ID0gbnVsbDsKICAgICAgICAgIHRoaXMudHJlZUl0ZW0ucmVtb3ZlKCk7CiAgICAgICAgICB0aGlzLmlzTW9kaWZ5ID0gZmFsc2U7CiAgICAgICAgICBhbGVydCgi7IKt7KCc65CY7JeI7Iq164uI64ukLiIpOwogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgcmVzZXRNZW51KGlkKSB7CiAgICAgIGlmIChpZCkgewogICAgICAgIHRoaXMubWVudSA9IGF3YWl0IG1lbnVBcGkuZmluZE1lbnVCeUlkKGlkKTsKICAgICAgICB0aGlzLnBhcmVudCA9IF8uY2xvbmVEZWVwKHRoaXMubWVudSk7CiAgICAgICAgdGhpcy5pc01vZGlmeSA9IHRydWU7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5tZW51ID0ge307CiAgICAgICAgdGhpcy5wYXJlbnQgPSBudWxsOwogICAgICAgIHRoaXMuaXNNb2RpZnkgPSBmYWxzZTsKICAgICAgICB0aGlzLiRyZWZzLm1lbnVGb3JtLnJlc2V0VmFsaWRhdGlvbigpOwogICAgICB9CiAgICB9LAogICAgYXN5bmMgbW92ZU1lbnUoc291cmNlTm9kZSwgZGVzdGluYXRpb25Ob2RlLCBwb3MpIHsKICAgICAgbGV0IHBvc2l0aW9uID0gbmV3IE1hcCgpOwogICAgICBwb3NpdGlvbi5zZXQoJ2RyYWctYWJvdmUnLCAnVVAnKTsKICAgICAgcG9zaXRpb24uc2V0KCdkcmFnLWJlbG93JywgJ0RPV04nKTsKICAgICAgcG9zaXRpb24uc2V0KCdkcmFnLW9uJywgJ0lOJyk7CiAgICAgIGF3YWl0IG1lbnVBcGkubW92ZU1lbnUoc291cmNlTm9kZS5kYXRhLmlkLCBkZXN0aW5hdGlvbk5vZGUuZGF0YS5pZCwgcG9zaXRpb24uZ2V0KHBvcykpOwogICAgfSwKICAgIGZsYXRMaXN0KGl0ZW1zKSB7CiAgICAgIGNvbnNvbGUubG9nKGl0ZW1zKTsKICAgICAgaWYgKGl0ZW1zICYmIGl0ZW1zLmxlbmd0aCA+IDApIHsKICAgICAgICByZXR1cm4gaXRlbXMuZmxhdE1hcChpID0+IHsKICAgICAgICAgIGlmIChpLmNoaWxkcmVuICYmIGkuY2hpbGRyZW4ubGVuZ3RoID4gMCkgewogICAgICAgICAgICByZXR1cm4gW3RoaXMuZmxhdExpc3QoaS5jaGlsZHJlbiksIGldLmZsYXRNYXAoaSA9PiBpKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBbaV07CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSByZXR1cm4gW107CiAgICB9LAogICAgYXN5bmMgbG9hZFRyZWVEYXRhKGNhdGVnb3J5KSB7CiAgICAgIGxldCB0ZW1wID0gYXdhaXQgbWVudUFwaS5maW5kTWVudXNCeUNhdGVnb3J5KGNhdGVnb3J5KTsKICAgICAgdGVtcC5mb3JFYWNoKHQgPT4gdGhpcy5yZWN1cnNpdmVHZW5lcmF0ZWRUcmVlKHQsIDEpKTsKICAgICAgcmV0dXJuIHRlbXA7CiAgICB9LAogICAgcmVjdXJzaXZlR2VuZXJhdGVkVHJlZShpdGVtLCBkZXB0aCkgewogICAgICB2YXIgX2l0ZW0kY2hpbGRNZW51czsKICAgICAgaXRlbS5kYXRhID0gewogICAgICAgIGlkOiBpdGVtLmlkLAogICAgICAgIG1lbnVOYW1lOiBpdGVtLm1lbnVOYW1lLAogICAgICAgIG1lbnVJY29uOiBpdGVtLm1lbnVJY29uLAogICAgICAgIGFjdGl2YXRlZDogaXRlbS5hY3RpdmF0ZWQsCiAgICAgICAgcHJvdGVjdGVkOiBpdGVtLnByb3RlY3RlZAogICAgICB9OwogICAgICBpdGVtLnRleHQgPSBpdGVtLm1lbnVOYW1lOwoKICAgICAgLy8gaXRlbS5vcHRpb25zID0ge2V4cGFuZGVkOiB0cnVlLCBkcm9wYWJsZTogdHJ1ZSwgZHJhZ2dhYmxlOiB0cnVlfTsKICAgICAgaXRlbS5zdGF0ZSA9IHsKICAgICAgICBleHBhbmRlZDogdHJ1ZSwKICAgICAgICBkcm9wYWJsZTogdHJ1ZSwKICAgICAgICBkcmFnZ2FibGU6IHRydWUKICAgICAgfTsKICAgICAgKF9pdGVtJGNoaWxkTWVudXMgPSBpdGVtLmNoaWxkTWVudXMpID09PSBudWxsIHx8IF9pdGVtJGNoaWxkTWVudXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9pdGVtJGNoaWxkTWVudXMuZm9yRWFjaCh0ID0+IHRoaXMucmVjdXJzaXZlR2VuZXJhdGVkVHJlZSh0LCBkZXB0aCArIDEpKTsKICAgICAgaXRlbS5jaGlsZHJlbiA9IGl0ZW0uY2hpbGRNZW51czsKICAgIH0KICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmxvYWRUcmVlRGF0YSgnSE9NRScpLnRoZW4oYXN5bmMgZGF0YSA9PiB7CiAgICAgIHRoaXMubWVudXMgPSB0aGlzLiRyZWZzLm1lbnVUcmVlLnRyZWUucGFyc2UoZGF0YSk7CiAgICAgIC8vIHRoaXMuJHNldCh0aGlzLiRyZWZzLm1lbnVUcmVlLCAnbW9kZWwnLCB0aGlzLm1lbnVzKTsKICAgICAgdGhpcy4kcmVmcy5tZW51VHJlZS5zZXRNb2RlbCh0aGlzLm1lbnVzKTsKICAgICAgdGhpcy4kcmVmcy5tZW51VHJlZS5leHBhbmRBbGwoKTsKICAgIH0pOwoKICAgIC8vIGNvbnN0IGFkbWluVHJlZSA9IHRoaXMuJHJlZnMuYWRtaW5NZW51VHJlZS50cmVlCgogICAgLy8gdGhpcy5sb2FkVHJlZURhdGEoJ0FETUlOJykudGhlbihkYXRhID0+IHsKICAgIC8vICAgdGhpcy5hZG1pbk1lbnVzID0gdGhpcy4kcmVmcy5hZG1pbk1lbnVUcmVlLnRyZWUucGFyc2UoZGF0YSk7CiAgICAvLyAgIHRoaXMuJHNldCh0aGlzLiRyZWZzLmFkbWluTWVudVRyZWUsICdtb2RlbCcsIHRoaXMuYWRtaW5NZW51cyk7CiAgICAvLyB9KTsKCiAgICAvLyB0aGlzLm1lbnVzID0gYXdhaXQgdGhpcy5tZW51czsKICB9LAoKICBjcmVhdGVkKCkgewogICAgQ29udGVudEFwaS5maW5kQ29udGVudHMoKS50aGVuKGRhdGEgPT4gewogICAgICB0aGlzLmNvbnRlbnRzID0gZGF0YS5jb250ZW50LmZpbHRlcihwID0+IHAuYWN0aXZhdGVkKTsKICAgIH0pOwogICAgQm9hcmRBcGkuZmluZEFsbCgpLnRoZW4oZGF0YSA9PiB7CiAgICAgIHRoaXMuYm9hcmRzID0gZGF0YTsKICAgIH0pOwogIH0KfTs="},{"version":3,"mappings":"AAsRA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;EACAA;IACA;IACAC;EACA;EACAC;IACA;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;MACA;QACAF;MACA;MACAG;MACAC;QACAC;QACAC;MACA;MACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MAEAC;MACAC;MACAC;QACAC;QACA;QACA;QACA;QACA;QACA;QACAC;QACAC;QACAC;UACAC;YACA;UACA;UACAC;UACAC;UACAC;QAEA;MACA;MAEAC;MACAC;MACAC;MACAC;MAEAC;MACAC;IAEA;EACA;EACAC;IACAC;MAAA;MACA;QACAlD;QACAmD;QACAC;QACAC;QAAA;QACAC;QACA;QACAC;QACAC;UACA;QACA;QACAC;QACAC;QACAC;MACA;IACA;EACA;EACAC,QACA;EACAC;IACAC;MAEA;MACA;QACA;MACA;MAEA;MACA;QACA,4BACA;MACA;MAEA;IAEA;IACAC;MAEA;QACA;QACA;QACA;QACA;UACA;YACA;UACA;QACA;MACA;;MAEA;IACA;;IACAC;MACA;IACA;IACAC;MAAA;MACA;QAAAC;MAAA;IACA;IAGAC;MACA;IACA;IAEA;MAAA;MACA;MAEAC;MAEA;QACAC;MACA;MACA;MACA;MACA;MACA;MAEA;MACA;MACA;IACA;;IACA;MAAA;MAEA;MAEA;QAAA;QAEA;QACAC;QAEA;QACA;UAAA;QAAA;QACA;QACA;QACA;MACA;QACA;QACA;QACA;QACA;MACA;IACA;IACA;MAAA;MACAF;MAEA;QACAC;MACA;MACA;IACA;IACA;MAAA;MAEA,6CACA;MAEA,2CACA;MAEA;MACAE;QACA;UAEA;UACA;UACA;QAEA;UAEA;YACArD;YACAvB;cACA6E;cACA3E;cACAI;cACAC;cACAgB;YACA;YACArB;YACA4E;cAAAC;YAAA;UACA;UAEA;YACA;YACA;cACA/E;gBACA6E;cACA;YACA;YAEAG;YACA;UACA;YACA;YACA;YACA;YACA;YACA;UACA;QACA;;QAEA;QACA;QAEA;QACA;QAEAC;MACA;IAEA;IACAC;MAAA;MACA;QACAD;QACA;MACA;MACA;QACAL;UACA;UAEA;UACA;UACA;UACA;UAEAK;QACA;MACA;IAEA;IACA;MACA;QACA;QACA;QACA;MACA;QACA;QACA;QACA;QACA;MACA;IACA;IACA;MACA;MACAE;MACAA;MACAA;MAEA;IACA;IACAC;MACAX;MACA;QACA;UAEA;YACA;UACA;YACA;UACA;QAEA;MACA,OACA;IACA;IACA;MACA;MACAY;MACA;IACA;IACAC;MAAA;MACAC;QACAV;QACA3E;QACAsF;QACAlF;QACAC;MACA;MACAgF;;MAGA;MACAA;QAAAE;QAAAC;QAAAC;MAAA;MACA;MACAJ;IAGA;EACA;EACAK;IACA;MACA;MACA;MACA;MACA;IACA;;IAEA;;IAEA;IACA;IACA;IACA;;IAEA;EACA;;EACAC;IACAC;MACA;IACA;IACAC;MACA;IACA;EACA;AACA","names":["components","vueDropzone","data","menu","menuName","menuImage","menuType","url","activated","protected","contentId","boardId","rows","treeFilter","attachmentPath","searchKeyword","standaloneIds","exceptedIds","searchOpen","lastOpen","allOpened","tab","rules","isLoading","breadcrumbs","text","disabled","href","waitingSearch","message","error","success","options","size","param","totalItems","datasets","companionName","origin","hasMenus","menus","treeOptions","parentSelect","dnd","checkbox","filter","matcher","emptyText","plainList","showChildren","parent","isModify","treeItem","searchRoleId","boards","contents","computed","dropzoneOptions","thumbnailHeight","thumbnailWidth","maxFilesize","maxFiles","acceptedFiles","headers","uploadMultiple","clickable","addRemoveLinks","watch","methods","dropzoneUploadSuccess","dropzoneUploadCompleteSuccess","dropzoneRemove","dropzoneProcessing","Authorization","uploadedRemove","console","menuCategory","node","menuApi","id","state","selected","parentNode","alert","deleteMenu","position","flatList","temp","recursiveGeneratedTree","item","menuIcon","expanded","dropable","draggable","mounted","created","ContentApi","BoardApi"],"sourceRoot":"src/apps/menu","sources":["Menus.vue"],"sourcesContent":["<template>\n  <div class=\"d-flex flex-column flex-grow-1\">\n    <div class=\"d-flex align-center py-3\">\n      <div>\n        <div class=\"display-1\">메뉴 관리</div>\n        <v-breadcrumbs :items=\"breadcrumbs\" class=\"pa-0 py-2\"></v-breadcrumbs>\n      </div>\n      <v-spacer></v-spacer>\n      <v-btn color=\"red\" dark @click=\"deleteMenu\" v-if=\"isModify\" style=\"margin-right: 1rem\">\n        <v-icon left>mdi mdi-delete</v-icon>\n        삭제\n      </v-btn>\n      <v-btn @click=\"resetMenu(menu.id)\">\n        <v-icon left>mdi-refresh</v-icon>\n        리셋\n      </v-btn>\n      <v-btn color=\"indigo\" @click=\"savedMenu\" style=\"margin-left: 1rem\" dark>\n        <v-icon left>mdi mdi-content-save</v-icon>\n        저장\n      </v-btn>\n    </div>\n\n    <v-row>\n      <v-col md=\"3\">\n\n        <v-card>\n          <v-card-title>메뉴 목록</v-card-title>\n          <v-card-text>\n\n            <v-card-actions class=\"justify-end\">\n              <v-btn color=\"primary\" @click=\"createMenuForm\">\n                <v-icon small>mdi-plus</v-icon>\n                메뉴 추가\n              </v-btn>\n            </v-card-actions>\n\n            <div class=\"flex-column flex-sm-row\">\n\n              <v-tabs>\n                <v-tab @click=\"changeTreeData('HOME')\">HOME</v-tab>\n                <v-tab @click=\"changeTreeData('ADMIN')\">ADMIN</v-tab>\n<!--                <v-tab @click=\"changeTreeData('MOBILE')\">MOBILE</v-tab>-->\n              </v-tabs>\n\n              <v-text-field v-model=\"treeFilter\" label=\"검색할 메뉴명을 입력해주세요.\" dense clearable outlined style=\"padding-top: 10px \"/>\n              <tree\n                ref=\"menuTree\"\n                :filter=\"treeFilter\"\n                :options=\"treeOptions\"\n                @node:clicked=\"getMenu\"\n                @node:dragging:finish=\"moveMenu\"\n              >\n\n                <span slot-scope=\"{ node }\">\n    <!--              <template v-if=\"!node.hasChildren()\">-->\n                  <!--                <i :class=\"[node.data.activated ? 'fa fa-check-circle' : 'fa fa-ban']\"></i>-->\n                  <!--                {{ node.text }}-->\n                  <!--              </template>-->\n\n                  <!--              <template v-else>-->\n                  <v-btn text>\n    <!--                <i :class=\"[node.data.menuIcon ? node.data.menuIcon : node.data.activated ? 'fa fa-check-circle' : 'fa fa-ban']\"></i>-->\n                    <v-icon small left>{{ node.data.menuIcon ? node.data.menuIcon : node.data.activated ? 'fa fa-check-circle' : 'fa fa-ban' }}</v-icon>\n                    {{ node.text }}\n                    <v-icon small right>{{ node.data.protected ? 'mdi mdi-lock' : 'mdi mdi-lock-open-outline' }}</v-icon>\n                  </v-btn>\n\n                </span>\n\n              </tree>\n\n              <v-card-actions class=\"justify-end\">\n                <v-btn color=\"primary\" @click=\"createMenuForm\">\n                  <v-icon small>mdi-plus</v-icon>\n                  메뉴 추가\n                </v-btn>\n              </v-card-actions>\n\n            </div>\n          </v-card-text>\n        </v-card>\n\n      </v-col>\n\n      <v-col md=\"9\">\n        <v-card>\n          <v-card-title>{{ isModify ? '메뉴 수정' : '메뉴 추가'}}</v-card-title>\n          <!-- names -->\n          <v-form ref=\"menuForm\">\n<!--            <div class=\"d-flex\">-->\n\n            <div class=\"d-flex\">\n              <v-col sm=\"4\">\n\n                <v-row v-if=\"!isModify && parent && Object.keys(parent).length > 0\">\n                  <v-col>\n                    상위 메뉴\n                    <div style=\"padding-left: 22px\">\n                      {{ parent.menuName }}\n                    </div>\n                  </v-col>\n                </v-row>\n\n                <vue-dropzone\n                  v-if=\"!menu.menuCategory || menu.menuCategory === 'HOME' \"\n                  ref=\"menuImageDropzone\"\n                  id=\"dropzone\"\n                  :style=\"'background-color: #ffffff !important;'\"\n                  :options=\"dropzoneOptions\"\n                  :useCustomSlot=\"true\"\n                  @vdropzone-success=\"dropzoneUploadSuccess\"\n                  @vdropzone-complete=\"dropzoneUploadCompleteSuccess\"\n                  @vdropzone-removed-file=\"dropzoneRemove\"\n                  @vdropzone-processing=\"dropzoneProcessing\"\n                >\n                  <div v-if=\"menu.menuImage\" style=\"margin-top: -40px; max-height: 197px\">\n                    <v-badge\n                      bordered\n                      dark\n                      color=\"black\"\n                      icon=\"mdi-delete\"\n                      overlap\n                      @click.native=\"dropzoneRemove\"\n                    >\n                      <v-img :src=\"`${attachmentPath}/menu/${menu.menuImage}`\" max-width=\"200\" max-height=\"150\"/>\n                    </v-badge>\n                  </div>\n                  <div v-else class=\"dropzone-custom-content\">\n                    <h3 class=\"dropzone-custom-title\">메뉴 이미지</h3>\n                    <div class=\"subtitle\">Drag and drop or click to select a file from your computer</div>\n                  </div>\n                </vue-dropzone>\n\n                <v-row v-if=\"menu.menuCategory === 'ADMIN' \">\n                  <v-col>\n<!--                    메뉴 icon css-->\n                    <v-text-field v-model=\"menu.menuIcon\" label=\"메뉴 icon\"\n                                  dense clearable required\n                                  maxlength=\"100\">\n                      <v-icon\n                        slot=\"prepend\"\n\n                      >{{menu.menuIcon}}</v-icon>\n                    </v-text-field>\n                  </v-col>\n                </v-row>\n\n              </v-col>\n\n              <v-col sm=\"8\">\n                <v-row>\n                  <v-col>\n                    메뉴 명\n                    <div style=\"padding-left: 22px\">\n                        <v-text-field v-model=\"menu.menuName\" label=\"메뉴 명을 입력해주세요.\"\n                                      dense clearable required outlined\n                                      maxlength=\"100\"\n                                      :rules=\"[() => !!menu.menuName || '메뉴 명을 입력해주세요.']\"/>\n                    </div>\n                  </v-col>\n                </v-row>\n\n                <v-row>\n                  <v-col cols=\"6\">\n                    메뉴 사용 여부\n                    <div style=\"padding-left: 22px\">\n                      <v-switch\n                        v-model=\"menu.activated\"\n                        flat\n                        color=\"primary\"\n                        :label=\"menu.activated ? '메뉴 사용' : '메뉴 사용 안함'\"\n                      ></v-switch>\n                    </div>\n                  </v-col>\n                  <v-col cols=\"6\">\n                    접근 제어\n                    <div style=\"padding-left: 22px\">\n                      <v-switch\n                        v-model=\"menu.protected\"\n                        flat\n                        color=\"primary\"\n                        :label=\"menu.protected ? '권한 필요' : '공개'\"\n                      ></v-switch>\n                    </div>\n                  </v-col>\n                </v-row>\n\n              </v-col>\n            </div>\n<!--            </div>-->\n\n            <div class=\"d-flex\">\n              <v-col sm=\"4\">\n                메뉴 타입\n                <div style=\"padding-left: 22px;\" class=\"d-flex\">\n                  <v-checkbox v-model=\"menu.menuType\" value=\"TYPE_BOARD\" label=\"게시판\" style=\"padding-right: 10px\" :rules=\"[() => !!menu.menuType || '메뉴타입을 선택해주세요.']\"></v-checkbox>\n                  <v-checkbox v-model=\"menu.menuType\" value=\"TYPE_PAGE\" label=\"정적페이지\" style=\"padding-right: 10px\" :rules=\"[() => !!menu.menuType || '메뉴타입을 선택해주세요.']\"></v-checkbox>\n                  <v-checkbox v-model=\"menu.menuType\" value=\"TYPE_LINK\" label=\"URL\" :rules=\"[() => !!menu.menuType || '메뉴타입을 선택해주세요.']\"></v-checkbox>\n                  <v-checkbox v-model=\"menu.menuType\" value=\"TYPE_BLANK\" label=\"빈메뉴\" :rules=\"[() => !!menu.menuType || '메뉴타입을 선택해주세요.']\"></v-checkbox>\n                </div>\n\n              </v-col>\n              <v-col sm=\"8\">\n                메뉴 연결\n                <div style=\"padding-left: 22px;\" class=\"d-flex\">\n\n                  <v-autocomplete :items=\"boards\"\n                                  item-value=\"id\"\n                                  item-text=\"boardName\"\n                                  label=\"게시판을 선택해주세요.\"\n                                  dense clearable flat\n                                  outlined required\n                                  v-model=\"menu.boardId\"\n                                  :rules=\"[rules.common.required]\"\n                                  v-if=\"menu.menuType && menu.menuType === 'TYPE_BOARD'\"\n                  />\n                  <v-autocomplete :items=\"contents\" item-value=\"id\" item-text=\"title\"\n                                  label=\"페이지를 선택해주세요.\"\n                                  dense clearable flat\n                                  outlined required\n                                  v-model=\"menu.contentId\"\n                                  :rules=\"[rules.common.required]\"\n                                  v-if=\"menu.menuType && menu.menuType === 'TYPE_PAGE'\"\n                  />\n                  <v-text-field v-model=\"menu.url\" label=\"URL 을 입력해주세요.\"\n                                dense clearable required outlined\n                                maxlength=\"255\"\n                                :rules=\"[() => !!menu.url || 'URL 을 입력해주세요.']\"\n                                v-if=\"menu.menuType && menu.menuType === 'TYPE_LINK'\"/>\n\n                </div>\n              </v-col>\n            </div>\n\n<!--            <v-card-actions>-->\n<!--              <v-spacer></v-spacer>-->\n\n<!--              <v-btn color=\"red\" @click=\"deleteMenu\" v-if=\"isModify\">-->\n<!--                <v-icon left>mdi mdi-delete</v-icon>-->\n<!--                삭제-->\n<!--              </v-btn>-->\n<!--              <v-btn color=\"indigo\" @click=\"savedMenu\">-->\n<!--                <v-icon left>mdi mdi-content-save</v-icon>-->\n<!--                저장-->\n<!--              </v-btn>-->\n<!--              <v-btn @click=\"resetMenu(menu.id)\">-->\n<!--                <v-icon small>mdi-refresh</v-icon>-->\n<!--                취소-->\n<!--              </v-btn>-->\n\n<!--            </v-card-actions>-->\n          </v-form>\n\n        </v-card>\n        <div class=\"d-flex flex-column flex-grow-1\">\n          <div class=\"d-flex align-center py-3\">\n            <v-spacer></v-spacer>\n            <v-btn color=\"red\" dark @click=\"deleteMenu\" v-if=\"isModify\" style=\"margin-right: 1rem\">\n              <v-icon left>mdi mdi-delete</v-icon>\n              삭제\n            </v-btn>\n            <v-btn @click=\"resetMenu(menu.id)\">\n              <v-icon left>mdi-refresh</v-icon>\n              리셋\n            </v-btn>\n            <v-btn color=\"indigo\" @click=\"savedMenu\" style=\"margin-left: 1rem\" dark>\n              <v-icon left>mdi mdi-content-save</v-icon>\n              저장\n            </v-btn>\n          </div>\n        </div>\n      </v-col>\n    </v-row>\n\n  </div>\n</template>\n\n<script>\nimport rules from \"@/utils/rules\";\nimport menuApi from '@/api/MenuApi';\n\nimport ContentApi from '@/api/ContentApi';\nimport BoardApi from '@/api/BoardApi';\n\nimport _ from \"lodash\";\nimport LiquorTree from 'liquor-tree';\nimport vue2Dropzone from 'vue2-dropzone'\nimport 'vue2-dropzone/dist/vue2Dropzone.min.css'\n\nexport default {\n  components: {\n    [LiquorTree.name]: LiquorTree,\n    vueDropzone: vue2Dropzone\n  },\n  data() {\n    return {\n      menu: {\n        menuName: null,\n        menuImage: null,\n        menuType: \"TYPE_LINK\",\n        url: null,\n        activated: null,\n        protected: null,\n        contentId: null,\n        boardId: null\n      },\n      rows: [],\n      treeFilter: null,\n      attachmentPath: process.env.VUE_APP_ATTACH_FILE_SERVER_URL,\n      searchKeyword: null,\n      standaloneIds:[],\n      exceptedIds:[],\n      searchOpen:[],\n      lastOpen: [],\n      allOpened: false,\n      tab: null,\n      rules,\n      isLoading: false,\n      breadcrumbs: [{\n        text: '메뉴 관리',\n        disabled: false,\n        href: '#'\n      }, {\n        text: '메뉴 목록'\n      }],\n      waitingSearch: false,\n      message:{\n        error:'',\n        success:''\n      },\n      options:{\n        size: 10\n      },\n      param:{},\n      totalItems:0,\n      datasets: [],\n      companionName:{},\n      origin:{},\n\n      hasMenus: [],\n      menus: [],\n      treeOptions: {\n        parentSelect: true,\n        // propertyNames: {\n        //   states: 'options',\n        //   text: \"text\",\n        //   children: \"children\"\n        // },\n        dnd:true,\n        checkbox: false,\n        filter: {\n          matcher(query, node) {\n            return new RegExp(query, 'i').test(node.data.menuName)\n          },\n          emptyText: '일치하는 메뉴가 없습니다.',\n          plainList: true,\n          showChildren: true\n\n        },\n      },\n\n      parent: {},\n      isModify: false,\n      treeItem: null,\n      searchRoleId:null,\n\n      boards: [],\n      contents: []\n\n    }\n  },\n  computed: {\n    dropzoneOptions() {\n      return {\n        url: `${process.env.VUE_APP_GW_URL}/menus/menu/image/upload`,\n        thumbnailHeight: 110,\n        thumbnailWidth: 140,\n        maxFilesize: 10, // mb\n        maxFiles: 2,\n        // acceptedFileTypes: \"image/*\",\n        acceptedFiles: \"image/*\",\n        headers: {\n          'Authorization': `bearer ${this?.$store?.getters?.[\"user/token\"] ?? ''}`\n        },\n        uploadMultiple: false,\n        clickable: true,\n        addRemoveLinks: true\n      }\n    }\n  },\n  watch: {\n  },\n  methods: {\n    dropzoneUploadSuccess(uploadedFileInfo, res) {\n\n      const rejectedFiles = this.$refs.menuImageDropzone.getRejectedFiles()\n      for (const f of rejectedFiles) {\n        this.$refs.menuImageDropzone.removeFile(f);\n      }\n\n      const acceptedFiles = this.$refs.menuImageDropzone.getAcceptedFiles();\n      for (const f of acceptedFiles) {\n        if(f !== uploadedFileInfo)\n          this.$refs.menuImageDropzone.removeFile(f);\n      }\n\n      this.menu.menuImage = res.saveName\n\n    },\n    dropzoneUploadCompleteSuccess(response) {\n\n      if(!response.accepted) {\n        const acceptedFiles = this.$refs.menuImageDropzone.getAcceptedFiles()\n        const rejectedFiles = this.$refs.menuImageDropzone.getRejectedFiles()\n        const allFile = [...acceptedFiles, ...rejectedFiles]\n        for (const f of allFile) {\n          if(f !== response) {\n            this.$refs.menuImageDropzone.removeFile(f); // callback -> imageRemove\n          }\n        }\n      }\n\n      // console.log(this.menu.menuImage);\n    },\n    dropzoneRemove() {\n      this.menu.menuImage = null;\n    },\n    dropzoneProcessing() {\n      this.$refs.menuImageDropzone.setOption('headers', {Authorization: `bearer ${sessionStorage.getItem(\"X-Token\") ?? ''}`})\n    },\n\n\n    uploadedRemove() {\n      this.menu.menuImage = null;\n    },\n\n    async changeTreeData(menuCategory) {\n      this.$refs?.menuForm?.resetValidation();\n\n      console.log(this.$refs.menuForm);\n\n      this.menu = {\n        menuCategory: menuCategory\n      }\n      this.parent = {}\n      this.treeVisible = false;\n      this.menus = await this.loadTreeData(menuCategory);\n      this.treeVisible = true;\n\n      this.$refs.menuTree.setModel(this.menus)\n      // this.$refs.menuTree.expandAll()\n      // console.log(this.menus)\n    },\n    async getMenu(node) {\n\n      this.$refs.menuImageDropzone?.removeAllFiles()\n\n      if(node.states.selected) {\n\n        await node.select(false);\n        node.unselect();\n\n        this.treeItem = node;\n        this.menu = {'menuCategory' : this.menu?.menuCategory??''}\n        this.parent = null;\n        this.isModify = false;\n        this.$refs.menuForm.resetValidation()\n      } else {\n        this.treeItem = node;\n        this.menu = await menuApi.findMenuById(node.data.id);\n        this.parent = _.cloneDeep(this.menu);\n        this.isModify = true;\n      }\n    },\n    async createMenuForm() {\n      console.log(this.menu.menuCategory);\n\n      this.menu = {\n        menuCategory: this.menu.menuCategory ?? 'HOME'\n      }\n      this.isModify = false\n    },\n    async savedMenu() {\n\n      if (!await this.$refs.menuForm.validate())\n        return;\n\n      if(!this.menu.parentId && !this.isModify)\n        this.menu.parentId = this.parent?.id;\n\n      this.menu.menuCategory = this.menu.menuCategory??'HOME'\n      menuApi.saveMenu(this.menu).then(async savedMenu => {\n        if(this.flatList(this.$refs.menuTree.findAll().tree.model).map(t => t.data.id).includes(savedMenu.id)) {\n\n          this.treeItem.data.menuName = savedMenu.menuName;\n          this.treeItem.data.activated = savedMenu.activated;\n          this.treeItem.text = savedMenu.menuName;\n\n        } else {\n\n          let item = {\n            text: savedMenu.menuName,\n            data: {\n              id: savedMenu.id,\n              menuName: savedMenu.menuName,\n              activated: savedMenu.activated,\n              protected: savedMenu.protected,\n              text: savedMenu.menuName\n            },\n            menuName: savedMenu.menuName,\n            state: {selected: false}\n          };\n\n          if(savedMenu.parentId) {\n            this.treeItem.states.expanded = true;\n            const parentNode = this.$refs.menuTree.find({\n              data: {\n                id: savedMenu.parentId\n              }\n            })[0];\n\n            parentNode.append(item);\n            // this.treeItem = this.$refs.menuTree.append(parentNode, item);\n          } else {\n            // console.log(\"--------------\")\n            // console.log(item);\n            this.treeItem = await this.$refs.menuTree.append(item);\n            // console.log(this.treeItem);\n            // await this.changeTreeData(savedMenu.menuCategory);\n          }\n        }\n\n        this.menu = savedMenu;\n        this.menu.childMenus = [];\n\n        this.menu = await menuApi.findMenuById(savedMenu.id);\n        this.isModify = true;\n\n        alert(\"저장되었습니다.\")\n      });\n\n    },\n    deleteMenu() {\n      if (this.menu.childMenus?.length ?? 0 !== 0) {\n        alert(\"하위 메뉴가 존재합니다.\");\n        return false;\n      }\n      if (confirm(\"해당 메뉴를 삭제하시겠습니까?\")) {\n        menuApi.deleteMenu(this.menu.id).then(() => {\n          this.$refs.menuForm.resetValidation();\n\n          this.menu = {};\n          this.parent = null;\n          this.treeItem.remove();\n          this.isModify = false;\n\n          alert(\"삭제되었습니다.\")\n        });\n      }\n\n    },\n    async resetMenu(id) {\n      if(id) {\n        this.menu = await menuApi.findMenuById(id);\n        this.parent = _.cloneDeep(this.menu);\n        this.isModify = true;\n      } else {\n        this.menu = {}\n        this.parent = null;\n        this.isModify = false;\n        this.$refs.menuForm.resetValidation()\n      }\n    },\n    async moveMenu(sourceNode, destinationNode, pos) {\n      let position = new Map();\n      position.set('drag-above', 'UP');\n      position.set('drag-below', 'DOWN');\n      position.set('drag-on', 'IN');\n\n      await menuApi.moveMenu(sourceNode.data.id, destinationNode.data.id, position.get(pos));\n    },\n    flatList(items) {\n      console.log(items);\n      if(items && items.length > 0) {\n        return items.flatMap(i => {\n\n          if(i.children && i.children.length > 0) {\n            return [this.flatList(i.children), i].flatMap(i=>i);\n          } else {\n            return [i]\n          }\n\n        });\n      } else\n        return [];\n    },\n    async loadTreeData(category) {\n      let temp = await menuApi.findMenusByCategory(category);\n      temp.forEach(t => this.recursiveGeneratedTree(t, 1));\n      return temp;\n    },\n    recursiveGeneratedTree(item, depth) {\n      item.data = {\n        id : item.id,\n        menuName : item.menuName,\n        menuIcon : item.menuIcon,\n        activated : item.activated,\n        protected: item.protected\n      };\n      item.text = item.menuName;\n\n\n      // item.options = {expanded: true, dropable: true, draggable: true};\n      item.state = {expanded: true, dropable: true, draggable: true};\n      item.childMenus?.forEach(t => this.recursiveGeneratedTree(t, depth+1));\n      item.children = item.childMenus\n\n\n    }\n  },\n  mounted() {\n    this.loadTreeData('HOME').then(async data => {\n      this.menus = this.$refs.menuTree.tree.parse(data);\n      // this.$set(this.$refs.menuTree, 'model', this.menus);\n      this.$refs.menuTree.setModel(this.menus)\n      this.$refs.menuTree.expandAll()\n    });\n\n    // const adminTree = this.$refs.adminMenuTree.tree\n\n    // this.loadTreeData('ADMIN').then(data => {\n    //   this.adminMenus = this.$refs.adminMenuTree.tree.parse(data);\n    //   this.$set(this.$refs.adminMenuTree, 'model', this.adminMenus);\n    // });\n\n    // this.menus = await this.menus;\n  },\n  created() {\n    ContentApi.findContents().then(data => {\n      this.contents = data.content.filter(p => p.activated);\n    });\n    BoardApi.findAll().then(data => {\n      this.boards = data;\n    })\n  }\n}\n</script>\n<style>\n/*.tree-node.selected>.tree-content {*/\n/*  background: #314b5f !important;*/\n/*}*/\n/*.tree-node:not(.selected)>.tree-content:hover {*/\n/*  background: none !important;*/\n/*}*/\n</style>\n"]}]}