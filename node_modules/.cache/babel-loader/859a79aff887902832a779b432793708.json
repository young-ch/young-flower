{"remainingRequest":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/babel-loader/lib/index.js!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/apps/article/Article.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/apps/article/Article.vue","mtime":1666246517994},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/babel.config.js","mtime":1665531625438},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/babel-loader/lib/index.js","mtime":1665531751248},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js","mtime":1665531752006}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IEFydGljbGVMaXN0IGZyb20gIi4vTGlzdCI7CmltcG9ydCBBcnRpY2xlUGhvdG9zIGZyb20gIi4vUGhvdG8iOwovLyBpbXBvcnQgQXJ0aWNsZVNjaGVkdWxlIGZyb20gIi4vU2NoZWR1bGUiOwoKaW1wb3J0IGJvYXJkQXBpIGZyb20gJ0AvYXBpL0JvYXJkQXBpJzsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiBbJ2JvYXJkSWQnXSwKICBuYW1lOiAiQXJ0aWNsZSIsCiAgY29tcG9uZW50czogewogICAgJ2FydGljbGUtbGlzdCc6IEFydGljbGVMaXN0LAogICAgJ2FydGljbGUtcGhvdG9zJzogQXJ0aWNsZVBob3RvcwogICAgLy8gJ2FydGljbGUtc2NoZWR1bGUnIDogQXJ0aWNsZVNjaGVkdWxlCiAgfSwKCiAgZGF0YTogKCkgPT4gKHsKICAgIGJyZWFkY3J1bWJzOiBbewogICAgICB0ZXh0OiAn6rKM7Iuc66y8IOq0gOumrCcsCiAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgaHJlZjogJyMnCiAgICB9LCB7CiAgICAgIHRleHQ6ICfqsozsi5zrrLwg66qp66GdJwogICAgfV0sCiAgICBpc0xpc3Q6IGZhbHNlLAogICAgaXNQaG90b3M6IGZhbHNlLAogICAgaXNTY2hlZHVsZTogZmFsc2UsCiAgICBib2FyZDoge30sCiAgICBwZXJtaXNzaW9uOiB7CiAgICAgIHdyaXRhYmxlOiBmYWxzZSwKICAgICAgcmVhZGFibGU6IGZhbHNlCiAgICB9CiAgfSksCiAgbWV0aG9kczogewogICAgY2hhbmdlQm9hcmRUeXBlKHZhbHVlKSB7CiAgICAgIHRoaXMuaXNMaXN0ID0gJ1RZUEVfR0VORVJBTCcgPT09IHZhbHVlOwogICAgICB0aGlzLmlzUGhvdG9zID0gJ1RZUEVfUEhPVE8nID09PSB2YWx1ZTsKICAgICAgdGhpcy5pc1NjaGVkdWxlID0gJ1RZUEVfU0NIRURVTEUnID09PSB2YWx1ZTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uICgpIHsKICAgIGJvYXJkQXBpLmZpbmRCeUlkKHRoaXMuYm9hcmRJZCkudGhlbihhc3luYyBkYXRhID0+IHsKICAgICAgdGhpcy5ib2FyZCA9IGRhdGE7CgogICAgICAvLyBjb25zdCBzdG9yZWRQYXJhbXMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzPy5wYXJhbXM/P3t9OwogICAgICAvLyBjb25zdCBib2FyZFR5cGUgPSBzdG9yZWRQYXJhbXM/LmJvYXJkVHlwZT8/dGhpcy5ib2FyZC5ib2FyZFR5cGU7CiAgICAgIHRoaXMuaXNMaXN0ID0gdGhpcy5ib2FyZC5ib2FyZFR5cGUgPT09ICdUWVBFX0dFTkVSQUwnOyAvLyBbJ1RZUEVfR0VORVJBTCcsICdUWVBFX1NDSEVEVUxFJ10uaW5jbHVkZXModGhpcy5ib2FyZC5ib2FyZFR5cGUpOwogICAgICB0aGlzLmlzUGhvdG9zID0gdGhpcy5ib2FyZC5ib2FyZFR5cGUgPT09ICdUWVBFX1BIT1RPJzsKICAgICAgdGhpcy5pc1NjaGVkdWxlID0gdGhpcy5ib2FyZC5ib2FyZFR5cGUgPT09ICdUWVBFX1NDSEVEVUxFJzsKICAgICAgdGhpcy5wZXJtaXNzaW9uID0gYXdhaXQgYm9hcmRBcGkuZmluZEFzc2lnbmVkUGVybWlzc2lvbklkKHRoaXMuYm9hcmRJZCk7CgogICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLnBlcm1pc3Npb24pCiAgICAgIC8vIGNvbnN0IGJvYXJkV3JpdGVQZXJtaXNzaW9uUm9sZUlkcyA9IFsuLi5uZXcgU2V0KHRoaXMuYm9hcmQuYm9hcmRQZXJtaXNzaW9ucy5tYXAoYnAgPT4gYnAuaWQpLmZpbHRlcihwID0+IHAuZnVuY3Rpb25UeXBlID09PSAiV1JJVEUiIHx8IHAuZnVuY3Rpb25UeXBlID09PSAiQURNSU4iKS5tYXAocCA9PiBwLnJvbGVJZCkpXQogICAgICAvLyBjb25zdCBib2FyZFJlYWRQZXJtaXNzaW9uUm9sZUlkcyA9IFsuLi5uZXcgU2V0KHRoaXMuYm9hcmQuYm9hcmRQZXJtaXNzaW9ucy5tYXAoYnAgPT4gYnAuaWQpLmZpbHRlcihwID0+IHAuZnVuY3Rpb25UeXBlID09PSAiUkVBRCIgfHwgcC5mdW5jdGlvblR5cGUgPT09ICJBRE1JTiIpLm1hcChwID0+IHAucm9sZUlkKSldCiAgICAgIC8vIHRoaXMucGVybWlzc2lvbi53cml0YWJsZSA9IFsuLi5ib2FyZFdyaXRlUGVybWlzc2lvblJvbGVJZHNdLmZpbmRJbmRleChyID0+IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIucm9sZXMubWFwKHVyID0+IHBhcnNlSW50KHVyKSkuaW5jbHVkZXMocikpID49IDAKICAgICAgLy8gdGhpcy5wZXJtaXNzaW9uLnJlYWRhYmxlID0gWy4uLmJvYXJkUmVhZFBlcm1pc3Npb25Sb2xlSWRzXS5maW5kSW5kZXgociA9PiB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLnJvbGVzLm1hcCh1ciA9PiBwYXJzZUludCh1cikpLmluY2x1ZGVzKHIpKSA+PSAwCiAgICB9KTsKICB9Cn07"},{"version":3,"mappings":"AA8BA;AACA;AACA;;AAEA;AAGA;EACAA;EACAC;EACAC;IACA;IACA;IACA;EACA;;EACAC;IACAC;MACAC;MACAC;MACAC;IACA;MACAF;IACA;IACAG;IACAC;IACAC;IACAC;IACAC;MACAC;MACAC;IACA;EAEA;EACAC;IACAC;MACA;MACA;MACA;IACA;EACA;EACAC;IAEAC;MACA;;MAEA;MACA;MACA;MACA;MACA;MAEA;;MAIA;MACA;MACA;MACA;MACA;IAEA;EAEA;AACA","names":["props","name","components","data","breadcrumbs","text","disabled","href","isList","isPhotos","isSchedule","board","permission","writable","readable","methods","changeBoardType","created","boardApi"],"sourceRoot":"src/apps/article","sources":["Article.vue"],"sourcesContent":["<template>\n  <div class=\"d-flex flex-column flex-grow-1\">\n    <div class=\"d-flex align-center py-3\">\n      <div>\n        <div class=\"display-1\">{{this.board.boardName}}</div>\n        <v-breadcrumbs :items=\"breadcrumbs\" class=\"pa-0 py-2\"></v-breadcrumbs>\n      </div>\n      <v-spacer></v-spacer>\n\n      <v-btn color=\"primary\" @click=\"$router.push({path: 'articles/form'})\" v-if=\"permission.writable\">\n        <v-icon left>mdi mdi-playlist-plus</v-icon>\n        게시물 추가\n      </v-btn>\n    </div>\n\n    <article-list v-if=\"isList && permission.readable\" @callback-change-list=\"changeBoardType\" :board=\"board\" :permission=\"permission\"/>\n    <article-photos v-if=\"isPhotos && permission.readable\" @callback-change-list=\"changeBoardType\" :boardId=\"boardId\" :permission=\"permission\"/>\n<!--    <article-schedule v-if=\"isSchedule\" @callback-change-list=\"changeBoardType\"/>-->\n\n    <div class=\"d-flex align-center py-3\">\n      <v-spacer></v-spacer>\n      <v-btn color=\"primary\" @click=\"$router.push({path: 'articles/form'})\"  v-if=\"permission.writable\">\n        <v-icon left>mdi mdi-playlist-plus</v-icon>\n        게시물 추가\n      </v-btn>\n    </div>\n  </div>\n</template>\n\n<script>\nimport ArticleList from \"./List\";\nimport ArticlePhotos from \"./Photo\";\n// import ArticleSchedule from \"./Schedule\";\n\nimport boardApi from '@/api/BoardApi'\n\n\nexport default {\n  props: ['boardId'],\n  name: \"Article\",\n  components: {\n    'article-list' : ArticleList,\n    'article-photos' : ArticlePhotos,\n    // 'article-schedule' : ArticleSchedule\n  },\n  data: () => ({\n    breadcrumbs: [{\n      text: '게시물 관리',\n      disabled: false,\n      href: '#'\n    }, {\n      text: '게시물 목록'\n    }],\n    isList: false,\n    isPhotos: false,\n    isSchedule: false,\n    board:{},\n    permission: {\n      writable: false,\n      readable: false\n    }\n\n  }),\n  methods: {\n    changeBoardType(value) {\n      this.isList = 'TYPE_GENERAL' === value\n      this.isPhotos = 'TYPE_PHOTO' === value\n      this.isSchedule = 'TYPE_SCHEDULE' === value\n    }\n  },\n  created: function () {\n\n    boardApi.findById(this.boardId).then(async data => {\n      this.board = data;\n\n      // const storedParams = this.$store.getters?.params??{};\n      // const boardType = storedParams?.boardType??this.board.boardType;\n      this.isList = this.board.boardType === 'TYPE_GENERAL'; // ['TYPE_GENERAL', 'TYPE_SCHEDULE'].includes(this.board.boardType);\n      this.isPhotos = this.board.boardType === 'TYPE_PHOTO';\n      this.isSchedule = this.board.boardType === 'TYPE_SCHEDULE';\n\n      this.permission = await boardApi.findAssignedPermissionId(this.boardId)\n      \n\n\n      // console.log(this.permission)\n      // const boardWritePermissionRoleIds = [...new Set(this.board.boardPermissions.map(bp => bp.id).filter(p => p.functionType === \"WRITE\" || p.functionType === \"ADMIN\").map(p => p.roleId))]\n      // const boardReadPermissionRoleIds = [...new Set(this.board.boardPermissions.map(bp => bp.id).filter(p => p.functionType === \"READ\" || p.functionType === \"ADMIN\").map(p => p.roleId))]\n      // this.permission.writable = [...boardWritePermissionRoleIds].findIndex(r => this.$store.state.user.roles.map(ur => parseInt(ur)).includes(r)) >= 0\n      // this.permission.readable = [...boardReadPermissionRoleIds].findIndex(r => this.$store.state.user.roles.map(ur => parseInt(ur)).includes(r)) >= 0\n\n    });\n\n  }\n}\n</script>\n"]}]}