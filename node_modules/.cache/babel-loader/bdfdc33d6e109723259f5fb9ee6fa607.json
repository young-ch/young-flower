{"remainingRequest":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/babel-loader/lib/index.js!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/apps/historyStory/historyStoryForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/apps/historyStory/historyStoryForm.vue","mtime":1666666197275},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/babel.config.js","mtime":1665531625438},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/babel-loader/lib/index.js","mtime":1665531751248},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js","mtime":1665531752006}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBWdWVUaW1lcGlja2VyIGZyb20gJ3Z1ZTItdGltZXBpY2tlcic7CmltcG9ydCAndnVlMi10aW1lcGlja2VyL2Rpc3QvVnVlVGltZXBpY2tlci5jc3MnOwppbXBvcnQgRWRpdG9yQ29tcG9uZW50IGZyb20gIi4uLy4uL2NvbXBvbmVudHMvZWRpdG9yL0VkaXRvckNvbXBvbmVudCI7CmltcG9ydCBQb3B1cEFwaSBmcm9tICcuLi8uLi9hcGkvUG9wdXBBcGknOwppbXBvcnQgcnVsZXMgZnJvbSAiQC91dGlscy9ydWxlcyI7CmltcG9ydCBQb3B1cENhdGVnb3J5QXBpIGZyb20gIkAvYXBpL1BvcHVwQ2F0ZWdvcnlBcGkiOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IFsnaWQnXSwKICBjb21wb25lbnRzOiB7CiAgICAnZWRpdG9yLWNvbXBvbmVudCc6IEVkaXRvckNvbXBvbmVudCwKICAgIFZ1ZVRpbWVwaWNrZXIKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBydWxlcywKICAgICAgc2VydmljZVR5cGU6ICdQT1BVUCcsCiAgICAgIGJyZWFkY3J1bWJzOiBbewogICAgICAgIHRleHQ6ICftjJ3sl4Ug6rSA66asJywKICAgICAgICBkaXNhYmxlZDogZmFsc2UsCiAgICAgICAgaHJlZjogJyMnCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiB0aGlzLiRwcm9wcy5pZCA/ICftjJ3sl4Ug7IiY7KCVJyA6ICftjJ3sl4Ug65Ox66GdJwogICAgICB9XSwKICAgICAgcG9wdXA6IHsKICAgICAgICB0aXRsZTogbnVsbCwKICAgICAgICBhY3RpdmF0ZWQ6IHRydWUsCiAgICAgICAgdXJsOiBudWxsLAogICAgICAgIGlkOiBudWxsLAogICAgICAgIHBvcHVwSW1hZ2U6IG51bGwKICAgICAgfSwKICAgICAgcG9wdXBGaWxlOiBudWxsLAogICAgICBwb3B1cENhdGVnb3JpZXM6IFtdLAogICAgICBpbWFnZVByZXZpZXc6IG51bGwsCiAgICAgIGltYWdlUHJldmlld05hbWU6IG51bGwsCiAgICAgIHN0YXJ0UGlja2VyOiBmYWxzZSwKICAgICAgZW5kUGlja2VyOiBmYWxzZSwKICAgICAgZXJyU3RhcnRUbTogZmFsc2UsCiAgICAgIGVyckVuZFRtOiBmYWxzZSwKICAgICAgZmlsZU1ldGE6IHt9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgb25DaGFuZ2VJbWFnZXMoZmlsZXMpIHsKICAgICAgdGhpcy5wb3B1cEZpbGUgPSBmaWxlcy50YXJnZXQuZmlsZXNbMF07CiAgICAgIGNvbnN0IGZpbGUgPSBmaWxlcy50YXJnZXQuZmlsZXNbMF07CiAgICAgIHRoaXMuaW1hZ2VQcmV2aWV3ID0gVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTsKICAgICAgdGhpcy5pbWFnZVByZXZpZXdOYW1lID0gZmlsZXMudGFyZ2V0LnZhbHVlLnNwbGl0KCdcXCcpWzJdOwogICAgfSwKICAgIGlucHV0SW1hZ2UoKSB7CiAgICAgIHRoaXMuJHJlZnMuaW1hZ2VJbnB1dC5jbGljaygpOwogICAgfSwKICAgIHVwbG9hZEltYWdlKGYpIHsKICAgICAgUG9wdXBBcGkudXBsb2FkSW1hZ2UoZikudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuZmlsZU1ldGEgPSByZXM7CiAgICAgIH0pOwogICAgfSwKICAgIGFzeW5jIHNhdmVQb3B1cCgpIHsKICAgICAgaWYgKGF3YWl0IHRoaXMuJHJlZnMucG9wdXBGb3JtLnZhbGlkYXRlKCkpIHsKICAgICAgICBpZiAodGhpcy5wb3B1cC5zdGFydFRtICYmIHR5cGVvZiB0aGlzLnBvcHVwLnN0YXJ0VG0gPT09ICJvYmplY3QiKSB7CiAgICAgICAgICB0aGlzLnBvcHVwLnN0YXJ0VG0gPSB0aGlzLnBvcHVwLnN0YXJ0VG0uSEggKyAiOiIgKyB0aGlzLnBvcHVwLnN0YXJ0VG0ubW0gKyAiOjAwIjsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMucG9wdXAuZW5kVG0gJiYgdHlwZW9mIHRoaXMucG9wdXAuZW5kVG0gPT09ICJvYmplY3QiKSB7CiAgICAgICAgICB0aGlzLnBvcHVwLmVuZFRtID0gdGhpcy5wb3B1cC5lbmRUbS5ISCArICI6IiArIHRoaXMucG9wdXAuZW5kVG0ubW0gKyAiOjAwIjsKICAgICAgICB9CiAgICAgICAgdGhpcy5wb3B1cC5jb250ZW50cyA9IHRoaXMuJHJlZnMucG9wdXBDb250ZW50cy5nZXRWYWx1ZSgpOwogICAgICAgIFBvcHVwQXBpLnNhdmUodGhpcy5wb3B1cCkudGhlbihyZXN1bHQgPT4gewogICAgICAgICAgaWYgKHRoaXMucG9wdXAuaWQgPT0gbnVsbCkgewogICAgICAgICAgICBhbGVydCh0aGlzLnBvcHVwLnRpdGxlICsgJ+ydmCDrgrTsmqnsnbQg7KCV7IOB7KCB7Jy866GcIOuTseuhneuQmOyXiOyKteuLiOuLpC4nKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFsZXJ0KHRoaXMucG9wdXAudGl0bGUgKyAn7J2YIOuCtOyaqeydtCDsoJXsg4HsoIHsnLzroZwg7IiY7KCV65CY7JeI7Iq164uI64ukLicpOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy5nb0xpc3QoKTsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBhbGVydCgn7ZWE7IiYIOyeheugpSDsgqztla3snYQg7ZmV7J247ZW0IOyjvOyEuOyalCcpOwogICAgICB9CiAgICB9LAogICAgZ29MaXN0KCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogJy9wb3B1cHMnCiAgICAgIH0pOwogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpIHsKICAgICAgUG9wdXBBcGkuZ2V0KHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkudGhlbihyZXN1bHQgPT4gewogICAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3VsdCkKICAgICAgICB0aGlzLnBvcHVwID0gcmVzdWx0OwogICAgICAgIHRoaXMuaW1hZ2VQcmV2aWV3TmFtZSA9IHJlc3VsdC5wb3B1cEltYWdlOwogICAgICB9KTsKICAgIH0KICAgIFBvcHVwQ2F0ZWdvcnlBcGkuZmluZEFsbCgpLnRoZW4ocmVzdWx0ID0+IHsKICAgICAgdGhpcy5wb3B1cENhdGVnb3JpZXMgPSByZXN1bHQ7CiAgICB9KTsKICB9Cn07"},{"version":3,"mappings":";AA2NA;AACA;AAEA;AAEA;AACA;AACA;AAEA;EACAA;EACAC;IACA;IACAC;EACA;EACAC;IACA;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;MACA;QACAF;MACA;MACAG;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA;MACA;MACA;MACA;IAEA;IACAC;MACA;IACA;IACAC;MACAC;QACA;MACA;IACA;IACA;MACA;QAEA;UACA;QACA;QACA;UACA;QACA;QACA;QAEAA;UACA;YACAC;UACA;YACAA;UACA;UACA;QACA;MACA;QACAA;MACA;IACA;IACAC;MACA;QAAAC;MAAA;IACA;EAGA;EACAC;IACA;MACAJ;QACA;QACA;QACA;MACA;IACA;IAEAK;MACA;IACA;EACA;AAGA","names":["props","components","VueTimepicker","data","rules","serviceType","breadcrumbs","text","disabled","href","popup","title","activated","url","id","popupImage","popupFile","popupCategories","imagePreview","imagePreviewName","startPicker","endPicker","errStartTm","errEndTm","fileMeta","methods","onChangeImages","inputImage","uploadImage","PopupApi","alert","goList","path","created","PopupCategoryApi"],"sourceRoot":"src/apps/historyStory","sources":["historyStoryForm.vue"],"sourcesContent":["<template>\n  <div class=\"d-flex flex-column flex-grow-1\">\n    <div class=\"d-flex align-center py-3\">\n      <div>\n        <div class=\"display-1\">팝업 관리</div>\n        <v-breadcrumbs :items=\"breadcrumbs\" class=\"pa-0 py-2\"></v-breadcrumbs>\n      </div>\n      <v-spacer></v-spacer>\n      <v-btn @click=\"savePopup\" color=\"indigo\" dark><v-icon left>mdi mdi-content-save</v-icon>{{ this.popup.id != null ? '수정' : '등록' }}</v-btn>\n      <v-btn @click=\"goList\" style=\"margin-left:1rem\"><v-icon left>mdi mdi-format-list-bulleted</v-icon>목록</v-btn>\n    </div>\n    <v-card>\n      <v-form ref=\"popupForm\">\n        <v-container fluid>\n          <v-row align=\"center\">\n            <v-col cols=\"2\">\n              <v-subheader><h3>팝업 카테고리</h3></v-subheader>\n            </v-col>\n            <v-col cols=\"4\">\n              <v-select\n                v-model=\"popup.categoryId\"\n                :items=\"popupCategories\"\n                label=\"카테고리 선택\"\n                item-text=\"categoryName\"\n                item-value=\"id\"\n                single-line\n              ></v-select>\n            </v-col>\n          </v-row>\n        </v-container>\n        <v-container fluid style=\"margin-top:-4rem\">\n          <v-row align=\"center\">\n            <v-col cols=\"2\">\n              <v-subheader><h3>제목</h3><b class=\"essential\"> &nbsp;&nbsp;*</b></v-subheader>\n            </v-col>\n            <v-col cols=\"4\">\n              <v-text-field\n                v-model=\"popup.title\"\n                label=\"제목을 입력해 주세요\"\n                :rules=\"[rules.common.required]\"\n                inverted\n                clearable\n              >\n              </v-text-field>\n            </v-col>\n          </v-row>\n\n          <v-row align=\"center\">\n            <v-col cols=\"2\">\n              <v-subheader><h3>노출 여부</h3><b class=\"essential\"> &nbsp;&nbsp;*</b></v-subheader>\n            </v-col>\n            <v-radio-group\n              v-model=\"popup.activated\"\n              row\n              style=\"padding-left: 20px;\"\n            >\n              <v-radio\n                label=\"노출\"\n                :value=\"true\"\n              ></v-radio>\n              <v-radio\n                label=\"미노출\"\n                :value=\"false\"\n              ></v-radio>\n            </v-radio-group>\n          </v-row>\n\n          <v-row align=\"center\">\n            <v-col cols=\"2\">\n              <v-subheader><h3>상시</h3></v-subheader>\n            </v-col>\n            <v-sheet\n              class=\"pa-5\"\n              style=\"margin-left:-1rem\"\n            >\n              <v-switch\n                v-model=\"popup.always\"\n                inset\n                :label=\"popup.always ? '상시 노출' : '기간 제한'\"\n              />\n            </v-sheet>\n          </v-row>\n\n          <v-row\n            v-if=\"!popup.always\"\n            align=\"center\"\n          >\n            <v-col cols=\"2\">\n              <v-subheader><h3>노출기간</h3><b class=\"essential\"> &nbsp;&nbsp;*</b></v-subheader>\n            </v-col>\n            <v-col cols=\"2\">\n              <v-menu\n                v-model=\"startPicker\"\n                :close-on-content-click=\"false\"\n                :nudge-right=\"40\"\n                transition=\"scale-transition\"\n                offset-y\n                min-width=\"auto\"\n              >\n                <template v-slot:activator=\"{ on, attrs }\">\n                  <v-text-field\n                    v-model=\"popup.startDt\"\n                    label=\"노출 시작일\"\n                    prepend-icon=\"mdi-calendar\"\n                    readonly\n                    v-bind=\"attrs\"\n                    :rules=\"[rules.common.required]\"\n                    v-on=\"on\"\n                  />\n                </template>\n                <v-date-picker\n                  v-model=\"popup.startDt\"\n                  @input=\"startPicker = false\"\n                />\n              </v-menu>\n            </v-col>\n            <v-col cols=\"2\">\n              <vue-timepicker manual-input v-model=\"popup.startTm\" :input-class=\"errStartTm ? 'invalid' : ''\" style=\"margin-top: 25px\"></vue-timepicker>\n              <v-input hidden v-model=\"popup.startTm\"></v-input>\n            </v-col>\n\n            <v-col cols=\"2\">\n              <v-menu\n                v-model=\"endPicker\"\n                :close-on-content-click=\"false\"\n                :nudge-right=\"40\"\n                transition=\"scale-transition\"\n                offset-y\n                min-width=\"auto\"\n              >\n                <template v-slot:activator=\"{ on, attrs }\">\n                  <v-text-field\n                    v-model=\"popup.endDt\"\n                    label=\"노출 종료일\"\n                    prepend-icon=\"mdi-calendar\"\n                    readonly\n                    v-bind=\"attrs\"\n                    :rules=\"[rules.common.required]\"\n                    v-on=\"on\"\n                  />\n                </template>\n                <v-date-picker\n                  v-model=\"popup.endDt\"\n                  @input=\"endPicker = false\"\n                />\n              </v-menu>\n            </v-col>\n            <v-col cols=\"2\">\n              <vue-timepicker manual-input v-model=\"popup.endTm\" :input-class=\"errEndTm ? 'invalid' : ''\"  style=\"margin-top: 25px\"></vue-timepicker>\n              <v-input hidden v-model=\"popup.endTm\"></v-input>\n            </v-col>\n            <v-spacer />\n          </v-row>\n          <v-row\n            align=\"center\"\n          >\n            <v-col cols=\"2\">\n              <v-subheader><h3>내용</h3></v-subheader>\n            </v-col>\n            <v-col>\n              <editor-component\n                ref=\"popupContents\"\n                :val=\"popup.contents\"\n                :uploaded=\"fileMeta\"\n                @callback-upload=\"uploadImage\"\n                label=\"팝업 내용\"/>\n            </v-col>\n          </v-row>\n\n          <v-row align=\"center\">\n            <v-col cols=\"2\" sm=\"2\">\n              <v-subheader><h3>링크 연결</h3></v-subheader>\n            </v-col>\n            <v-col\n              cols=\"12\"\n              sm=\"6\"\n              class=\"d-flex\"\n            >\n              <v-switch\n                v-model=\"popup.urlTarget\"\n                flat\n                color=\"primary\"\n                class=\"custom-switch-color\"\n                true-value=\"_blank\"\n                false-value=\"_self\"\n                :label=\"popup.urlTarget === '_blank' ? '새창' : '현재창'\"\n                style=\"margin-right: 1rem\"\n              ></v-switch>\n\n              <v-text-field\n                v-model=\"popup.url\"\n                :label=\"!this.popup.url?'링크 주소 입력':this.popup.url\"\n                prepend-icon=\"mdi-link-variant-plus\"\n                style=\"width:500px\"\n              ></v-text-field>\n\n            </v-col>\n          </v-row>\n<!--          <v-row align=\"center\">-->\n<!--            <v-col cols=\"2\" sm=\"2\">-->\n<!--              <v-subheader></v-subheader>-->\n<!--            </v-col>-->\n<!--            <v-col style=\"margin-left:10rem\">-->\n<!--              <v-btn @click=\"savePopup\">{{ this.popup.id != null ? '수정' : '등록' }}</v-btn>-->\n<!--              <v-btn @click=\"goList\" style=\"margin-left:1rem\">목록</v-btn>-->\n<!--            </v-col>-->\n<!--          </v-row>-->\n        </v-container>\n      </v-form>\n    </v-card>\n    <div class=\"d-flex align-center py-3\">\n      <v-spacer></v-spacer>\n      <v-btn @click=\"savePopup\" color=\"indigo\" dark><v-icon left>mdi mdi-content-save</v-icon>{{ this.popup.id != null ? '수정' : '등록' }}</v-btn>\n      <v-btn @click=\"goList\" style=\"margin-left:1rem\"><v-icon left>mdi mdi-format-list-bulleted</v-icon>목록</v-btn>\n    </div>\n  </div>\n</template>\n\n<script>\nimport VueTimepicker from 'vue2-timepicker'\nimport 'vue2-timepicker/dist/VueTimepicker.css'\n\nimport EditorComponent from \"../../components/editor/EditorComponent\";\n\nimport PopupApi from '../../api/PopupApi'\nimport rules from \"@/utils/rules\";\nimport PopupCategoryApi from \"@/api/PopupCategoryApi\";\n\nexport default {\n  props: ['id'],\n  components: {\n    'editor-component': EditorComponent,\n    VueTimepicker\n  },\n  data() {\n    return {\n      rules,\n      serviceType: 'POPUP',\n      breadcrumbs: [{\n        text: '팝업 관리',\n        disabled: false,\n        href: '#'\n      }, {\n        text: this.$props.id ? '팝업 수정' : '팝업 등록'\n      }],\n      popup: {\n        title: null,\n        activated: true,\n        url: null,\n        id: null,\n        popupImage: null\n      },\n      popupFile: null,\n      popupCategories: [],\n      imagePreview: null,\n      imagePreviewName: null,\n      startPicker: false,\n      endPicker: false,\n      errStartTm:false,\n      errEndTm:false,\n      fileMeta:{},\n    }\n  },\n  methods: {\n    onChangeImages(files) {\n      this.popupFile = files.target.files[0];\n      const file = files.target.files[0]\n      this.imagePreview = URL.createObjectURL(file);\n      this.imagePreviewName = files.target.value.split('\\\\')[2];\n\n    },\n    inputImage() {\n      this.$refs.imageInput.click();\n    },\n    uploadImage(f) {\n      PopupApi.uploadImage(f).then(res => {\n        this.fileMeta = res;\n      });\n    },\n    async savePopup() {\n      if (await this.$refs.popupForm.validate()) {\n\n        if(this.popup.startTm && typeof this.popup.startTm === \"object\") {\n          this.popup.startTm = this.popup.startTm.HH + \":\" + this.popup.startTm.mm + \":00\"\n        }\n        if(this.popup.endTm && typeof this.popup.endTm === \"object\") {\n          this.popup.endTm = this.popup.endTm.HH + \":\" + this.popup.endTm.mm + \":00\"\n        }\n        this.popup.contents = this.$refs.popupContents.getValue();\n\n        PopupApi.save(this.popup).then(result => {\n          if (this.popup.id == null) {\n            alert(this.popup.title + '의 내용이 정상적으로 등록되었습니다.')\n          } else {\n            alert(this.popup.title + '의 내용이 정상적으로 수정되었습니다.')\n          }\n          this.goList()\n        })\n      } else {\n        alert('필수 입력 사항을 확인해 주세요')\n      }\n    },\n    goList() {\n      this.$router.push({path: '/popups'})\n    },\n\n\n  },\n  created() {\n    if (this.$route.params.id) {\n      PopupApi.get(this.$route.params.id).then(result => {\n        // console.log(result)\n        this.popup = result;\n        this.imagePreviewName = result.popupImage;\n      })\n    }\n\n    PopupCategoryApi.findAll().then(result => {\n      this.popupCategories = result;\n    });\n  }\n\n\n};\n</script>\n\n<style scoped>\n\n.essential {\n  color: red;\n  font-size: 30px;\n}\n.vue__time-picker {\n  background-color:ghostwhite;\n  margin-left : -1rem;\n  margin-top : -0.3rem;\n}\n</style>\n"]}]}