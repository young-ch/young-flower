{"remainingRequest":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/babel-loader/lib/index.js!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/apps/endpoint/Endpoints.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/apps/endpoint/Endpoints.vue","mtime":1665531625450},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/babel.config.js","mtime":1665531625438},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/babel-loader/lib/index.js","mtime":1665531751248},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js","mtime":1665531752006}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IEVuZHBvaW50QXBpIGZyb20gJy4uLy4uL2FwaS9FbmRwb2ludEFwaSc7CmltcG9ydCBydWxlcyBmcm9tICJAL3V0aWxzL3J1bGVzIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBicmVhZGNydW1iczogW3sKICAgICAgICB0ZXh0OiAnQVBJIOqzteqwnCDqtIDrpqwnLAogICAgICAgIGRpc2FibGVkOiBmYWxzZSwKICAgICAgICBocmVmOiAnIycKICAgICAgfSwgewogICAgICAgIHRleHQ6ICdBUEkg66qp66GdJwogICAgICB9XSwKICAgICAgc2VhcmNoOiAnJywKICAgICAgaGVhZGVyczogW3sKICAgICAgICB0ZXh0OiAn6rO16rCcJywKICAgICAgICB2YWx1ZTogJ2lzUHVibGljJywKICAgICAgICBhbGlnbjogJ2NlbnRlcicKICAgICAgfSwgewogICAgICAgIHRleHQ6ICd1cmknLAogICAgICAgIHZhbHVlOiAndXJpJywKICAgICAgICBhbGlnbjogJ2xlZnQnCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAnaHR0cCBtZXRob2QnLAogICAgICAgIHZhbHVlOiAnaHR0cE1ldGhvZCcsCiAgICAgICAgYWxpZ246ICdsZWZ0JwogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ2FwaSB0aXRsZScsCiAgICAgICAgdmFsdWU6ICdvcGVyYXRpb25EZXNjcmlwdGlvbicsCiAgICAgICAgYWxpZ246ICdsZWZ0JwogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ3Jlc291cmNlIHRpdGxlJywKICAgICAgICB2YWx1ZTogJ3Jlc291cmNlRGVzY3JpcHRpb24nLAogICAgICAgIGFsaWduOiAnbGVmdCcKICAgICAgfV0sCiAgICAgIHNlbGVjdGVkOiBbXSwKICAgICAgZW5kcG9pbnRzOiBbXSwKICAgICAgcGFyYW06IHsKICAgICAgICBwYWdlOiAxLAogICAgICAgIHNpemU6IDEwCiAgICAgIH0sCiAgICAgIG9wdGlvbnM6IHt9LAogICAgICBjdXJyZW50UGFnZTogewogICAgICAgICd2YWx1ZSc6IDEsCiAgICAgICAgJ3RleHQnOiAncGFnZSAxJwogICAgICB9LAogICAgICB0b3RhbENvdW50OiBudWxsLAogICAgICBkaWFsb2c6IGZhbHNlLAogICAgICBydWxlcwogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIHB1YmxpY0NoYW5nZShpdGVtKSB7CiAgICAgIC8vIGlmIChjb25maXJtKChpdGVtLmlzUHVibGljID8gJ+qzteqwnOuhnCcgOiAn67mE6rO16rCc66GcJykgKyAiIOyghO2ZmCDtlZjsi5zqsqDsirXri4jquYw/IikpIHsKICAgICAgYXdhaXQgRW5kcG9pbnRBcGkuY2hhbmdlUHVibGljRW5kcG9pbnQoaXRlbSk7CiAgICAgIC8vIH0gZWxzZSB7CiAgICAgIC8vICAgaXRlbS5pc1B1YmxpYyA9ICFpdGVtLmlzUHVibGljCiAgICAgIC8vIH0KICAgIH0sCgogICAgYXN5bmMgZ2V0RW5kcG9pbnRzKCkgewogICAgICBhd2FpdCBQcm9taXNlLmFsbChbRW5kcG9pbnRBcGkuZ2V0UHVibGljRW5kcG9pbnRzKCksIEVuZHBvaW50QXBpLmdldEVuZHBvaW50cygpXSkudGhlbigoW3BzLCBlbmRwb2ludHNdKSA9PiB7CiAgICAgICAgY29uc3QgcHVibGljRW5kcG9pbnRzID0gcHMubWFwKHAgPT4gcC5lbmRwb2ludCk7CiAgICAgICAgdGhpcy5lbmRwb2ludHMgPSBlbmRwb2ludHMubWFwKGVsZSA9PiB7CiAgICAgICAgICBlbGUuaXNQdWJsaWMgPSAhIXB1YmxpY0VuZHBvaW50cy5maW5kKHBlID0+IHBlLnVyaSA9PT0gZWxlLnVyaSAmJiBwZS5odHRwTWV0aG9kID09PSBlbGUuaHR0cE1ldGhvZCk7CiAgICAgICAgICBlbGUuaXRlbUtleSA9IGVsZS51cmkgKyAnXycgKyBlbGUuaHR0cE1ldGhvZDsKICAgICAgICAgIHJldHVybiBlbGU7CiAgICAgICAgfSk7CiAgICAgICAgLy8gdGhpcy50b3RhbENvdW50ID0gZW5kcG9pbnRzLmxlbmd0aDsKICAgICAgfSk7CiAgICB9LAoKICAgIHNlY3VyZU1hcHBpbmcoKSB7CiAgICAgIGlmICh0aGlzLnNlbGVjdGVkICYmIHRoaXMuc2VsZWN0ZWQubGVuZ3RoID4gMCkgewogICAgICAgIGlmIChjb25maXJtKCLruYTqs7XqsJwg7KCE7ZmYIO2VmOyLnOqyoOyKteuLiOq5jD8iKSkgewogICAgICAgICAgRW5kcG9pbnRBcGkuZGVsZXRlUHVibGljRW5kcG9pbnRzKHRoaXMuc2VsZWN0ZWQpLnRoZW4oKCkgPT4gewogICAgICAgICAgICB0aGlzLmVuZHBvaW50cy5mb3JFYWNoKGUgPT4gewogICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkLmluY2x1ZGVzKGUpKSBlLmlzUHVibGljID0gZmFsc2U7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgYWxlcnQoIkFQSSDrpbwg7ISg7YOd7ZW07KO87IS47JqULiIpOwogICAgfSwKICAgIHB1YmxpY01hcHBpbmcoKSB7CiAgICAgIGlmICh0aGlzLnNlbGVjdGVkICYmIHRoaXMuc2VsZWN0ZWQubGVuZ3RoID4gMCkgewogICAgICAgIGlmIChjb25maXJtKCLqs7XqsJwg7KCE7ZmYIO2VmOyLnOqyoOyKteuLiOq5jD8iKSkgewogICAgICAgICAgRW5kcG9pbnRBcGkuc2F2ZVB1YmxpY0VuZHBvaW50KHRoaXMuc2VsZWN0ZWQpLnRoZW4oKCkgPT4gewogICAgICAgICAgICB0aGlzLmVuZHBvaW50cy5mb3JFYWNoKGUgPT4gewogICAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkLmluY2x1ZGVzKGUpKSBlLmlzUHVibGljID0gdHJ1ZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBhbGVydCgiQVBJIOulvCDshKDtg53tlbTso7zshLjsmpQuIik7CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgdGhpcy4kc3RvcmUuY29tbWl0KCdzZXRQYXJhbXMnLCB7fSk7CiAgICB0aGlzLmdldEVuZHBvaW50cygpOwogIH0KfTs="},{"version":3,"mappings":"AAqGA;AACA;AAEA;EACAA;IACA;MACAC;QACAC;QACAC;QACAC;MACA;QACAF;MACA;MAEAG;MACAC,UACA;QAAAJ;QAAAK;QAAAC;MAAA,GACA;QAAAN;QAAAK;QAAAC;MAAA,GACA;QAAAN;QAAAK;QAAAC;MAAA,GACA;QAAAN;QAAAK;QAAAC;MAAA,GACA;QAAAN;QAAAK;QAAAC;MAAA,EACA;MACAC;MACAC;MACAC;QACAC;QACAC;MACA;MACAC;MACAC;QAAA;QAAA;MAAA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IACA;MACA;MACA;MACA;MACA;MACA;IACA;;IACA;MAEA,kFACAC;QACA;QACA;UACAC;UACAA;UACA;QACA;QACA;MACA;IAEA;;IACAC;MACA;QAEA;UACAC;YAEA;cACA,+BACAC;YACA;UAEA;QACA;MAEA,OACAC;IACA;IACAC;MACA;QACA;UACAH;YACA;cACA,+BACAC;YACA;UACA;QACA;MACA,OACAC;IACA;EAEA;EACAE;IACA;IACA;EACA;AAEA","names":["data","breadcrumbs","text","disabled","href","search","headers","value","align","selected","endpoints","param","page","size","options","currentPage","totalCount","dialog","rules","methods","then","ele","secureMapping","EndpointApi","e","alert","publicMapping","created"],"sourceRoot":"src/apps/endpoint","sources":["Endpoints.vue"],"sourcesContent":["<template>\n  <div class=\"d-flex flex-column flex-grow-1\">\n\n    <div class=\"d-flex align-center py-3\">\n      <div>\n        <div class=\"display-1\">API 공개 관리</div>\n        <v-breadcrumbs :items=\"breadcrumbs\" class=\"pa-0 py-2\"></v-breadcrumbs>\n      </div>\n      <v-spacer></v-spacer>\n      <v-btn color=\"red\" @click=\"secureMapping\" dark>\n        <v-icon small left>mdi-lock</v-icon>\n        비공개 API\n      </v-btn>\n      <v-btn color=\"indigo\" @click=\"publicMapping\" style=\"margin-left:1rem\" dark>\n        <v-icon small left>mdi-lock-open-variant</v-icon>\n        공개 API\n      </v-btn>\n    </div>\n\n    <v-card>\n      <v-card-title>\n        <v-spacer></v-spacer>\n        <v-text-field\n          v-model=\"search\"\n          append-icon=\"mdi-magnify\"\n          class=\"flex-grow-1 mr-md-2\"\n          label=\"검색\"\n          dense\n          single-line\n          hide-details\n          clearable\n        ></v-text-field>\n      </v-card-title>\n\n      <v-data-table\n        v-model=\"selected\"\n        :search=\"search\"\n        :headers=\"headers\"\n        :items=\"endpoints\"\n        show-select\n        item-key=\"itemKey\"\n        class=\"elevation-1\"\n        sortable=\"false\"\n        :footer-props=\"{showFirstLastPage: true, 'items-per-page-options' : [10,20,50,100,-1], showCurrentPage:true}\"\n        @click:row=\"(item, row) => row.select(!row.isSelected)\"\n        :options.sync=\"options\"\n      >\n        <template v-slot:item.isPublic=\"{ item }\">\n          <v-switch\n            v-model=\"item.isPublic\"\n            flat\n            @click.native.stop=\"publicChange(item)\"\n            :color=\"item.isPublic ? 'success' : 'error'\"\n          >\n<!--            :label=\"item.isPublic ?'공개':'비공개'\"-->\n          </v-switch>\n        </template>\n        <template #footer.page-text=\"props\">\n\n            <v-combobox\n              v-model=\"options.page\"\n              :label=\"`${props.pageStart}-${props.pageStop} of ${props.itemsLength} rows / ${options.page} page / total ${Math.ceil(props.itemsLength / options.itemsPerPage)} pages`\"\n              :items=\"Array.from({length: Math.ceil(props.itemsLength / options.itemsPerPage)}, (v, k) => k+1 )\"\n              :return-object=\"false\"\n              hide-details dense\n              type=\"number\"\n              suffix=\"page\"\n            >\n<!--              :value=\"{'value':options.page, 'text': `page ${options.page}`}\"-->\n<!--              @change=\"(v) => options.page = v ? v : 1\"-->\n<!--              :items=\"Array.from({length: Math.ceil(props.itemsLength / options.itemsPerPage)}, (v, k) => { return {'value':k+1, 'text': `page ${k+1}`} })\"-->\n\n            </v-combobox>\n\n<!--          total {{Math.ceil(props.itemsLength / options.itemsPerPage)}} pages-->\n\n<!--          <v-pagination-->\n<!--            v-model=\"page\"-->\n<!--            :length=\"props.itemsLength\">-->\n<!--          </v-pagination>-->\n        </template>\n      </v-data-table>\n\n    </v-card>\n\n    <div class=\"d-flex align-center py-3\">\n      <v-spacer></v-spacer>\n      <v-btn color=\"red\" @click=\"secureMapping\" dark>\n        <v-icon small left>mdi-lock</v-icon>\n        비공개 API\n      </v-btn>\n      <v-btn color=\"indigo\" @click=\"publicMapping\" style=\"margin-left:1rem\" dark>\n        <v-icon small left>mdi-lock-open-variant</v-icon>\n        공개 API\n      </v-btn>\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport EndpointApi from '../../api/EndpointApi';\nimport rules from \"@/utils/rules\";\n\nexport default {\n  data() {\n    return {\n      breadcrumbs: [{\n        text: 'API 공개 관리',\n        disabled: false,\n        href: '#'\n      }, {\n        text: 'API 목록'\n      }],\n\n      search: '',\n      headers: [\n        {text: '공개', value: 'isPublic', align: 'center'},\n        {text: 'uri', value: 'uri', align: 'left'},\n        {text: 'http method', value: 'httpMethod', align: 'left'},\n        {text: 'api title', value: 'operationDescription', align: 'left'},\n        {text: 'resource title', value: 'resourceDescription', align: 'left'}\n      ],\n      selected: [],\n      endpoints: [],\n      param: {\n        page: 1,\n        size: 10\n      },\n      options:{},\n      currentPage:{'value':1, 'text':'page 1'},\n      totalCount: null,\n      dialog: false,\n      rules\n    }\n  },\n  methods: {\n    async publicChange(item) {\n      // if (confirm((item.isPublic ? '공개로' : '비공개로') + \" 전환 하시겠습니까?\")) {\n        await EndpointApi.changePublicEndpoint(item)\n      // } else {\n      //   item.isPublic = !item.isPublic\n      // }\n    },\n    async getEndpoints() {\n\n      await Promise.all([EndpointApi.getPublicEndpoints(), EndpointApi.getEndpoints()])\n        .then(([ps, endpoints]) => {\n          const publicEndpoints = ps.map(p => p.endpoint);\n          this.endpoints = endpoints.map(ele => {\n            ele.isPublic = !!publicEndpoints.find(pe => pe.uri === ele.uri && pe.httpMethod === ele.httpMethod);\n            ele.itemKey = ele.uri + '_' + ele.httpMethod\n            return ele;\n          });\n          // this.totalCount = endpoints.length;\n      })\n\n    },\n    secureMapping() {\n      if (this.selected && this.selected.length > 0) {\n\n        if (confirm(\"비공개 전환 하시겠습니까?\")) {\n          EndpointApi.deletePublicEndpoints(this.selected).then(() => {\n\n            this.endpoints.forEach(e => {\n              if(this.selected.includes(e))\n                e.isPublic = false\n            })\n\n          })\n        }\n\n      } else\n        alert(\"API 를 선택해주세요.\")\n    },\n    publicMapping() {\n      if (this.selected && this.selected.length > 0) {\n        if (confirm(\"공개 전환 하시겠습니까?\")) {\n          EndpointApi.savePublicEndpoint(this.selected).then(() => {\n            this.endpoints.forEach(e => {\n              if(this.selected.includes(e))\n                e.isPublic = true\n            })\n          })\n        }\n      } else\n        alert(\"API 를 선택해주세요.\")\n    },\n\n  },\n  created() {\n    this.$store.commit('setParams', {})\n    this.getEndpoints();\n  }\n\n};\n</script>\n"]}]}