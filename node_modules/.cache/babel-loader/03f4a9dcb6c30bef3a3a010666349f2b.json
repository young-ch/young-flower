{"remainingRequest":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/babel-loader/lib/index.js!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/apps/user/UserForm.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/apps/user/UserForm.vue","mtime":1666057667717},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/babel.config.js","mtime":1665531625438},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/babel-loader/lib/index.js","mtime":1665531751248},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js","mtime":1665531752006}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFVzZXJBcGkgZnJvbSAiQC9hcGkvVXNlckFwaSI7CmltcG9ydCBDb3B5TGFiZWwgZnJvbSAnQC9jb21wb25lbnRzL2NvbW1vbi9Db3B5TGFiZWwnOwppbXBvcnQgVXNlckRldGFpbCBmcm9tICcuL1VzZXJEZXRhaWwnOwppbXBvcnQgVXNlckhpc3RvcnkgZnJvbSAnLi9Vc2VySGlzdG9yeSc7CmltcG9ydCBjb25maWcgZnJvbSAiQC9jb25maWdzIjsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIENvcHlMYWJlbCwKICAgIFVzZXJEZXRhaWwsCiAgICBVc2VySGlzdG9yeQogIH0sCiAgcHJvcHM6IFsnaWQnXSwKICBjb21wdXRlZDogewogICAgYnJlYWRjcnVtYnMoKSB7CiAgICAgIHJldHVybiBbewogICAgICAgIHRleHQ6IHRoaXMucGFnZU5hbWUgKyAnIOq0gOumrCcsCiAgICAgICAgdG86ICcvdXNlcnMvbGlzdCcsCiAgICAgICAgZXhhY3Q6IHRydWUKICAgICAgfSwgewogICAgICAgIHRleHQ6IHRoaXMucGFnZU5hbWUgKyAodGhpcy51c2VyLmlkID8gJyDsiJjsoJUnIDogJyDsg53shLEnKQogICAgICB9XTsKICAgIH0sCiAgICBzdGF0ZSgpIHsKICAgICAgaWYgKHRoaXMudXNlciAmJiB0aGlzLnVzZXIuc3RhdGUpIHJldHVybiBjb25maWcubWV0YS51c2VyLnN0YXRlLmZpbHRlcihzID0+IHMudmFsdWUgPT09IHRoaXMudXNlci5zdGF0ZSkubWFwKHMgPT4gcy50ZXh0KVswXTtlbHNlIHJldHVybiAiIjsKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VyOiB7fSwKICAgICAgdGFiOiBudWxsLAogICAgICBwYWdlTmFtZTogJ+2ajOybkCcKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXQoKSB7CiAgICAgIGlmICh0aGlzLmlkKSBVc2VyQXBpLmdldCh0aGlzLmlkKS50aGVuKGRhdGEgPT4gewogICAgICAgIHZhciBfZGF0YSRsb2dpbkNvdW50OwogICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpOwogICAgICAgIGRhdGEubG9naW5Db3VudCA9IChfZGF0YSRsb2dpbkNvdW50ID0gZGF0YS5sb2dpbkNvdW50KSAhPT0gbnVsbCAmJiBfZGF0YSRsb2dpbkNvdW50ICE9PSB2b2lkIDAgPyBfZGF0YSRsb2dpbkNvdW50IDogMDsKICAgICAgICB0aGlzLnVzZXIgPSBkYXRhOwogICAgICB9KTsKICAgIH0KICB9LAogIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMkJHN0b3JlJGdldHRlcnMkLCBfdGhpcyQkc3RvcmUkZ2V0dGVyczsKICAgIHRoaXMuZ2V0KCk7CiAgICAvLyBjb25zb2xlLmxvZyhwcm9jZXNzLmVudikKCiAgICBsZXQgc3RvcmVkUGFyYW1zID0gKF90aGlzJCRzdG9yZSRnZXR0ZXJzJCA9IChfdGhpcyQkc3RvcmUkZ2V0dGVycyA9IHRoaXMuJHN0b3JlLmdldHRlcnMpID09PSBudWxsIHx8IF90aGlzJCRzdG9yZSRnZXR0ZXJzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyQkc3RvcmUkZ2V0dGVycy5wYXJhbXMpICE9PSBudWxsICYmIF90aGlzJCRzdG9yZSRnZXR0ZXJzJCAhPT0gdm9pZCAwID8gX3RoaXMkJHN0b3JlJGdldHRlcnMkIDoge307CiAgICBpZiAoc3RvcmVkUGFyYW1zICYmIHN0b3JlZFBhcmFtcy5wYWdlTmFtZSkgewogICAgICB0aGlzLnBhZ2VOYW1lID0gc3RvcmVkUGFyYW1zLnBhZ2VOYW1lOwogICAgICBpZiAoc3RvcmVkUGFyYW1zLnBhZ2VOYW1lID09PSAn6rSA66as7J6QJykgewogICAgICAgIHRoaXMudXNlci51c2VySGFzUm9sZXMgPSBbewogICAgICAgICAgJ3JvbGVOYW1lJzogc3RvcmVkUGFyYW1zLnBhZ2VOYW1lLAogICAgICAgICAgJ2lkJzogMgogICAgICAgIH1dOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"mappings":"AAoHA;AACA;AACA;AACA;AACA;AAEA;EACAA;IACAC;IACAC;IACAC;EACA;EACAC;EACAC;IACAC;MACA,QACA;QACAC;QACAC;QACAC;MACA,GACA;QACAF;MACA,EACA;IACA;IACAG;MACA,kCACA,gGAEA;IACA;EACA;EACAC;IACA;MACAC,OACA;MACAC;MACAC;IACA;EACA;EACAC;IACAC;MACA,aACAC;QAAA;QACA;QACAN;QACA;MACA;IACA;EACA;EACAO;IAAA;IACA;IACA;;IAEA;IACA;MACA;MAEA;QACA;UAAA;UAAA;QAAA;MACA;IACA;EACA;AACA","names":["components","CopyLabel","UserDetail","UserHistory","props","computed","breadcrumbs","text","to","exact","state","data","user","tab","pageName","methods","get","UserApi","created"],"sourceRoot":"src/apps/user","sources":["UserForm.vue"],"sourcesContent":["<template>\n  <div class=\"flex-grow-1\">\n    <div class=\"d-flex align-center py-3\">\n      <div>\n        <div class=\"display-1\" v-if=\"id\">{{ pageName }} 정보 상세 {{ user.name && `- ${user.name}` }}</div>\n        <div class=\"display-1\" v-else>{{ pageName }} 생성</div>\n        <v-breadcrumbs :items=\"breadcrumbs\" class=\"pa-0 py-2\"></v-breadcrumbs>\n      </div>\n    </div>\n\n    <v-card class=\"mb-4\" v-if=\"id\">\n      <v-card-title>기본 정보\n        <v-icon small color=\"primary\" v-if=\"user.role === 'admin'\">mdi-security</v-icon>\n        <span class=\"ma-1\" v-if=\"user.role === 'admin'\">관리자 계정</span>\n      </v-card-title>\n      <v-card-text>\n        <div class=\"d-flex flex-column flex-sm-row\">\n          <div class=\"flex-grow-1 pt-2 pa-sm-2\">\n            <div class=\"d-flex\">\n              <span class=\"font-weight-bold\">회원번호</span>\n              <span class=\"mx-1\">\n                {{ user.id }}\n              </span>\n            </div>\n            <div class=\"d-flex\">\n              <span class=\"font-weight-bold\">이메일</span>\n              <span class=\"mx-1\">\n                <copy-label :text=\"user.email + ''\"/>\n              </span>\n            </div>\n          </div>\n          <div class=\"flex-grow-1 pt-2 pa-sm-2\">\n\n            <div class=\"d-flex\">\n              <span class=\"font-weight-bold\">이름</span>\n              <span class=\"mx-1\">\n                <copy-label :text=\"user.name + ''\"/>\n              </span>\n            </div>\n            <div class=\"d-flex\">\n              <span class=\"font-weight-bold\">연락처</span>\n              <span class=\"mx-1\">\n                <copy-label :text=\"user.mobileNo\"/>\n              </span>\n            </div>\n\n          </div>\n          <div class=\"flex-grow-1 pt-2 pa-sm-2\">\n\n            <div class=\"d-flex\">\n              <span class=\"font-weight-bold\">최종 접속 일시</span>\n              <span class=\"mx-1\">\n                {{ user.loginAt | formatDate() }}\n              </span>\n            </div>\n            <div class=\"d-flex\">\n              <span class=\"font-weight-bold\">접속 횟수</span>\n              <span class=\"mx-1\">\n                {{ user.loginCount }} 회\n              </span>\n            </div>\n\n          </div>\n          <div class=\"flex-grow-1 pt-2 pa-sm-2\">\n\n            <div class=\"d-flex\">\n              <span class=\"font-weight-bold\">가입 일시</span>\n              <span class=\"mx-1\">\n                {{ user.createdAt | formatDate() }}\n              </span>\n            </div>\n            <div class=\"d-flex\">\n              <span class=\"font-weight-bold\">승인 일시</span>\n              <span class=\"mx-1\">\n                {{ user.approvedAt | formatDate() }}\n              </span>\n            </div>\n\n          </div>\n          <div class=\"flex-grow-1 pt-2 pa-sm-2\">\n\n            <div class=\"d-flex\">\n              <span class=\"font-weight-bold\">비밀번호 변경일</span>\n              <span class=\"mx-1\">\n                {{ user.passwordChangedAt | formatDate() }}\n              </span>\n            </div>\n            <div class=\"d-flex\">\n              <span class=\"font-weight-bold\">상태 변경일</span>\n              <span class=\"mx-1\">\n                {{ user.stateChangedAt | formatDate() }}\n              </span>\n            </div>\n\n          </div>\n        </div>\n      </v-card-text>\n    </v-card>\n\n    <v-tabs v-model=\"tab\" :show-arrows=\"false\" background-color=\"transparent\">\n      <v-tab href=\"#tabs-information\" :key=\"1\">회원정보</v-tab>\n      <v-tab href=\"#tabs-history\" :key=\"2\">활동이력</v-tab>\n    </v-tabs>\n\n    <v-tabs-items v-model=\"tab\">\n      <v-tab-item value=\"tabs-information\">\n        <user-detail ref=\"tabs-information\" :id=\"id\"></user-detail>\n      </v-tab-item>\n      <v-tab-item value=\"tabs-history\">\n        <user-history ref=\"tabs-history\" :id=\"id\"></user-history>\n      </v-tab-item>\n    </v-tabs-items>\n  </div>\n</template>\n\n<script>\nimport UserApi from \"@/api/UserApi\";\nimport CopyLabel from '@/components/common/CopyLabel'\nimport UserDetail from './UserDetail'\nimport UserHistory from './UserHistory'\nimport config from \"@/configs\";\n\nexport default {\n  components: {\n    CopyLabel,\n    UserDetail,\n    UserHistory\n  },\n  props: ['id'],\n  computed: {\n    breadcrumbs() {\n      return [\n        {\n          text: this.pageName + ' 관리',\n          to: '/users/list',\n          exact: true\n        },\n        {\n          text: this.pageName + (this.user.id ? ' 수정' : ' 생성')\n        }\n      ]\n    },\n    state() {\n      if(this.user && this.user.state)\n        return config.meta.user.state.filter(s => s.value === this.user.state).map(s => s.text)[0];\n      else\n        return \"\";\n    }\n  },\n  data() {\n    return {\n      user: {\n      },\n      tab: null,\n      pageName: '회원'\n    }\n  },\n  methods: {\n    get() {\n      if(this.id)\n        UserApi.get(this.id).then(data => {\n          // console.log(data);\n          data.loginCount = data.loginCount??0\n          this.user = data;\n        })\n    }\n  },\n  created() {\n    this.get();\n    // console.log(process.env)\n\n    let storedParams = this.$store.getters?.params??{};\n    if(storedParams && storedParams.pageName) {\n      this.pageName = storedParams.pageName\n\n      if(storedParams.pageName === '관리자') {\n        this.user.userHasRoles = [{'roleName' : storedParams.pageName, 'id': 2}]\n      }\n    }\n  }\n}\n</script>\n"]}]}