{"remainingRequest":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/babel-loader/lib/index.js!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/components/app/Menus.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/src/components/app/Menus.vue","mtime":1665531625454},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/babel.config.js","mtime":1665531625438},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/babel-loader/lib/index.js","mtime":1665531751248},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/cache-loader/dist/cjs.js","mtime":1665531750829},{"path":"/Users/youngchelchoi/Desktop/workspace/flower/flower-backoffice/node_modules/vue-loader/lib/index.js","mtime":1665531752006}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IG1lbnVBcGkgZnJvbSAnQC9hcGkvTWVudUFwaSc7CmltcG9ydCBfIGZyb20gImxvZGFzaCI7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgaGVhZGVyczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gW3sKICAgICAgICB0ZXh0OiAn66mU64m066qFJywKICAgICAgICB2YWx1ZTogJ21lbnVOYW1lJywKICAgICAgICBhbGlnbjogJ2xlZnQnCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAn7KCR6re87KCc7Ja0JywKICAgICAgICB2YWx1ZTogJ2lzUHVibGljVGV4dCcsCiAgICAgICAgYWxpZ246ICdsZWZ0JwogICAgICB9LCB7CiAgICAgICAgdGV4dDogJ+yCrOyaqeyXrOu2gCcsCiAgICAgICAgdmFsdWU6ICdpc0FjdGl2YXRlZFRleHQnLAogICAgICAgIGFsaWduOiAnbGVmdCcKICAgICAgfSwgewogICAgICAgIHRleHQ6ICfrqZTribTtg4DsnoUnLAogICAgICAgIHZhbHVlOiAnbWVudVR5cGVUZXh0JywKICAgICAgICBhbGlnbjogJ2xlZnQnCiAgICAgIH0sIHsKICAgICAgICB0ZXh0OiAn7IOd7ISx7J28JywKICAgICAgICB2YWx1ZTogJ2NyZWF0ZWRBdCcsCiAgICAgICAgYWxpZ246ICdsZWZ0JwogICAgICB9CiAgICAgIC8vIHt0ZXh0OiAn7Jew6rKw7ZSE66Gc6re4656oJywgdmFsdWU6ICdjb25uZWN0ZWRQcm9ncmFtJywgYWxpZ246ICdsZWZ0J30KICAgICAgXQogICAgfSwKCiAgICBzZWxlY3RlZE1lbnU6IHsKICAgICAgdHlwZTogQXJyYXkKICAgIH0sCiAgICBjYXRlZ29yeTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdIT01FJwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIC8vIHNlbGVjdGVkTWVudTogewogICAgLy8gICBoYW5kbGVyKG52KSB7CiAgICAvLyAgICAgdGhpcy5zZWxlY3RlZCA9IG52Lm1hcCh2ID0+IHsKICAgIC8vICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKHYsIHsnaWQnIDogdi5tZW51SWR9KQogICAgLy8gICAgIH0pPz9bXQogICAgLy8gICAgIC8vIGNvbnNvbGUubG9nKG52KQogICAgLy8gICB9CiAgICAvLyB9LAogICAgc2VhcmNoU2VsZWN0ZWQ6IHsKICAgICAgaGFuZGxlcihudikgewogICAgICAgIGNvbnNvbGUubG9nKG52KTsKICAgICAgICBpZiAobnYpIHsKICAgICAgICAgIHRoaXMuY29waWVkTWVudXMgPSBfLmNsb25lRGVlcCh0aGlzLm1lbnVzKTsKICAgICAgICAgIHRoaXMubWVudXMgPSB0aGlzLm1lbnVzLmZpbHRlcihlID0+IHRoaXMuc2VsZWN0ZWQubWFwKHMgPT4gcy5pZCkuaW5jbHVkZXMoZS5pZCkpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLm1lbnVzID0gXy5jbG9uZURlZXAodGhpcy5jb3BpZWRNZW51cyk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VhcmNoU2VsZWN0ZWQ6IGZhbHNlLAogICAgICBzZWFyY2g6ICcnLAogICAgICAvLyBoZWFkZXJzOiAsCiAgICAgIG9wdGlvbnM6IHsKICAgICAgICBwYWdlOiAxLAogICAgICAgIGl0ZW1zUGVyUGFnZTogLTEKICAgICAgfSwKICAgICAgc2VsZWN0ZWQ6IFtdLAogICAgICBtZW51czogW10sCiAgICAgIGNvcGllZE1lbnVzOiBbXSwKICAgICAgdG90YWxDb3VudDogbnVsbCwKICAgICAgcnVsZXM6IHt9LAogICAgICBpbml0OiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNhdmVFdmVudCgpIHsKICAgICAgdGhpcy4kZW1pdCgnY2FsbGJhY2stc2F2ZS1ldmVudCcsIHRoaXMuc2VsZWN0ZWQpOwogICAgfSwKICAgIGFzeW5jIGZpbmRNZW51cygpIHsKICAgICAgaWYgKCF0aGlzLmluaXQpIHsKICAgICAgICB2YXIgX3RoaXMkc2VsZWN0ZWRNZW51JG1hOwogICAgICAgIHRoaXMuc2VsZWN0ZWQgPSAoX3RoaXMkc2VsZWN0ZWRNZW51JG1hID0gdGhpcy5zZWxlY3RlZE1lbnUubWFwKHYgPT4gewogICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24odiwgewogICAgICAgICAgICAnaWQnOiB2Lm1lbnVJZAogICAgICAgICAgfSk7CiAgICAgICAgfSkpICE9PSBudWxsICYmIF90aGlzJHNlbGVjdGVkTWVudSRtYSAhPT0gdm9pZCAwID8gX3RoaXMkc2VsZWN0ZWRNZW51JG1hIDogW107CiAgICAgICAgdGhpcy5pbml0ID0gdHJ1ZTsKICAgICAgfQogICAgICBtZW51QXBpLmZpbmRNZW51c0J5Q2F0ZWdvcnkodGhpcy5jYXRlZ29yeSkudGhlbihyZXN1bHQgPT4gewogICAgICAgIGNvbnN0IGZsYXRNZW51cyA9IChyZXN1bHQsIGRlcHRoKSA9PiB7CiAgICAgICAgICBsZXQgY2hpbGRyZW4gPSBbXTsKICAgICAgICAgIHJlc3VsdC5mb3JFYWNoKG0gPT4gewogICAgICAgICAgICBtLmRlcHRoID0gZGVwdGg7CiAgICAgICAgICAgIGNoaWxkcmVuID0gY2hpbGRyZW4uY29uY2F0KG0sIG0uY2hpbGRNZW51cyA/IGZsYXRNZW51cyhtLmNoaWxkTWVudXMsIGRlcHRoICsgMSkgOiBbXSk7CiAgICAgICAgICB9KTsKICAgICAgICAgIHJldHVybiBjaGlsZHJlbjsKICAgICAgICB9OwogICAgICAgIGNvbnN0IHRlbXAgPSBmbGF0TWVudXMocmVzdWx0LCAxKTsKICAgICAgICB0aGlzLm1lbnVzID0gdGVtcC5tYXAoZWxlID0+IHsKICAgICAgICAgIC8vIGVsZS5pc1B1YmxpYyA9ICEhcHVibGljTWVudXMuZmluZChwZSA9PiBwZS51cmkgPT09IGVsZS51cmkgJiYgcGUuaHR0cE1ldGhvZCA9PT0gZWxlLmh0dHBNZXRob2QpOwogICAgICAgICAgLy8gZWxlLm5hbWUgPSBlbGUubWVudU5hbWUKICAgICAgICAgIGVsZS5pc1B1YmxpY1RleHQgPSBlbGUuaXNQdWJsaWMgPyAn6rO16rCcJyA6ICfruYTqs7XqsJwnOwogICAgICAgICAgZWxlLmlzQWN0aXZhdGVkVGV4dCA9IGVsZS5hY3RpdmF0ZWQgPyAn7IKs7JqpJyA6ICfsgqzsmqnslYjtlagnOwogICAgICAgICAgZWxlLm1lbnVUeXBlVGV4dCA9IGVsZS5tZW51VHlwZSA9PT0gJ1RZUEVfTElOSycgPyAi66eB7YGsIiA6IGVsZS5tZW51VHlwZSA9PT0gJ1RZUEVfQk9BUkQnID8gIuqyjOyLnO2MkCIgOiAi7Luo7YWQ7LigIjsKICAgICAgICAgIHJldHVybiBlbGU7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuZmluZE1lbnVzKCk7CiAgfQp9Ow=="},{"version":3,"mappings":"AAyDA;AACA;AAEA;EACAA;IACAC;MACAC;MACAC,gBACA;QAAAC;QAAAC;QAAAC;MAAA,GACA;QAAAF;QAAAC;QAAAC;MAAA,GACA;QAAAF;QAAAC;QAAAC;MAAA,GACA;QAAAF;QAAAC;QAAAC;MAAA,GACA;QAAAF;QAAAC;QAAAC;MAAA;MACA;MAAA;IAEA;;IACAC;MACAL;IACA;IACAM;MACAN;MACAC;IACA;EACA;EACAM;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACAC;MACAC;QACAC;QACA;UACA;UACA;QACA;UACA;QACA;MACA;IACA;EACA;EACAC;IACA;MACAH;MACAI;MACA;MACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MACAC,QACA;MACAC;IACA;EACA;EACAC;IACAC;MACA;IACA;IACA;MAEA;QAAA;QACA;UACA;YAAA;UAAA;QACA;QACA;MACA;MAEAC;QAEA;UACA;UACAC;YACAC;YACAC;UACA;UACA;QACA;QAEA;QAEA;UACA;UACA;UACAC;UACAA;UACAA;UAEA;QACA;MACA;IAEA;EACA;EACAC;IACA;EACA;AAEA","names":["props","headers","type","default","text","value","align","selectedMenu","category","watch","searchSelected","handler","console","data","search","options","page","itemsPerPage","selected","menus","copiedMenus","totalCount","rules","init","methods","saveEvent","menuApi","result","m","children","ele","created"],"sourceRoot":"src/components/app","sources":["Menus.vue"],"sourcesContent":["<template>\n  <div class=\"d-flex flex-column flex-grow-1\">\n    <v-card>\n      <v-card-title>\n        <v-switch\n          v-model=\"searchSelected\"\n          :label=\"searchSelected ? '선택 메뉴' : '전체 메뉴'\"\n          flat\n        >\n        </v-switch>\n        <v-spacer></v-spacer>\n        <v-text-field\n          v-model=\"search\"\n          append-icon=\"mdi-magnify\"\n          label=\"전체 검색\"\n          single-line\n          hide-details\n          clearable\n        ></v-text-field>\n      </v-card-title>\n\n<!--      <v-treeview-->\n<!--        v-model=\"selected\"-->\n<!--        :items=\"menus\"-->\n<!--        :search=\"search\"-->\n<!--        selection-type=\"independent\"-->\n<!--        selectable-->\n<!--        return-object-->\n<!--        open-all-->\n<!--      ></v-treeview>-->\n\n      <v-data-table\n        v-model=\"selected\"\n        :search=\"search\"\n        :headers=\"headers\"\n        :items=\"menus\"\n        show-select\n        item-key=\"id\"\n        class=\"elevation-1\"\n        sortable=\"false\"\n        :options.sync=\"options\"\n        :footer-props=\"{showFirstLastPage: true, 'items-per-page-options' : [5,10,20,50,100,-1]}\"\n        @click:row=\"(item, row) => row.select(!row.isSelected)\"\n      >\n        <template v-slot:item.menuName=\"{ item, value }\">\n          <div :style=\"`padding-left: ${(item.depth-1)*30}px`\">{{ value }}</div>\n        </template>\n        <template v-slot:item.createdAt=\"{ value }\">\n          <div>{{ value | formatDate('YYYY-MM-DD HH:mm:ss') }}</div>\n        </template>\n      </v-data-table>\n\n    </v-card>\n  </div>\n</template>\n\n<script>\nimport menuApi from '@/api/MenuApi';\nimport _ from \"lodash\";\n\nexport default {\n  props: {\n    headers: {\n      type: Array,\n      default: () => ([\n        {text: '메뉴명', value: 'menuName', align: 'left'},\n        {text: '접근제어', value: 'isPublicText', align: 'left'},\n        {text: '사용여부', value: 'isActivatedText', align: 'left'},\n        {text: '메뉴타입', value: 'menuTypeText', align: 'left'},\n        {text: '생성일', value: 'createdAt', align: 'left'},\n        // {text: '연결프로그램', value: 'connectedProgram', align: 'left'}\n      ])\n    },\n    selectedMenu: {\n      type: Array\n    },\n    category: {\n      type: String,\n      default: 'HOME'\n    }\n  },\n  watch: {\n    // selectedMenu: {\n    //   handler(nv) {\n    //     this.selected = nv.map(v => {\n    //       return Object.assign(v, {'id' : v.menuId})\n    //     })??[]\n    //     // console.log(nv)\n    //   }\n    // },\n    searchSelected: {\n      handler(nv) {\n        console.log(nv)\n        if(nv) {\n          this.copiedMenus = _.cloneDeep(this.menus)\n          this.menus = this.menus.filter(e => this.selected.map(s => s.id).includes(e.id))\n        } else {\n          this.menus = _.cloneDeep(this.copiedMenus)\n        }\n      }\n    }\n  },\n  data() {\n    return {\n      searchSelected: false,\n      search: '',\n      // headers: ,\n      options: {\n        page: 1,\n        itemsPerPage: -1\n      },\n      selected: [],\n      menus: [],\n      copiedMenus: [],\n      totalCount: null,\n      rules: {\n      },\n      init: false\n    }\n  },\n  methods: {\n    saveEvent() {\n      this.$emit('callback-save-event', this.selected);\n    },\n    async findMenus() {\n\n      if(!this.init) {\n        this.selected = this.selectedMenu.map(v => {\n          return Object.assign(v, {'id': v.menuId})\n        }) ?? []\n        this.init = true\n      }\n\n      menuApi.findMenusByCategory(this.category).then(result => {\n\n        const flatMenus = (result, depth) => {\n          let children = [];\n          result.forEach(m => {\n            m.depth = depth\n            children = children.concat(m, m.childMenus ? flatMenus(m.childMenus, depth+1) : [])\n          });\n          return children\n        };\n\n        const temp = flatMenus(result, 1);\n\n        this.menus = temp.map(ele => {\n          // ele.isPublic = !!publicMenus.find(pe => pe.uri === ele.uri && pe.httpMethod === ele.httpMethod);\n          // ele.name = ele.menuName\n          ele.isPublicText = ele.isPublic ?'공개':'비공개'\n          ele.isActivatedText = ele.activated ? '사용' : '사용안함'\n          ele.menuTypeText = ele.menuType === 'TYPE_LINK' ? \"링크\" : ele.menuType === 'TYPE_BOARD' ? \"게시판\" : \"컨텐츠\"\n\n          return ele;\n        });\n      })\n\n    }\n  },\n  created() {\n    this.findMenus();\n  }\n\n};\n</script>\n"]}]}